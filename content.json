{"meta":{"title":"æœ‰å¹¸çš„ä¸ªäººå°ç«™","subtitle":"code is poetry","description":"è¿™æ˜¯ä½œè€…ä¸ºäº”åå¹´åçš„è‡ªå·±ç•™ä¸‹çš„ï¼Œæ„Ÿæ©ç”Ÿæ´»ã€‚","author":"xiaoqinghua æœ‰å¹¸","url":"http://xiaoqinghua.site"},"pages":[],"posts":[{"title":"æˆéƒ½","slug":"æˆéƒ½","date":"2018-07-21T08:38:55.000Z","updated":"2018-08-24T08:20:25.395Z","comments":true,"path":"æˆéƒ½.html","link":"","permalink":"http://xiaoqinghua.site/æˆéƒ½.html","excerpt":"","text":"æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ æˆ éƒ½ 123456789\"city\":&#123; \"name\":\"chengdu\", \"abbreviation01\":\"cdc\", \"abbreviation02\":\"splendid officer city\", \"abbreviation03\":\"hibiscus city\", \"slogan_en\":\"living and enjoy in your home forever\", \"slogan_ch\":\"ä¸€åº§æ¥äº†å°±ä¸æƒ³ç¦»å¼€çš„åŸå¸‚\" \"xiaoqinghua\":\"I love you , I love my city\"&#125;","categories":[],"tags":[{"name":"City","slug":"City","permalink":"http://xiaoqinghua.site/tags/City/"}]},{"title":"Follow ç®—æ³•è¿‡ç¨‹éªŒç®—","slug":"followç®—æ³•è¿‡ç¨‹éªŒç®—","date":"2018-07-10T07:08:15.000Z","updated":"2018-08-24T07:44:01.536Z","comments":true,"path":"followç®—æ³•è¿‡ç¨‹éªŒç®—.html","link":"","permalink":"http://xiaoqinghua.site/followç®—æ³•è¿‡ç¨‹éªŒç®—.html","excerpt":"","text":"ä¸¾ä¸ªæ —å­ğŸŒ° 1follow(cs1,cs2) --&gt; follow(\"Z:z&gt;4|2=m=b-1+2+3$abcde\", \"Z:z&gt;1|2=m=b=1+2-1$fg\") 12345678910111213141516æŠŠcs1,cs2å±•å¼€cs1:op1.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op1.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op1.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op1.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op1.5:&#123; opcode: &apos;+&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;charBank=&apos;abcde&apos;cs2:op2.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op2.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op2.3:&#123; opcode: &apos;=&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op2.5:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;charBank=&apos;fg&apos; åœ¨followå‡½æ•°ä¸­æœ‰ä¸€ä¸ªapplyZipçš„å‡½æ•°,å…¶å®è¿™æ˜¯ä¸€ä¸ªè¿­ä»£å™¨,zipæœ‰æ‹‰é“¾çš„æ„æ€,åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ä¸æ–­çš„ä¸¤ä¸¤è¿ç®—,å°±åƒæ‹‰é“¾ä¸€æ ·ä¸€é¢—é¢—ç¼åˆèµ·æ¥: 1234567891011121314151617181920exports.applyZip = function (in1, idx1, in2, idx2, func) &#123; var iter1 = exports.opIterator(in1, idx1); var iter2 = exports.opIterator(in2, idx2); var assem = exports.smartOpAssembler(); var op1 = exports.newOp(); var op2 = exports.newOp(); var opOut = exports.newOp(); while (op1.opcode || iter1.hasNext() || op2.opcode || iter2.hasNext()) &#123; if ((!op1.opcode) &amp;&amp; iter1.hasNext()) iter1.next(op1); if ((!op2.opcode) &amp;&amp; iter2.hasNext()) iter2.next(op2); func(op1, op2, opOut); if (opOut.opcode) &#123; //print(opOut.toSource()); assem.append(opOut); opOut.opcode = ''; &#125; &#125; assem.endDocument(); return assem.toString();&#125;; 1234567891011å¼€å§‹è¿­ä»£(å¾ªç¯)å‰,éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œ:1ã€æ–°å»ºä¸¤ä¸ªç©ºçš„op1,op2å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶å±•å¼€çš„cs1,cs2ä¸­æ‰€æœ‰çš„opå¯¹è±¡çš„å€¼Op op1 = new Op();op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;Op op2 = new Op();op2:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€æ–°å»ºä¸€ä¸ªopOutå¯¹è±¡,ç”¨äºæ¥æ”¶æ¯ä¸€æ¬¡è¿­ä»£å®Œåæˆ‘ä»¬å¾—åˆ°çš„è¿ç®—ç»“æœopOp opOut = new Op();opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125; 1234567891011121314ç¬¬1æ¬¡è¿­ä»£:1ã€åˆå§‹:æŒ‰ç…§é¡ºåºä¼šä½¿ç”¨cs1ä¸­çš„op1.1å’Œcs2ä¸­çš„op2.1å’Œä¸€ä¸ªåˆšåˆšnewå‡ºæ¥çš„æ–°çš„opå¯¹è±¡op1.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op2.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;ops : &quot;|2=m&quot;è¯´æ˜:both keep,followä¹‹åop1,op2éƒ½æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬1æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213141516171819// both keepsopOut.opcode = '=';opOut.attribs = exports.followAttributes(op1.attribs, op2.attribs, pool);if (op1.chars &lt;= op2.chars) &#123; opOut.chars = op1.chars; opOut.lines = op1.lines; op2.chars -= op1.chars; op2.lines -= op1.lines; op1.opcode = ''; if (!op2.chars) &#123; op2.opcode = ''; &#125;&#125; else &#123; opOut.chars = op2.chars; opOut.lines = op2.lines; op1.chars -= op2.chars; op1.lines -= op2.lines; op2.opcode = '';&#125; 123456789101112ç¬¬2æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op2.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b&quot;è¯´æ˜:both keep,followä¹‹åop1,op2éƒ½æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬2æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213141516171819// both keepsopOut.opcode = '=';opOut.attribs = exports.followAttributes(op1.attribs, op2.attribs, pool);if (op1.chars &lt;= op2.chars) &#123; opOut.chars = op1.chars; opOut.lines = op1.lines; op2.chars -= op1.chars; op2.lines -= op1.lines; op1.opcode = ''; if (!op2.chars) &#123; op2.opcode = ''; &#125;&#125; else &#123; opOut.chars = op2.chars; opOut.lines = op2.lines; op1.chars -= op2.chars; op1.lines -= op2.lines; op2.opcode = '';&#125; 123456789101112ç¬¬3æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2.3:&#123; opcode: &apos;=&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b&quot;è¯´æ˜:op1-,op2=,followä¹‹åop1,op2éƒ½æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬3æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç : 12345678910111213141516if (!op2.opcode) &#123; op1.opcode = '';&#125; else &#123; if (op1.chars &lt;= op2.chars) &#123; op2.chars -= op1.chars; op2.lines -= op1.lines; op1.opcode = ''; if (!op2.chars) &#123; op2.opcode = ''; &#125; &#125; else &#123; op1.chars -= op2.chars; op1.lines -= op2.lines; op2.opcode = ''; &#125;&#125; 123456789101112ç¬¬4æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;=&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b=2&quot;è¯´æ˜:both+,followä¹‹åop1æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬4æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142var whichToDo;if (op2.opcode != '+') &#123; whichToDo = 1;&#125; else if (op1.opcode != '+') &#123; whichToDo = 2;&#125; else &#123; // both + var firstChar1 = chars1.peek(1); var firstChar2 = chars2.peek(1); var insertFirst1 = hasInsertFirst(op1.attribs); var insertFirst2 = hasInsertFirst(op2.attribs); if (insertFirst1 &amp;&amp; !insertFirst2) &#123; whichToDo = 1; &#125; else if (insertFirst2 &amp;&amp; !insertFirst1) &#123; whichToDo = 2; &#125; // insert string that doesn't start with a newline first so as not to break up lines else if (firstChar1 == '\\n' &amp;&amp; firstChar2 != '\\n') &#123; whichToDo = 2; &#125; else if (firstChar1 != '\\n' &amp;&amp; firstChar2 == '\\n') &#123; whichToDo = 1; &#125; // break symmetry: else if (reverseInsertOrder) &#123; whichToDo = 2; &#125; else &#123; whichToDo = 1; &#125;&#125;if (whichToDo == 1) &#123; chars1.skip(op1.chars); opOut.opcode = '='; opOut.lines = op1.lines; opOut.chars = op1.chars; opOut.attribs = ''; op1.opcode = '';&#125; else &#123; // whichToDo == 2 chars2.skip(op2.chars); exports.copyOp(op2, opOut); op2.opcode = '';&#125; 123456789101112ç¬¬5æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.5:&#123; opcode: &apos;+&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬4æ¬¡å¾ªç¯followç®—æ³•åçš„op2)opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b=2=3&quot;è¯´æ˜:both+,followä¹‹åop1æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next(),ä½†æ­¤æ—¶å·²æ²¡æœ‰next(),æ•…è¿˜æ˜¯ä½¿ç”¨op1åŸæœ‰å€¼ å¯¹åº”ç¬¬5æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142var whichToDo;if (op2.opcode != '+') &#123; whichToDo = 1;&#125; else if (op1.opcode != '+') &#123; whichToDo = 2;&#125; else &#123; // both + var firstChar1 = chars1.peek(1); var firstChar2 = chars2.peek(1); var insertFirst1 = hasInsertFirst(op1.attribs); var insertFirst2 = hasInsertFirst(op2.attribs); if (insertFirst1 &amp;&amp; !insertFirst2) &#123; whichToDo = 1; &#125; else if (insertFirst2 &amp;&amp; !insertFirst1) &#123; whichToDo = 2; &#125; // insert string that doesn't start with a newline first so as not to break up lines else if (firstChar1 == '\\n' &amp;&amp; firstChar2 != '\\n') &#123; whichToDo = 2; &#125; else if (firstChar1 != '\\n' &amp;&amp; firstChar2 == '\\n') &#123; whichToDo = 1; &#125; // break symmetry: else if (reverseInsertOrder) &#123; whichToDo = 2; &#125; else &#123; whichToDo = 1; &#125;&#125;if (whichToDo == 1) &#123; chars1.skip(op1.chars); opOut.opcode = '='; opOut.lines = op1.lines; opOut.chars = op1.chars; opOut.attribs = ''; op1.opcode = '';&#125; else &#123; // whichToDo == 2 chars2.skip(op2.chars); exports.copyOp(op2, opOut); op2.opcode = '';&#125; 123456789101112ç¬¬6æ¬¡è¿­ä»£:1ã€åˆå§‹:op1:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬5æ¬¡å¾ªç¯followç®—æ³•åçš„op1)op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬4æ¬¡å¾ªç¯followç®—æ³•åçš„op2)opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b=2=3+2&quot;è¯´æ˜:op2+,followä¹‹åop1ï¼Œop2æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next(),ä½†æ­¤æ—¶å·²æ²¡æœ‰next(),æ•…è¿˜æ˜¯ä½¿ç”¨op1ï¼Œop2åŸæœ‰å€¼ å¯¹åº”ç¬¬6æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :123456789101112131415161718192021222324252627282930313233343536373839404142var whichToDo;if (op2.opcode != '+') &#123; whichToDo = 1;&#125; else if (op1.opcode != '+') &#123; whichToDo = 2;&#125; else &#123; // both + var firstChar1 = chars1.peek(1); var firstChar2 = chars2.peek(1); var insertFirst1 = hasInsertFirst(op1.attribs); var insertFirst2 = hasInsertFirst(op2.attribs); if (insertFirst1 &amp;&amp; !insertFirst2) &#123; whichToDo = 1; &#125; else if (insertFirst2 &amp;&amp; !insertFirst1) &#123; whichToDo = 2; &#125; // insert string that doesn't start with a newline first so as not to break up lines else if (firstChar1 == '\\n' &amp;&amp; firstChar2 != '\\n') &#123; whichToDo = 2; &#125; else if (firstChar1 != '\\n' &amp;&amp; firstChar2 == '\\n') &#123; whichToDo = 1; &#125; // break symmetry: else if (reverseInsertOrder) &#123; whichToDo = 2; &#125; else &#123; whichToDo = 1; &#125;&#125;if (whichToDo == 1) &#123; chars1.skip(op1.chars); opOut.opcode = '='; opOut.lines = op1.lines; opOut.chars = op1.chars; opOut.attribs = ''; op1.opcode = '';&#125; else &#123; // whichToDo == 2 chars2.skip(op2.chars); exports.copyOp(op2, opOut); op2.opcode = '';&#125; 123456789101112ç¬¬7æ¬¡è¿­ä»£:1ã€åˆå§‹:op1:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬6æ¬¡å¾ªç¯followç®—æ³•åçš„op1)op2.5:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€followç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;ops : &quot;|2=m=b=2=3+2-1&quot;è¯´æ˜:åˆ¤æ–­ï¼Œop1,op2éƒ½æ²¡æœ‰opcode,ä¹Ÿæ²¡æœ‰next()äº†,åœæ­¢ å¯¹åº”ç¬¬7æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213141516171819exports.copyOp(op2, opOut);if (!op1.opcode) &#123; op2.opcode = '';&#125; else if (op2.chars &lt;= op1.chars) &#123; // delete part or all of a keep op1.chars -= op2.chars; op1.lines -= op2.lines; op2.opcode = ''; if (!op1.chars) &#123; op1.opcode = ''; &#125;&#125; else &#123; // delete all of a keep, and keep going opOut.lines = op1.lines; opOut.chars = op1.chars; op2.lines -= op1.lines; op2.chars -= op1.chars; op1.opcode = '';&#125; ç®—æ³•ç»“æœ12345678910111213141516171819202122232425261 Changeset = require(\"./src/static/js/Changeset\");2 var csA = \"Z:z&gt;4|2=m=b-1+2+3$abcde\";3 var csB = \"Z:z&gt;1|2=m=b=1+2-1$fg\";45 var doc = \"Hello World\\n\\n Hello World Hello Wor\";67 var appliedA = Changeset.applyToText(csA,doc);8 var appliedB = Changeset.applyToText(csB,doc);910 console.log('apply csA:', appliedA, ',apply csB: ', appliedB);1112 var csA1 = Changeset.follow(csB,csA,true,null);13 var csB1 = Changeset.follow(csA,csB,false,null);1415 console.log('csA1:', csA1, 'csB1: ', csB1);1617 // X * csA * csB1 = Y18 // X * csB * csA1 = Y1920 var leftY = Changeset.applyToText(csB1, appliedA);21 var rightY = Changeset.applyToText(csA1, appliedB);2223 console.log('final left:', leftY, ',final right: ', rightY);24 if (leftY === rightY) &#123;25 console.log('bingo');26 &#125; 12345678910111213141516171819202122apply csA: Hello World Hello World Hello Wabcderapply csB: Hello World Hello World Hello WofgcsA1: Z:10&gt;4|2=m=b-1+5$abcdecsB1: Z:13&gt;1|2=m=g-1+2$fgfinal left: Hello World Hello World Hello Wabcdefgfinal right: Hello World Hello World Hello Wabcdefgbingo 123456789&gt; var cs1 = \"Z:z&gt;4|2=m=b-1+2+3$abcde\";&gt; var cs2 = \"Z:z&gt;1|2=m=b=1+2-1$fg\";&gt; Changeset.follow(cs1,cs2,false,null);'Z:13&gt;1|2=m=g-1+2$fg'æœ€ç»ˆçš„CS:'Z:13&gt;1|2=m=g-1+2$fg' ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"Follow ç®—æ³•å›¾è§£","slug":"followç®—æ³•å›¾è§£","date":"2018-07-09T07:09:28.000Z","updated":"2018-08-24T07:44:03.490Z","comments":true,"path":"followç®—æ³•å›¾è§£.html","link":"","permalink":"http://xiaoqinghua.site/followç®—æ³•å›¾è§£.html","excerpt":"","text":"01 02 03 04 05 06 07 08 09 10 11 ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"FollowAttributes ç®—æ³•è§£æ","slug":"followAttributesç®—æ³•è§£æ","date":"2018-06-19T07:09:01.000Z","updated":"2018-08-24T07:43:46.320Z","comments":true,"path":"followAttributesç®—æ³•è§£æ.html","link":"","permalink":"http://xiaoqinghua.site/followAttributesç®—æ³•è§£æ.html","excerpt":"","text":"ä½•æ—¶ç”¨ followAttributesåœ¨followç®—æ³•ä¸­ï¼Œopä¸¤ä¸¤è¿›è¡Œè¿ç®—ï¼ŒåŒ…å«15ç§æƒ…å†µï¼Œä½•æ—¶è¿›è¡Œå±æ€§çš„åˆå¹¶å³followAttributesï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä»…åœ¨op1ï¼Œop2çš„opcodeåŒæ—¶ä¸ºâ€˜=â€™æ—¶è¿›è¡Œ\bfollowAttributesã€‚ ä¸ºä½•ç”¨ followAttributes followAttributeså‡½æ•°æ³¨é‡Š\b 123456// The merge of two sets of attribute changes to the same text// takes the lexically-earlier value if there are two values// for the same key. Otherwise, all key/value changes from// both attribute sets are taken. This operation is the \"follow\",// so a set of changes is produced that can be applied to att1// to produce the merged set. 1234ä»¥ä¸Šæ³¨é‡Šå¤§æ¦‚æ„æ€ï¼šä¸¤ä¸ªå±æ€§æ”¹å˜é›†çš„åˆå¹¶ä½œç”¨äºåŒä¸€æ®µæ–‡ï¼Œå¦‚æœåŒä¸€ä¸ªkeyæœ‰ä¸¤ä¸ªä¸åŒçš„å€¼åˆ™é‡‡å–å­—å…¸æ’åºåœ¨å‰çš„å€¼ã€‚å¦åˆ™ï¼Œæ‰€æœ‰çš„é”®å€¼éƒ½å°†æ”¹å˜å› ä¸ºä¸¤ä¸ªå±æ€§é›†éƒ½è¢«é‡‡å–ã€‚æ­¤æ“ä½œä¸ºâ€˜followâ€™ï¼Œå› æ­¤äº§ç”Ÿäº†ä¸€ç»„å¯ä»¥åº”ç”¨äºâ€˜att1â€™å±æ€§çš„å˜æ›´ï¼Œå»ç”Ÿæˆåˆå¹¶é›†ã€‚ \bé€šè¿‡followç®—æ³•æˆ‘ä»¬äº†è§£åˆ°ï¼Œä»…åœ¨op1ï¼Œop2çš„opcodeåŒæ—¶ä¸ºâ€˜=â€™æ—¶ï¼Œ\bæ­¤æ—¶çš„op1ï¼Œop2ä¸¤ä¸¤è¿ç®—æ‰æ˜¯æ“ä½œçš„åŒä¸€æ®µæ–‡æœ¬å­—ç¬¦(\bå¦‚\bop1ä¸º+ï¼Œop2ä¸º-)æ“ä½œçš„ä¸æ˜¯åŒä¸€å¤„æ–‡æœ¬ã€‚ followAttributes è¿‡ç¨‹ å‡†å¤‡AttributePool 1234567var p = new AttributePool();p.putAttrib(['x', '']);p.putAttrib(['x', 'abc']);p.putAttrib(['x', 'def']);p.putAttrib(['y', '']);p.putAttrib(['y', 'abc']);p.putAttrib(['y', 'def']); æ„é€ è¿ç®— 12assertEqualStrings('*3', Changeset.followAttributes('*0*4', '*2*3', p));assertEqualStrings('*0', Changeset.followAttributes('*2*3', '*0*4', p)); AttributePoolä¸­\bä¾æ¬¡å­˜å…¥äº†6ä¸ªå±æ€§: 1234567891011121314151617181920212223242526&#123; \"0\": [ \"x\", \"\" ], \"1\": [ \"x\", \"abc\" ], \"2\": [ \"x\", \"def\" ], \"3\": [ \"y\", \"\" ], \"4\": [ \"y\", \"abc\" ], \"5\": [ \"y\", \"def\" ]&#125; op1ä½¿ç”¨çš„å±æ€§ä¸º\b&quot;0&quot;: [&quot;x&quot;,&quot;&quot;]ã€&quot;4&quot;: [&quot;y&quot;,&quot;abc&quot;]ï¼Œop2ä½¿ç”¨çš„å±æ€§ä¸º\b&quot;2&quot;: [&quot;x&quot;,&quot;def&quot;]ã€&quot;3&quot;: [&quot;y&quot;,&quot;&quot;] ä»£ç è¯¦è§£ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768public static String followAttributes(String att1, String att2, AttributePool pool) &#123; // åœ¨ä¸Šè¿°çš„ç¤ºä¾‹ä¸­ att1ï¼Œatt2 å‡ä¸ä¸ºç©ºï¼Œæ•…å¯å¿½ç•¥ä¸‹é¢ä¸¤è¡Œä»£ç  // ä½†æ˜¯åœ¨ att2 ä¸ºç©ºï¼Œpool ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼ŒfollowAttributes è¿”å›ç©ºï¼Œä¸ºä½•ï¼Ÿ // å› ä¸ºåœ¨ä¸Šå±‚å‡½æ•° follow ä¸­å³ follow(op1,op2)ï¼Œop1 æ˜¯å·²ç»åº”ç”¨çš„æ“ä½œï¼Œ\bå½“ op2 ä½¿ç”¨çš„å±æ€§ä¸ºç©ºæ—¶ï¼Œ // æˆ‘ä»¬æœ€ç»ˆæ‰€éœ€è¦çš„æ“ä½œ opOut ç›¸å½“äºä¿æŒ op1 çš„æ“ä½œ /* å¯¹åº”ä¸Šå±‚å‡½æ•°followä¸­è¿™æ®µä»£ç ï¼ŒåŒæ ·çš„ attribs è¿”å›ç©ºå­—ç¬¦ä¸² if (whichToDo == 1) &#123; opOut.opcode = Op.OPCODE_KEEP; opOut.lines = op1.lines; opOut.chars = op1.chars; opOut.attribs = EMPTY_STRING; &#125; */ if (isEmpty(att2) || pool == null) &#123; return EMPTY_STRING; &#125; // åŒç†å¯è¯ /* å¯¹åº”å±‚å‡½æ•°followä¸­è¿™æ®µä»£ç ï¼ŒåŒæ ·çš„ attribs ä½¿ç”¨çš„æ˜¯ op2 çš„ 'attribs' &#125; else if (!op1.hasOpcode()) &#123; Op.copyOp(op2, opOut); op2.clearOpcode(); &#125; */ if (isEmpty(att1)) &#123; return att2; &#125; // æ–°å»ºä¸€ä¸ªç©ºçš„é›†åˆå³æˆ‘ä»¬æƒ³è¦çš„æœ€åç»“æœå±æ€§é›† // ä¸‹é¢åšçš„æ“ä½œå°±æ˜¯æŠŠ att2 çš„å±æ€§åŠ åˆ° atts ä¸­ï¼Œå…¶å® atts å°±æ˜¯ att2 List&lt;Attribute&gt; atts = Lists.newArrayList(); // åœ¨ä¸Šè¿°å®ä¾‹ä¸­ï¼Œç»è¿‡ä¸æ–­çš„æ­£åˆ™åŒ¹é…è¿­ä»£ï¼Œatts=[ [\"x\",\"def\"],[\"y\",\"\"] ] Matcher matcher = PATTERN_ATTRIBUTE.matcher(att2); while (matcher.find()) &#123; atts.add(pool.getAttrib(parseNum(matcher.group(1)))); &#125; // è¿™é‡Œä½¿ç”¨åµŒå¥—å¾ªç¯ï¼Œç›¸å½“äºä¸¤ä¸¤å¯¹æ¯” att1 å’Œ att2 ç›¸åŒ key å¯¹åº”çš„å±æ€§å€¼çš„å­—å…¸æ’åº\bå€¼çš„å¤§å° // åªæ˜¯æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„éƒ½æ˜¯att2çš„å€¼ï¼Œåœ¨ä¸€æ¬¡æ¬¡æ¯”è¾ƒä¸­åˆ é™¤æˆ–ä¸åˆ é™¤ att2 ä¸­çš„å€¼ matcher = PATTERN_ATTRIBUTE.matcher(att1); while (matcher.find()) &#123; Attribute pair1 = pool.getAttrib(parseNum(matcher.group(1))); for (int i = 0; i &lt; atts.size(); i++) &#123; Attribute pair2 = atts.get(i); if (pair1.getKey().equals(pair2.getKey())) &#123; // winner of merge is pair1, delete this attribute // ç¬¬ä¸€æ¬¡æ¯”è¾ƒ '' &lt; 'def',åˆ™åˆ é™¤ atts ä¸­çš„ '[\"x\",\"def\"]' ,atts=[ [\"y\",\"\"] ] // ç¬¬äºŒæ¬¡æ¯”è¾ƒ 'abc' &gt; '',æ²¡æœ‰æ“ä½œ ,æœ€ç»ˆ atts=[ [\"y\",\"\"] ] // TODO æ­¤å¤„ä¸ºä½•æ ¹æ®å€¼çš„å­—å…¸æ’åºæ¯”è¾ƒï¼Ÿ if (pair1.getValue().compareTo(pair2.getValue()) &lt;= 0) &#123; // ç§»é™¤ atts.remove(i); &#125; &#125; &#125; &#125; // we've only removed attributes, so they're already sorted StringAssembler buf = new StringAssembler(); for (int i = 0; i &lt; atts.size(); i++) &#123; buf.append(\"*\"); // atts=[ [\"y\",\"\"] ] ä¸­ [\"y\",\"\"]åœ¨ pool ä¸­ index=3 buf.append(numToString(pool.putAttrib(atts.get(i)))); &#125; return buf.toString();&#125;; ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"etherpad æŠ€æœ¯åˆ†æ","slug":"etherpadæŠ€æœ¯åˆ†æ","date":"2018-06-19T07:07:54.000Z","updated":"2018-08-24T07:43:43.135Z","comments":true,"path":"etherpadæŠ€æœ¯åˆ†æ.html","link":"","permalink":"http://xiaoqinghua.site/etherpadæŠ€æœ¯åˆ†æ.html","excerpt":"","text":"Etherpad \bæŠ€æœ¯åˆ†æé¢†åŸŸæ¨¡å‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849class Pad &#123; head atext apool&#125;class PadRevision &#123; author revision changeset timestamp&#125;class Changeset &#123; oldLength newLength ops charBank&#125;class Op &#123; opcode lines chars attribs&#125;class AText &#123; text attribs&#125;class AttributePool &#123; nextNum numToAttrib attribToNum&#125;class Attribute &#123; key value&#125;Pad o---&gt; PadRevisionPad o---&gt; ATextPad o---&gt; AttributePoolPadRevision o--&gt; ChangesetChangeset o--&gt; OpAttributePool o..&gt; Attribute Padpad åœ¨ etherpad ä¸­å¯¹åº”ä¸€ç¯‡æ–‡æ¡£ï¼Œæ˜¯å¤šäººåä½œçš„åŸºæœ¬å•ä½ã€‚ å¯¹ pad çš„æ¯ä¸€æ¬¡ç¼–è¾‘æ“ä½œï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ª revision, ç±»ä¼¼äºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ(å°¤å…¶ç±»ä¼¼äº svn)ä¸­çš„ä¸€æ¬¡æäº¤ï¼Œrevision ä»é›¶å¼€å§‹å¾€ä¸Šé€’å¢ï¼Œhead æŒ‡å‘å½“å‰æœ€æ–°çš„ revisionã€‚å¯¹æ‰€æœ‰çš„ revision ä¾æ¬¡è®¡ç®—ï¼Œå¯ä»¥å¾—å‡º pad çš„æ­£æ–‡ï¼Œä½†æ˜¯å¯¹äºæœ‰å¤§é‡ç¼–è¾‘æ“ä½œçš„ pad, æ‰“å¼€ pad æ—¶å¤§é‡çš„è®¡ç®—åŠ¿å¿…å½±å“åŠ è½½é€Ÿåº¦ï¼Œæ‰€ä»¥ pad ä¸­åŒ…å« atext å­—æ®µè¡¨ç¤ºå½“å‰\bçš„å†…å®¹ï¼Œä»¥ç©ºé—´æ¢æ—¶é—´ã€‚atext åŒ…å«ä¸¤éƒ¨åˆ†ï¼š text å’Œ attribs, text å°±æ˜¯è¯¥æ–‡æ¡£çš„æ­£æ–‡ï¼Œattribs æ˜¯æè¿°æ­£æ–‡çš„å†…å®¹éƒ½æœ‰å“ªäº›å±æ€§ã€‚ \bapool æ˜¯å±æ€§ â€œæ± â€ï¼Œ\bè®°å½•äº†å±æ€§ç¼–å·å¯¹åº”çš„å±æ€§ã€‚ ATextAtext ç¤ºä¾‹æ•°æ®ï¼š 1234&#123; \"text\": \"Welcome to Etherpad!\\n\\nThis pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!\\n\\nGet involved with Etherpad at http://etherpad.org\\n\\nsdf\\n\\ns\\nsdf\\nsefssss\\n\\nsss\\nsdf\\nsss\\n\\nsefffsdfsssef\\nesssdfsd\\ns\\nsdfsdfsd\\n\\ncvb\\nsdfsdf\\n\\naaaaaaaaaaaaaaaaaç¬¬ä¸‰æ–¹æ–¯è’‚èŠ¬\\n\\nsdf\\n\\nsdsssdf\\n\\nabc\\n\\nabccccfbcfcvbcfgrddfgddddd\\n\\nsdfesfsges\\n\\nsdfdsses\\n\\nsseg\\n\\n\\nsdfesgessdf\\n\\n\\n\\nsdfessefgdfg\\n\", \"attribs\": \"|2+m+1o*4+7|2+2g*3+1d*0|5+9*1+3*0|1+1*0+7|1+1*1|1+1*0+3*1|2+5*0+3*1|2+2*0+5*2+8*1|2+a*2+1*1|3+b*2+3*1|3+9*1+n*2|3+6*0|5+f*0+3*2+b*0|1+d*2|1+1*0+a*2|2+2*2+5*0+3*2|2+2*0+4*2|1+1*0|2+2*0+7*2|4+8*2+7*0+5|1+1\"&#125; AttributePoolAttributePoolJson æ˜¯ AttributePool ä¿å­˜åˆ°æ•°æ®åº“ä¸­çš„å½¢å¼ï¼ŒåŠ è½½åˆ°å†…å­˜æ—¶ä¼šåšä¸€æ¬¡è½¬æ¢ã€‚ AttributePool å¤šäº†ä¸€ä¸ª Attribute -&gt; num çš„åå‘ç´¢å¼•ï¼Œç”¨äºå¿«é€Ÿçš„é€šè¿‡ Attribute æ‰¾åˆ°å¯¹åº”çš„ç¼–å·ã€‚ etherpad çš„è®¾è®¡ä¸­ï¼Œ AttributePool çš„å±äºæŸä¸ª pad çš„ â€œå‘½åç©ºé—´â€ çš„ï¼Œ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ª pad éƒ½ä¼šæœ‰è‡ªå·±çš„ AttributePoolã€‚ AttributePoolJson ç¤ºä¾‹æ•°æ®ï¼š 12345678910111213141516171819202122232425&#123; \"numToAttrib\": &#123; \"0\": [ \"author\", \"a.lbCJXik3gn5kFmZn\" ], \"1\": [ \"author\", \"a.QOApinD3T5GQ57t6\" ], \"2\": [ \"author\", \"a.EAPXEvFdNybN83aD\" ], \"3\": [ \"strikethrough\", \"true\" ], \"4\": [ \"bold\", \"true\" ] &#125;, \"nextNum\": 5&#125; PadRevisionæ¯ä¸ª revision éƒ½è®°å½•äº† author å’Œ timestamp, å› æ­¤å¯ä»¥å›åˆ°ä»»æ„çš„å†å²ç¼–è¾‘çŠ¶æ€ã€‚ revision çš„ä¸»è¦å†…å®¹æ˜¯ changeset. Changesetä¸€ä¸ª changeset ä»£è¡¨å¯¹æ–‡æ¡£çš„å˜æ›´ã€‚ changeset çš„ç»“æ„: å›¾ç‰‡æ¥æº: http://slix.rocks/%E5%9C%A8%E7%BA%BF%E6%96%87%E6%A1%A3%E4%B8%AD-easysync2-%E7%AE%97%E6%B3%95%E4%BB%8B%E7%BB%8D/ Opetherpad å…±æœ‰å››ç§æ“ä½œï¼š 1234*N: åº”ç”¨æŸä¸ªå±æ€§=N: ä¿ç•™ N ä¸ªå­—ç¬¦+N: å¢åŠ  N ä¸ªå­—ç¬¦-N: åˆ é™¤ N ä¸ªå­—ç¬¦ åœ¨çº¿ demoã€‚ etherpad çš„ OT å®ç°å®æ—¶ååŒç¼–è¾‘çš„æ ¸å¿ƒç®—æ³•æ˜¯ OTï¼Œè€Œ Etherpad ä¸­ OT çš„å®ç°æ˜¯ä¸€ä¸ªåä¸º follow çš„å‡½æ•°ã€‚ è¯¦è§ follow ç®—æ³•ã€‚ client server åè®®é•¿è¿æ¥etherpad ä½¿ç”¨å¼€æº SocketIO åº“ï¼Œè¿™ä¸ªåº“åœ¨\bæµè§ˆå™¨æ”¯æŒ websocket æ—¶ï¼Œ\bä¼šä½¿ç”¨ websocket, åœ¨è€æ—§çš„æµè§ˆå™¨ä¸­ä¼š fallback åˆ° long polling ä¸Šã€‚ SocketIO ä¹Ÿæœ‰ä¸å°‘æ‰¹è¯„çš„å£°éŸ³ï¼Œä¾‹å¦‚: https://github.com/rethinkdb/horizon/issues/413 ã€‚ è€ƒè™‘åˆ°ç›®å‰ä¸»æµçš„æµè§ˆå™¨éƒ½å·²ç»æ”¯æŒ websocket äº†ï¼Œå¯ä»¥è€ƒè™‘\bç”¨åŸç”Ÿ websocket, å¦‚æœå¿…é¡»æ”¯æŒè€æ—§æµè§ˆå™¨ï¼Œåˆ™å¯ä»¥è€ƒè™‘ sockjs(onlyoffice å¥½åƒç”¨çš„è¿™ä¸ª)ã€‚ æœåŠ¡ç«¯é€»è¾‘å¤šäººç¼–è¾‘æ˜¯ä¸€å®šä¼šå‡ºç°å†²çªçš„ï¼Œé€šè¿‡ä¸¤ä¸ªåŠæ³•è§£å†³å†²çª: \bæœåŠ¡ç«¯é€šè¿‡\bæ’é˜Ÿçš„æ–¹å¼ï¼ŒæŠŠ\bå¹¶å‘ä¿®æ”¹çš„çš„æ“ä½œ\bä¸²è¡ŒåŒ–ï¼› å¦‚æœæŸæ¬¡ä¿®æ”¹çš„ baseRev ä¸æ˜¯å½“å‰ pad çš„ head, åˆ™é€šè¿‡ OT ç®—æ³•\b\bå¯¹äºå·²ç» commit çš„ä¿®æ”¹ä¾æ¬¡è®¡ç®—ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ‰ç‚¹ç±»ä¼¼äº git çš„ rebaseã€‚ 1234567891011121314151617181920212223242526272829autonumberskinparam ParticipantPadding 90title æœåŠ¡ç«¯å¤„ç†æµç¨‹\\n\\nClient -&gt; Server: baseRev + CSServer -&gt; Server: enqueue baseRev + CS|||loopServer -&gt; Server: follownote leftwhile (baseRev &lt; head) &#123; CS = follow(R(baseRev), CS); baseRev++;&#125;end noteend|||Server -&gt; Server: save revisionServer -&gt; Client: accept commit|||Server -&gt; &quot;Other clients&quot;: CS(head + 1) å®¢æˆ·ç«¯é€»è¾‘ å°†æ–°çš„è¾“å…¥åˆå¹¶åˆ°æœ¬åœ°å˜æ›´ ace2_inner.js 12var editor = new Ace2Inner()editor.init(); ace.js 1234567891011121314151617181ã€editor.init = function(containerId, initialCode, doneFunc)&#123;&#125;2ã€doActionsPendingInit()3ã€aceFunctionsPendingInit.getFormattedCode4ã€ace2_inner.jsfunction getFormattedCode()&#123; inCallStackIfNecessary(\"getFormattedCode\", incorporateUserChanges);&#125;5ã€function observeSuspiciousNodes()6ã€function incorporateUserChanges(isTimeUp)fastIncorp()inCallStackIfNecessary(\"handleKeyEvent\", function()&#123;&#125; å‘æœåŠ¡å™¨æäº¤å˜æ›´é›† 12345671ã€collab_client.js2ã€function getCollabClient(ace2editor, serverVars, initialUserInfo, options, _pad)&#123;&#125;3ã€editor.setUserChangeNotificationCallback(wrapRecordingErrors(\"handleUserChanges\", handleUserChanges));4ã€handleUserChanges() å›å¤ç¡®è®¤å·²æäº¤çš„å˜æ›´é›†(ack) ç›‘å¬å…¶ä»–å®¢æˆ·çš„å˜æ›´é›† è¿æ¥åˆ°æœåŠ¡å™¨å¹¶è¯·æ±‚åˆå§‹æ–‡æ¡£ pad.html 1&lt;script type=\"text/javascript\"&gt; pad.init(); &lt;/script&gt; pad.js 123456781ã€init: function()2ã€function handshake()3ã€socket.once('connect', function () &#123; sendClientReady(false); &#125;); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475skinparam ParticipantPadding 90title å®¢æˆ·ç«¯å¤„ç†æµç¨‹\\n\\n||||||Server &lt;- Client: first connect &lt;&lt; unique ID &gt;&gt;note rightasync.waterfall()end notenote right of A #aquaæ”¶åˆ°æœåŠ¡å™¨ç¡®è®¤çš„å˜æ›´çŠ¶æ€end notenote right of X #aquaæŠŠå˜æ›´å‘åˆ°æœåŠ¡å™¨æ—¶çš„çŠ¶æ€end notenote right of Y #aquaç”¨æˆ·å·²è¾“å…¥çš„çŠ¶æ€end notenote right of E #aquaç”¨æˆ·æ­£åœ¨è¾“å…¥end note|||Client &lt;- Server: HEADTEXT|||note over Client , Aidentity mappingend note|||A &lt;-[#0000FF]- X: A=X*A|||X &lt;-[#0000FF]- Y:note rightY=Y*Eend note|||Y &lt;-[#ED3EEE] E: types|||Y -[#0000FF]-&gt; Server: submit &lt;&lt; cs+uid &gt;&gt;|||note over A , Yevery 500msend note|||A &lt;-- Server: acknowledgement |||&quot;Other clients&quot; &lt;-- Client : monitor other client|||&quot;Other clients&quot; --&gt; Server: other cs|||Client -&gt; Client: composenote leftmakeChangesetTracker()end note|||Server -&gt; Server: server logic||| åç»­äº§å“åŒ–å·¥ä½œ\b é•¿è¿æ¥å¤šæœºåˆ†å¸ƒ æ•°æ®åº“æ‰©å±• è´¦æˆ·ç³»ç»Ÿ è¿ç»´è‡ªåŠ¨åŒ–ç³»ç»Ÿ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"EtherPad","slug":"Code/EtherPad","permalink":"http://xiaoqinghua.site/categories/Code/EtherPad/"}],"tags":[{"name":"EtherPad","slug":"EtherPad","permalink":"http://xiaoqinghua.site/tags/EtherPad/"}]},{"title":"ComposeAttributes ç®—æ³•è§£æ","slug":"composeAttributesç®—æ³•è§£æ","date":"2018-06-18T07:10:02.000Z","updated":"2018-08-24T07:43:25.475Z","comments":true,"path":"composeAttributesç®—æ³•è§£æ.html","link":"","permalink":"http://xiaoqinghua.site/composeAttributesç®—æ³•è§£æ.html","excerpt":"","text":"ä½•æ—¶ç”¨ composeAttributesåœ¨composeç®—æ³•ä¸­ï¼Œopä¸¤ä¸¤è¿›è¡Œè¿ç®—ï¼Œä½•æ—¶è¿›è¡Œå±æ€§çš„åˆå¹¶å³composeAttributesï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä»…åœ¨op1ï¼Œop2çš„opcodeåŒæ—¶ä¸ºâ€˜=â€™æ—¶ï¼Œæˆ–è€…op2çš„opcodeä¸ºâ€˜=â€™ï¼Œop1çš„opcodeä¸ºâ€˜+â€™æ—¶è¿›è¡Œ\bcomposeAttributesã€‚ ä¸ºä½•ç”¨ composeAttributes composeAttributeså‡½æ•°æ³¨é‡Š\b 12345678910111213// att1 and att2 are strings like \"*3*f*1c\", asMutation is a boolean.// Sometimes attribute (key,value) pairs are treated as attribute presence// information, while other times they are treated as operations that// mutate a set of attributes, and this affects whether an empty value// is a deletion or a change.// Examples, of the form (att1Items, att2Items, resultIsMutation) -&gt; result// ([], [(bold, )], true) -&gt; [(bold, )]// ([], [(bold, )], false) -&gt; []// ([], [(bold, true)], true) -&gt; [(bold, true)]// ([], [(bold, true)], false) -&gt; [(bold, true)]// ([(bold, true)], [(bold, )], true) -&gt; [(bold, )]// ([(bold, true)], [(bold, )], false) -&gt; []// pool can be null if att2 has no attributes. 123ä»¥ä¸Šæ³¨é‡Šå¤§æ¦‚æ„æ€ï¼šatt1å’Œatt2æ˜¯ç±»ä¼¼äºâ€œ*3*f*1câ€çš„å­—ç¬¦ä¸²ï¼ŒresultIsMutationæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ã€‚æœ‰æ—¶å±æ€§(é”®ã€å€¼)å¯¹è¢«è§†ä¸ºå±æ€§å­˜åœ¨ä¿¡æ¯ï¼Œè€Œæœ‰æ—¶å®ƒä»¬è¢«è§†ä¸ºæ”¹å˜ä¸€ç»„å±æ€§çš„æ“ä½œï¼Œè¿™å°†å½±å“ç©ºå€¼æ˜¯åˆ é™¤è¿˜æ˜¯æ›´æ”¹ã€‚ \bé€šè¿‡composeç®—æ³•æˆ‘ä»¬äº†è§£åˆ°ï¼Œä»…åœ¨op1ï¼Œop2çš„opcodeåŒæ—¶ä¸ºâ€˜=â€™æ—¶ï¼Œ\bæ­¤æ—¶çš„op1ï¼Œop2ä¸¤ä¸¤è¿ç®—æ‰æ˜¯æ“ä½œçš„åŒä¸€æ®µæ–‡æœ¬å­—ç¬¦(\bå¦‚\bop1ä¸º+ï¼Œop2ä¸º-)æ“ä½œçš„ä¸æ˜¯åŒä¸€å¤„æ–‡æœ¬ã€‚ composeAttributes è¿‡ç¨‹ å‡†å¤‡AttributePool 1234567var p = new AttributePool();p.putAttrib(['x', '']);p.putAttrib(['x', 'abc']);p.putAttrib(['x', 'def']);p.putAttrib(['y', '']);p.putAttrib(['y', 'abc']);p.putAttrib(['y', 'def']); æ„é€ è¿ç®— 12assertEqualStrings('*0*3', Changeset.composeAttributes('*0*4', '*2*3', true, p));assertEqualStrings('*0*4', Changeset.composeAttributes('*2*3', '*0*4', true, p)); AttributePoolä¸­\bä¾æ¬¡å­˜å…¥äº†6ä¸ªå±æ€§: 1234567891011121314151617181920212223242526&#123; \"0\": [ \"x\", \"\" ], \"1\": [ \"x\", \"abc\" ], \"2\": [ \"x\", \"def\" ], \"3\": [ \"y\", \"\" ], \"4\": [ \"y\", \"abc\" ], \"5\": [ \"y\", \"def\" ]&#125; op1ä½¿ç”¨çš„å±æ€§ä¸º\b&quot;0&quot;: [&quot;x&quot;,&quot;&quot;]ã€&quot;4&quot;: [&quot;y&quot;,&quot;abc&quot;]ï¼Œop2ä½¿ç”¨çš„å±æ€§ä¸º\b&quot;2&quot;: [&quot;x&quot;,&quot;def&quot;]ã€&quot;3&quot;: [&quot;y&quot;,&quot;&quot;] ä»£ç è¯¦è§£ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public static String composeAttributes(String att1, String att2, boolean resultIsMutation, AttributePool pool) &#123; // è¿™ä¸¤æ­¥å…¶å®å’Œ followAttributes ç›¸ä¼¼ï¼Œåœ¨å¤–å±‚å‡½æ•°ï¼Œéƒ½æœ‰å¯¹åº”æƒ…å†µçš„ä»£ç  if (isEmpty(att1) &amp;&amp; resultIsMutation) &#123; // In the case of a mutation (i.e. composing two exportss), // an att2 composed with an empy att1 is just att2. If att1 // is part of an attribution string, then att2 may remove // attributes that are already gone, so don't do this optimization. return att2; &#125; if (isEmpty(att2)) &#123; return att1; &#125; // æ–°å»ºä¸€ä¸ªç©ºçš„é›†åˆå³æˆ‘ä»¬æƒ³è¦çš„æœ€åç»“æœå±æ€§é›† // ä¸‹é¢åšçš„æ“ä½œå°±æ˜¯æŠŠ att1 çš„å±æ€§åŠ åˆ° atts ä¸­ï¼Œå…¶å® atts å°±æ˜¯ att1 List&lt;Attribute&gt; atts = new LinkedList&lt;&gt;(); // ç»è¿‡ä¸æ–­çš„æ­£åˆ™åŒ¹é…è¿­ä»£ atts==att1 Matcher matcher = PATTERN_ATTRIBUTE.matcher(att1); while (matcher.find()) &#123; String attId = matcher.group(1); atts.add(pool.getAttrib(parseNum(attId))); &#125; // è¿™é‡Œä½¿ç”¨åµŒå¥—å¾ªç¯ï¼Œç›¸å½“äºä¸¤ä¸¤å¯¹æ¯” att1 å’Œ att2 ç›¸åŒ key å¯¹åº”æ˜¯å¦æœ‰å€¼æˆ–è€…æ˜¯å¦çªå˜ // åªæ˜¯æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°çš„éƒ½æ˜¯att2çš„å€¼ï¼Œåœ¨ä¸€æ¬¡æ¬¡æ¯”è¾ƒä¸­åˆ é™¤ att2 ä¸­çš„å€¼ï¼Œæˆ–è€… è®¾ç½®æˆä»¥å‰ att1 çš„å€¼ matcher = PATTERN_ATTRIBUTE.matcher(att2); while (matcher.find()) &#123; String attId = matcher.group(1); Attribute pair = pool.getAttrib(parseNum(attId)); boolean found = false; for (int i = 0; i &lt; atts.size(); i++) &#123; Attribute oldPair = atts.get(i); if (oldPair.getKey().equals(pair.getKey())) &#123; if (pair.hasValue() || resultIsMutation) &#123; // æ³¨æ„è¿™é‡Œæ˜¯ set, å³æ›¿æ¢æˆ att2 çš„å€¼ // é‡åˆ°ç›¸åŒçš„ key, å¦‚æœ att2 æœ‰å€¼æˆ–è€…æ˜¯çªå˜ï¼Œå°±æŠŠ att1 ä¸­çš„å€¼æ›¿æ¢æˆ att2 çš„å€¼ atts.set(i, oldPair.withValue(pair.getValue())); &#125; else &#123; // é‡åˆ°ç›¸åŒçš„ key, å¦‚æœ att2 æ²¡æœ‰å€¼ï¼Œåˆ™åˆ é™¤ att1 ä¸­çš„å€¼(å³ atts çš„å€¼) atts.remove(i); &#125; found = true; break; &#125; &#125; // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸åŒçš„ key åˆ™ç›´æ¥ç”¨ att2 if ((!found) &amp;&amp; (pair.hasValue() || resultIsMutation)) &#123; atts.add(pair); &#125; &#125; // atts è¿™é‡Œè¿›è¡Œäº†è‡ªç„¶æ’åºï¼Œæ‰€ä»¥åœ¨ followAttributes çš„æ—¶å€™æŒ‰ç…§è‡ªç„¶æ’åºå–å€¼ // åœ¨ js æºç ä¸­ï¼Œatts.sort(); // atts.sort();æ²¡æœ‰ compareFunction å‚æ•°ï¼Œæ‰€ä»¥æ’åºæ—¶ç›´æ¥å°†æ•°ç»„çš„å…ƒç´ è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§å­—ç¬¦ä¸²çš„ Unicode æ’åº atts.sort(Comparator.comparing(Attribute::toString)); StringAssembler buf = new StringAssembler(); for (int i = 0; i &lt; atts.size(); i++) &#123; buf.append(\"*\"); buf.append(numToString(pool.putAttrib(atts.get(i)))); &#125; //print(att1+\" / \"+att2+\" / \"+buf.toString()); return buf.toString();&#125; ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"Compose ç®—æ³•è¿‡ç¨‹éªŒç®—","slug":"composeç®—æ³•è¿‡ç¨‹éªŒç®—","date":"2018-06-18T07:09:51.000Z","updated":"2018-08-24T07:43:39.098Z","comments":true,"path":"composeç®—æ³•è¿‡ç¨‹éªŒç®—.html","link":"","permalink":"http://xiaoqinghua.site/composeç®—æ³•è¿‡ç¨‹éªŒç®—.html","excerpt":"","text":"ä¸¾ä¸ªæ —å­ğŸŒ° 1compose(cs1,cs2) --&gt; compose(\"Z:z&gt;4|2=m=b-1+2+3$abcde\", \"Z:13&gt;1|2=m=g-1+2$fg\") 123456789101112131415æŠŠcs1,cs2å±•å¼€cs1:op1.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op1.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op1.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op1.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op1.5:&#123; opcode: &apos;+&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;charBank=&apos;abcde&apos;cs2:op2.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op2.2:&#123; opcode: &apos;=&apos;, chars: 16, lines: 0, attribs: &apos;&apos; &#125;op2.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;charBank=&apos;fg&apos; åŒfollowå‡½æ•°ä¸€æ ·ï¼Œåœ¨composeå‡½æ•°ä¸­ä¹Ÿæœ‰ä¸€ä¸ªapplyZipçš„å‡½æ•°,å…¶å®è¿™æ˜¯ä¸€ä¸ªè¿­ä»£å™¨,åŒæ—¶è¿˜æœ‰ä¸€ä¸ª_slicerZipperFuncçš„åˆ†ç‰‡è¿­ä»£å™¨ï¼Œæ˜¯ä¸“é—¨ä¸ºcomposeå‡†å¤‡çš„å‡½æ•°ã€‚zipæœ‰æ‹‰é“¾çš„æ„æ€,åœ¨è¿­ä»£çš„è¿‡ç¨‹ä¸­ä¸æ–­çš„ä¸¤ä¸¤è¿ç®—,å°±åƒæ‹‰é“¾ä¸€æ ·ä¸€é¢—é¢—ç¼åˆèµ·æ¥: applyZipå‡½æ•° 1234567891011121314151617181920exports.applyZip = function (in1, idx1, in2, idx2, func) &#123; var iter1 = exports.opIterator(in1, idx1); var iter2 = exports.opIterator(in2, idx2); var assem = exports.smartOpAssembler(); var op1 = exports.newOp(); var op2 = exports.newOp(); var opOut = exports.newOp(); while (op1.opcode || iter1.hasNext() || op2.opcode || iter2.hasNext()) &#123; if ((!op1.opcode) &amp;&amp; iter1.hasNext()) iter1.next(op1); if ((!op2.opcode) &amp;&amp; iter2.hasNext()) iter2.next(op2); func(op1, op2, opOut); if (opOut.opcode) &#123; //print(opOut.toSource()); assem.append(opOut); opOut.opcode = ''; &#125; &#125; assem.endDocument(); return assem.toString();&#125;; _slicerZipperFuncå‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119/** * Function used as parameter for applyZip to apply a Changeset to an attribute */ private static Op _slicerZipperFunc(Op attOp, Op csOp, AttributePool pool) &#123; // attOp is the op from the sequence that is being operated on, either an // attribution string or the earlier of two exportss being composed. // pool can be null if definitely not needed. //print(csOp.toSource()+\" \"+attOp.toSource()+\" \"+opOut.toSource()); // åœ¨ compose ä¸­ ï¼ŒattOp æ˜¯æ­£åœ¨è¢«æ“ä½œçš„å³ op1 Op opOut = new Op(); if (attOp.isMinus()) &#123; // å¦‚æœ op1 æ˜¯ - ï¼Œåˆ™æˆ‘ä»¬éœ€è¦çš„ opOut ä½¿ç”¨ op1 Op.copyOp(attOp, opOut); // æ¸…ç©º op1 æ“ä½œ attOp.clearOpcode(); &#125; else if (!attOp.hasOpcode()) &#123; // å¦‚æœ op1 æ²¡æœ‰æ“ä½œï¼Œåˆ™ä½¿ç”¨ op2 Op.copyOp(csOp, opOut); // æ¸…ç©º op2 æ“ä½œ csOp.clearOpcode(); &#125; else &#123; switch (csOp.opcode) &#123; case Op.OPCODE_MINUS: &#123; // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å°äºç­‰äº op1 æ“ä½œçš„å­—ç¬¦ if (csOp.chars &lt;= attOp.chars) &#123; // delete or delete part if (attOp.isKeep()) &#123; // å¦‚æœ op2 æ˜¯ -,op1 æ˜¯ = // åˆå¹¶åçš„æ˜¯-ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œå…ˆ=å- opOut.opcode = Op.OPCODE_MINUS; // å–å°çš„éƒ¨åˆ† opOut.chars = csOp.chars; opOut.lines = csOp.lines; opOut.attribs = EMPTY_STRING; &#125; // å¦‚æœ op2 æ˜¯ -,op1 æ˜¯ + // å¾—åˆ°æ˜¯ç©ºçš„ opOut ï¼Œç›¸å½“äºä¸åšä»»ä½•æ“ä½œï¼Œç›´è‡³æ²¡æœ‰ä¸‹ä¸€æ¬¡è¿ç®— attOp.chars -= csOp.chars; attOp.lines -= csOp.lines; csOp.clearOpcode(); if (attOp.chars == 0) &#123; attOp.clearOpcode(); &#125; &#125; else &#123; // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å¤§äº op1 æ“ä½œçš„å­—ç¬¦ // delete and keep going if (attOp.isKeep()) &#123; // å¦‚æœ op2 æ˜¯ -,op1 æ˜¯ = // åˆå¹¶åçš„æ˜¯-ï¼Œå¯ä»¥ç†è§£ä¸ºï¼Œå…ˆ=å- opOut.opcode = Op.OPCODE_MINUS; // å–å°çš„éƒ¨åˆ† opOut.chars = attOp.chars; opOut.lines = attOp.lines; opOut.attribs = EMPTY_STRING; &#125; // å–ç›¸å‡çš„éƒ¨åˆ† csOp.chars -= attOp.chars; csOp.lines -= attOp.lines; attOp.clearOpcode(); &#125; break; &#125; case Op.OPCODE_PLUS: &#123; // insert // å¦‚æœ op2 æ˜¯ +ï¼Œåˆ™åˆå¹¶åè¿˜æ˜¯ + Op.copyOp(csOp, opOut); csOp.clearOpcode(); break; &#125; case Op.OPCODE_KEEP: &#123; // å¦‚æœ op2 æ˜¯ = // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å°äºç­‰äº op1 æ“ä½œçš„å­—ç¬¦ if (csOp.chars &lt;= attOp.chars) &#123; // keep or keep part ä¿æŒæˆ–è€…ä¿æŒä¸€éƒ¨åˆ†(ä¿æŒ op1 çš„æ“ä½œå’Œå…¨éƒ¨çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ æˆ–è€… ä¿æŒ op1 çš„æ“ä½œå’Œä¸€éƒ¨åˆ†çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ) // å¯ä»¥ç†è§£ä¸ºï¼šop1å¢åŠ æˆ–è€…ä¿æŒäº†nä¸ªå­—ç¬¦ï¼Œop2ä¿æŒäº†mä¸ªå­—ç¬¦(m&lt;=n) opOut.opcode = attOp.opcode; opOut.chars = csOp.chars; opOut.lines = csOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); csOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† attOp.chars -= csOp.chars; attOp.lines -= csOp.lines; if (attOp.chars == 0) &#123; attOp.clearOpcode(); &#125; &#125; else &#123; // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å¤§äº op1 æ“ä½œçš„å­—ç¬¦ // keep and keep going ä¿æŒå¹¶ä¸”ç»§ç»­ opOut.opcode = attOp.opcode; opOut.chars = attOp.chars; opOut.lines = attOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); attOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† csOp.chars -= attOp.chars; csOp.lines -= attOp.lines; &#125; break; &#125; case EMPTY_STRING: &#123; // å¦‚æœ op2 æ˜¯ ç©ºæ“ä½œï¼Œåˆ™åˆå¹¶åè¿˜æ˜¯ op1 çš„æ“ä½œ Op.copyOp(attOp, opOut); attOp.clearOpcode(); break; &#125; &#125; &#125; return opOut; &#125; 1234567891011å¼€å§‹è¿­ä»£(å¾ªç¯)å‰,éœ€è¦åšä¸€äº›å‡†å¤‡å·¥ä½œ:1ã€æ–°å»ºä¸¤ä¸ªç©ºçš„op1,op2å¯¹è±¡ï¼Œç”¨äºæ¥æ”¶å±•å¼€çš„cs1,cs2ä¸­æ‰€æœ‰çš„opå¯¹è±¡çš„å€¼Op op1 = new Op();op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;Op op2 = new Op();op2:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€æ–°å»ºä¸€ä¸ªopOutå¯¹è±¡,ç”¨äºæ¥æ”¶æ¯ä¸€æ¬¡è¿­ä»£å®Œåæˆ‘ä»¬å¾—åˆ°çš„è¿ç®—ç»“æœopOp opOut = new Op();opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125; 1234567891011121314ç¬¬1æ¬¡è¿­ä»£:1ã€åˆå§‹:æŒ‰ç…§é¡ºåºä¼šä½¿ç”¨cs1ä¸­çš„op1.1å’Œcs2ä¸­çš„op2.1å’Œä¸€ä¸ªåˆšåˆšnewå‡ºæ¥çš„æ–°çš„opå¯¹è±¡op1.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;op2.1:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;=&apos;, chars: 22, lines: 2, attribs: &apos;&apos; &#125;assem : &quot;|2=m&quot;è¯´æ˜:both keep,composeä¹‹åop1,op2éƒ½æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬1æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :1234567891011121314151617181920case Op.OPCODE_KEEP: &#123; // å¦‚æœ op2 æ˜¯ = // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å°äºç­‰äº op1 æ“ä½œçš„å­—ç¬¦ if (csOp.chars &lt;= attOp.chars) &#123; // keep or keep part ä¿æŒæˆ–è€…ä¿æŒä¸€éƒ¨åˆ†(ä¿æŒ op1 çš„æ“ä½œå’Œå…¨éƒ¨çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ æˆ–è€… ä¿æŒ op1 çš„æ“ä½œå’Œä¸€éƒ¨åˆ†çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ) // å¯ä»¥ç†è§£ä¸ºï¼šop1å¢åŠ æˆ–è€…ä¿æŒäº†nä¸ªå­—ç¬¦ï¼Œop2ä¿æŒäº†mä¸ªå­—ç¬¦(m&lt;=n) opOut.opcode = attOp.opcode; opOut.chars = csOp.chars; opOut.lines = csOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); csOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† attOp.chars -= csOp.chars; attOp.lines -= csOp.lines; if (attOp.chars == 0) &#123; attOp.clearOpcode(); &#125; &#125; 123456789101112ç¬¬2æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.2:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op2.2:&#123; opcode: &apos;=&apos;, chars: 16, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 5, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;=&apos;, chars: 11, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;è¯´æ˜:both keep,composeä¹‹åop2è¿˜æœ‰opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬2æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213else &#123; // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å¤§äº op1 æ“ä½œçš„å­—ç¬¦ // keep and keep going ä¿æŒå¹¶ä¸”ç»§ç»­ opOut.opcode = attOp.opcode; opOut.chars = attOp.chars; opOut.lines = attOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); attOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† csOp.chars -= attOp.chars; csOp.lines -= attOp.lines;&#125; 123456789101112ç¬¬3æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 5, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬2æ¬¡å¾ªç¯composeç®—æ³•åçš„op2)opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 5, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;ï¼ŒminusAssem : &quot;-1&quot;è¯´æ˜:op1-,op2=,composeä¹‹åop2è¿˜æœ‰opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬3æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç : 1234// å¦‚æœ op1 æ˜¯ - ï¼Œåˆ™æˆ‘ä»¬éœ€è¦çš„ opOut ä½¿ç”¨ op1Op.copyOp(attOp, opOut);// æ¸…ç©º op1 æ“ä½œattOp.clearOpcode(); 123456789101112ç¬¬4æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 5, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬3æ¬¡å¾ªç¯composeç®—æ³•åçš„op2)opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;, minusAssem : &quot;-1&quot;, plusAssem : &quot;+2&quot;è¯´æ˜:op1+,op2=,composeä¹‹åop1æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬4æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213&#125; else &#123; // å¦‚æœ op2 æ“ä½œçš„å­—ç¬¦å¤§äº op1 æ“ä½œçš„å­—ç¬¦ // keep and keep going ä¿æŒå¹¶ä¸”ç»§ç»­ opOut.opcode = attOp.opcode; opOut.chars = attOp.chars; opOut.lines = attOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); attOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† csOp.chars -= attOp.chars; csOp.lines -= attOp.lines;&#125; 123456789101112ç¬¬5æ¬¡è¿­ä»£:1ã€åˆå§‹:op1.5:&#123; opcode: &apos;+&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;=&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;(ç¬¬4æ¬¡å¾ªç¯composeç®—æ³•åçš„op2)opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;+&apos;, chars: 3, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;, minusAssem : &quot;-1&quot;, plusAssem : &quot;+2+3&quot;è¯´æ˜:op1+,op2=,composeä¹‹åop1,op2éƒ½æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next(),ä½†æ­¤æ—¶op1å·²æ²¡æœ‰next(),æ•…op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125; å¯¹åº”ç¬¬5æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :12345678910111213141516if (csOp.chars &lt;= attOp.chars) &#123; // keep or keep part ä¿æŒæˆ–è€…ä¿æŒä¸€éƒ¨åˆ†(ä¿æŒ op1 çš„æ“ä½œå’Œå…¨éƒ¨çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ æˆ–è€… ä¿æŒ op1 çš„æ“ä½œå’Œä¸€éƒ¨åˆ†çš„æ“ä½œå­—ç¬¦ä¸²å’Œæ¢è¡Œ) // å¯ä»¥ç†è§£ä¸ºï¼šop1å¢åŠ æˆ–è€…ä¿æŒäº†nä¸ªå­—ç¬¦ï¼Œop2ä¿æŒäº†mä¸ªå­—ç¬¦(m&lt;=n) opOut.opcode = attOp.opcode; opOut.chars = csOp.chars; opOut.lines = csOp.lines; // åˆå¹¶å±æ€§ opOut.attribs = composeAttributes(attOp.attribs, csOp.attribs, attOp.isKeep(), pool); csOp.clearOpcode(); // å‰©ä½™éƒ¨åˆ† attOp.chars -= csOp.chars; attOp.lines -= csOp.lines; if (attOp.chars == 0) &#123; attOp.clearOpcode(); &#125;&#125; 123456789101112ç¬¬6æ¬¡è¿­ä»£:1ã€åˆå§‹:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;(next()æ²¡æœ‰ä¸‹ä¸€ä¸ªæ—¶ï¼Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„op)op2.3:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;-&apos;, chars: 1, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;, minusAssem : &quot;-1-1&quot;, plusAssem : &quot;+2+3&quot;è¯´æ˜:op2-,composeä¹‹åop1ï¼Œop2æ²¡opcode,æ‰€ä»¥é‡æ–°èµ‹å€¼next() å¯¹åº”ç¬¬6æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :1234// å¦‚æœ op1 æ²¡æœ‰æ“ä½œï¼Œåˆ™ä½¿ç”¨ op2Op.copyOp(csOp, opOut);// æ¸…ç©º op2 æ“ä½œcsOp.clearOpcode(); 123456789101112ç¬¬7æ¬¡è¿­ä»£:1ã€åˆå§‹:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;(next()æ²¡æœ‰ä¸‹ä¸€ä¸ªæ—¶ï¼Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„op)op2.4:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;2ã€composeç®—æ³•å:op1:&#123; opcode: &apos;&apos;, chars: 0, lines: 0, attribs: &apos;&apos; &#125;op2:&#123; opcode: &apos;&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;opOut:&#123; opcode: &apos;+&apos;, chars: 2, lines: 0, attribs: &apos;&apos; &#125;assem : &quot;|2=m=b&quot;, minusAssem : &quot;-1-1&quot;, plusAssem : &quot;+2+3+2&quot;è¯´æ˜:op2+ï¼Œcomposeä¹‹åop1,op1,op2éƒ½æ²¡æœ‰opcode,ä¹Ÿæ²¡æœ‰next()äº†,åœæ­¢ å¯¹åº”ç¬¬7æ¬¡è¿­ä»£çš„å…·ä½“ä»£ç :1234// å¦‚æœ op1 æ²¡æœ‰æ“ä½œï¼Œåˆ™ä½¿ç”¨ op2Op.copyOp(csOp, opOut);// æ¸…ç©º op2 æ“ä½œcsOp.clearOpcode(); ç®—æ³•ç»“æœ12345678910111213141516171819202122231 Changeset = require(\"./src/static/js/Changeset\");2 var csA = \"Z:z&gt;4|2=m=b-1+2+3$abcde\";3 var csB = \"Z:13&gt;1|2=m=g-1+2$fg\";45 var doc1 = \"Hello World\\n\\n Hello World Hello Wor\";6 var doc2 = \"Hello World\\n\\n Hello World Hello Wabcder\";78 var appliedA = Changeset.applyToText(csA,doc1);9 console.log('apply csA:', appliedA);10 console.log('');11 console.log('appliedA==doc2:', appliedA==doc2);1213 console.log('');14 var appliedB = Changeset.applyToText(csB,doc2);1516 console.log('apply csB:', appliedB);17 console.log('');1819 var cs = Changeset.compose(csA,csB,false,null);20 var applied = Changeset.applyToText(cs,doc1);2122 console.log('final doc:', applied);23 1234567891011121314apply csA: Hello World Hello World Hello WabcderappliedA==doc2: trueapply csB: Hello World Hello World Hello Wabcdefgfinal doc: Hello World Hello World Hello Wabcdefg 123456789&gt; var cs1 = \"Z:z&gt;4|2=m=b-1+2+3$abcde\";&gt; var cs2 = \"Z:13&gt;1|2=m=g-1+2$fg\";&gt; Changeset.compose(cs1,cs2,false,null);'Z:z&gt;5|2=m=b-2+7$abcdefg'æœ€ç»ˆçš„CS:'Z:z&gt;5|2=m=b-2+7$abcdefg' ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"Hackpad æŠ€æœ¯åˆ†æ","slug":"hackpadæŠ€æœ¯åˆ†æ","date":"2018-05-20T05:58:53.000Z","updated":"2018-08-24T07:44:37.190Z","comments":true,"path":"hackpadæŠ€æœ¯åˆ†æ.html","link":"","permalink":"http://xiaoqinghua.site/hackpadæŠ€æœ¯åˆ†æ.html","excerpt":"","text":"hackpad æŠ€æœ¯åˆ†æå‰è¨€ 1ã€hackpad æ˜¯åŸºäº etherpad äºŒæ¬¡å¼€å‘ï¼Œå¢åŠ äº†å¾ˆå¤šäº§å“åŒ–çš„åŠŸèƒ½ï¼Œå¦‚\bè´¦æˆ·ç³»ç»Ÿï¼Œæ–‡æ¡£æƒé™ç­‰ã€‚\bè…¾è®¯æ–‡æ¡£ä¹Ÿæ˜¯åŸºäº hackpad å¼€å‘ï¼Œ\bè…¾è®¯æ–‡æ¡£çš„è¡¨æ ¼åˆ™æ˜¯åŸºäºå¼€æºé¡¹ç›® hansontable ä½œä¸ºå‰ç«¯è½½ä½“ï¼Œåœ¨åä½œç®—æ³•ä¸Šå¯¹ easysync è¿›è¡Œäº†ç•¥å¾®çš„ä¿®æ”¹ã€‚ 2ã€hackpad åŒæ ·æ˜¯åŸºäº client + serveræ¨¡å¼å¼€å‘ï¼Œé€šè®¯åè®®å¤§ä½“ç›¸åŒï¼Œåšäº†å°å¹…ä¿®æ”¹ï¼ŒOTç®—æ³•\béƒ½æ˜¯ä½¿ç”¨easysyncï¼Œ\bå®¢æˆ·ç«¯æœåŠ¡ç«¯æµç¨‹å¯ä»¥å‚è€ƒ etherpad æŠ€æœ¯åˆ†æã€‚ 3ã€hackpad é¡¹ç›®æ˜¯ç”± scala + java + js çš„ç»„åˆï¼Œhackpadä½¿ç”¨äº†Jettyåœ¨scalaä¸Šæ­å»ºçš„Websocket Server (åœ¨infrastructureç›®å½•ä¸‹çš„main.scalaä¸­å®Œæˆ) å®ç°é€šè®¯ï¼ŒåŒæ—¶ä¹Ÿä½¿ç”¨äº†etherpadä½¿ç”¨çš„å¼€æº SocketIO åº“ï¼Œæ¥å®ŒæˆåŸºäºåŒå‘é€šä¿¡çš„å®æ—¶ååŒã€‚ 4ã€ä»¥ä¸‹æŠ€æœ¯è°ƒç ”\bæ˜¯åœ¨etherpadçš„è°ƒç ”åŸºç¡€ä¸‹å¯¹hackpadè¡¨æ ¼ï¼Œå›¾ç‰‡ï¼Œåè®®ç­‰æ–¹é¢çš„æ¢³ç†ã€‚ 1ã€è¡Œ &amp; è¡¨æ ¼æ¢è¡Œæ“ä½œhackpadå…‰æ ‡æ¯ä¸€æ¬¡æ¢è¡Œï¼Œå®¢æˆ·ç«¯éƒ½ä¼šå‘é€ CLIENT_MESSAGE ï¼Œå…¶ä¸­è´Ÿè½½&quot;type&quot;:&quot;caret&quot;ï¼ŒchangeBy\bä»£è¡¨ä½œè€…ï¼Œå¦‚å›¾ï¼š ä¸Šè¿°åè®®ç›¸å½“äºå®šä½çš„ä½œç”¨ï¼Œç»“åˆå·¦ä¾§çš„ç”¨æˆ·å®æ—¶è¡Œå®šä½\båŠŸèƒ½å¦‚ä¸‹å›¾ï¼š ç»¼ä¸Šï¼šæ ‡é¢˜ &quot;caret&quot;:0, æ­£æ–‡çš„ç¬¬ä¸€è¡Œ &quot;caret&quot;:1 ,æ­£æ–‡çš„ç¬¬nè¡Œ &quot;caret&quot;:n ä¾‹: åœ¨æ ‡é¢˜è¡Œæ’å…¥ä¸€ä¸ª aï¼Œå®¢æˆ·ç«¯ä¼šåŒæ—¶å‘é€ä¸¤æ¡åè®®æ•°æ® 1ã€CLIENT_MESSAGE \bè´Ÿè½½ caret ä½ç½®ä¿¡æ¯ 1234567891011&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"CLIENT_MESSAGE\", \"payload\": &#123; \"type\": \"caret\", \"caret\": 0, \"changedBy\": \"p.1\" &#125; &#125;&#125; 2ã€USER_CHANGESï¼Œæ•°æ®ç»“æ„è¾ƒäº etherpad æ²¡æœ‰å˜åŒ– 1234567891011121314151617&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 59, \"changeset\": \"Z:1&gt;1*0+1$a\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"author\", \"p.1\" ] &#125;, \"nextNum\": 1 &#125; &#125;&#125; æ’å…¥è¡¨æ ¼ åœ¨æ­£æ–‡ç¬¬ä¸€è¡Œæ’å…¥ä¸€ä¸ªè¡¨æ ¼(table)ï¼Œå®¢æˆ·ç«¯ä¼šåŒæ—¶å‘é€ä¸‰æ¡åè®®æ•°æ® 1ã€CLIENT_MESSAGE \bè´Ÿè½½ caret ä½ç½®ä¿¡æ¯ æ’å…¥ä¹‹å‰ï¼Œå…‰æ ‡ä½ç½® 1234567891011&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"CLIENT_MESSAGE\", \"payload\": &#123; \"type\": \"caret\", \"caret\": 1, \"changedBy\": \"p.1\" &#125; &#125;&#125; æ’å…¥ä¹‹åï¼Œå…‰æ ‡ä½ç½® 1234567891011&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"CLIENT_MESSAGE\", \"payload\": &#123; \"type\": \"caret\", \"caret\": 3, \"changedBy\": \"p.1\" &#125; &#125;&#125; 2ã€USER_CHANGES 123456789101112131415161718192021&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 61, \"changeset\": \"Z:3&gt;3|1=2*0|1+1*0*1+1*0|1+1$\\n*\\n\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"author\", \"p.1\" ], \"1\": [ \"table\", \"123\" ] &#125;, \"nextNum\": 2 &#125; &#125;&#125; æ ¹æ®changesetè§„èŒƒè§£æä¸Šè¿°é€šä¿¡åè®®æ•°æ® 123pack the changeset `Z:3&gt;3|1=2*0|1+1*0*1+1*0|1+1$\\n*\\n`&#123; oldLen: 3,newLen: 6,ops: '|1=2*0|1+1*0*1+1*0|1+1',charBank: '\\n*\\n' &#125; operator:12345678910&#123; opcode: '=', chars: 2, lines: 1, attribs: '' &#125;æ’å…¥ä¸€ä¸ªç©ºè¡Œ \\n&#123; opcode: '+', chars: 1, lines: 1, attribs: '*0' &#125;æ’å…¥ä¸€ä¸ªè¡¨æ ¼ * (*ä»£è¡¨è¡¨æ ¼ï¼Œå›¾ç‰‡ï¼ŒåµŒå…¥çš„æ–‡ä»¶)(img/embed/table)&#123; opcode: '+', chars: 1, lines: 0, attribs: '*0*1' &#125;æ’å…¥ä¸€ä¸ªç©ºè¡Œ \\n&#123; opcode: '+', chars: 1, lines: 1, attribs: '*0' &#125; æ’å…¥è¡¨æ ¼ä»£ç ï¼š 123456789101112131415161718var rep = ace.getRep();// don't insert tables in title linevar selStart = [rep.selStart[0], rep.selStart[1]];var selEnd = [rep.selEnd[0], rep.selEnd[1]];if (selStart[0] == 0) &#123; selStart = [1, 0]; selEnd = [1, 0]; // make sure the table is on its own line, // (and not the title line) ace.replaceRange(selStart, selStart, '\\n\\n', []);&#125; else &#123; // make sure the table is on its own line, // (and not the title line) ace.replaceRange(selStart, selEnd, '\\n\\n', []); selStart = [selStart[0] + 1, 0];&#125;ace.replaceRange(selStart, selStart, '*', [['table', '123']]);padeditor.ace.focus(); 12345678910111213141516/** * Replace a range of text with new text. * @param &#123;Array.&lt;number&gt;&#125; start The line/column of the range start. * @param &#123;Array.&lt;number&gt;&#125; end The line/column of the range end. * @param &#123;string&#125; text The new text. * @param &#123;Array&#125; attribs The new attributes for this text. * @param &#123;boolean&#125; insertsAfterSelection The new text goes after the range. */self.replaceRange = function(start, end, text, attribs, insertsAfterSelection) &#123; self.inCallStackIfNecessary('replaceRange', function() &#123; self.fastIncorp(); self.performDocumentReplaceRange(start, end, text, attribs, insertsAfterSelection); &#125;);&#125; ç¼–è¾‘è¡¨æ ¼æ•°æ® åœ¨è¡¨æ ¼çš„ç¬¬ä¸€ä¸ªæ ¼å­åæ ‡(0:0)ä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦b 1234567891011121314151617&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 67, \"changeset\": \"Z:7&gt;0|2=3*0=1$\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"0:0\", \"b\" ] &#125;, \"nextNum\": 1 &#125; &#125;&#125; åœ¨è¡¨æ ¼çš„ç¬¬ä¸€ä¸ªæ ¼å­åæ ‡(0:0)ä½ç½®è¿½åŠ ä¸€ä¸ªå­—ç¬¦c 1234567891011121314151617&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 68, \"changeset\": \"Z:7&gt;0|2=3*0=1$\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"0:0\", \"bc\" ] &#125;, \"nextNum\": 1 &#125; &#125;&#125; åœ¨è¡¨æ ¼çš„ç¬¬ä¸€ä¸ªæ ¼å­åæ ‡(0:1)ä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦d 1234567891011121314151617&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 69, \"changeset\": \"Z:7&gt;0|2=3*0=1$\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"0:1\", \"d\" ] &#125;, \"nextNum\": 1 &#125; &#125;&#125; åœ¨è¡¨æ ¼çš„ç¬¬ä¸€ä¸ªæ ¼å­åæ ‡(1:0)ä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦e 1234567891011121314151617&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 70, \"changeset\": \"Z:7&gt;0|2=3*0=1$\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"1:0\", \"e\" ] &#125;, \"nextNum\": 1 &#125; &#125;&#125; ç»¼ä¸Šï¼š æ’å…¥ä¸€ä¸ªè¡¨æ ¼ï¼Œä¼šç›´æ¥åœ¨apool å¢åŠ ä¸€ä¸ª[&#39;table&#39;, &#39;123&#39;]å±æ€§ è¡¨æ ¼æœ‰ä½ç½®åæ ‡ | (0,0) | (0,1) | | â€” | â€” | | (1,0) | (1,1) | | (2,0) | (2,1) | æ›¿æ¢æ¯ä¸ªåæ ‡é‡Œçš„å€¼ï¼Œä¼šåœ¨apoolä¸­æ–°ç”Ÿæˆä¸€ä¸ª[&quot;1:0&quot;, &quot;abc&quot;] å¾€æ¯ä¸ªåæ ‡é‡Œè¿½åŠ å€¼ï¼Œä¼šåœ¨apoolä¸­æ›¿æ¢å·²ç”Ÿæˆçš„åæ ‡ä½ç½®ä¸€æ ·çš„æ–°å€¼[&quot;1:0&quot;, &quot;123&quot;] è¡¨æ ¼é‡Œçš„å­—ç¬¦æ˜¯ä¸èƒ½ä½¿ç”¨åŠ ç²—ï¼Œä¸‹åˆ’çº¿ï¼Œç­‰\bé™„åŠ å±æ€§çš„ï¼Œè¿™ä¸ªåŠŸèƒ½è¿˜æœ‰å¾…å¼€å‘ï¼ˆ\bå¦‚æœåŸºäºhackpadç°æœ‰çš„è¡¨æ ¼è®¾è®¡ï¼Œä½¿ç”¨apoolä¸­çš„å±æ€§ï¼Œå·²ç»å¾ˆéš¾å†è®¾è®¡å‡ºé™„åŠ å±æ€§çš„æ·»åŠ ï¼ŒçŒœæµ‹è…¾è®¯æ–‡æ¡£åº”è¯¥æ˜¯åšäº†å…¶ä»–çš„ä¼˜åŒ–ï¼‰ ä¸Šè¿°è¿™äº›\bå¢åŠ ï¼Œè¿½åŠ çš„æ–¹å¼ç¼–è¾‘è¡¨æ ¼æ•°æ®ï¼Œé€šè¿‡å¯¹å±æ€§apoolçš„æ“ä½œï¼Œ\b\bç„¶åæ ¹æ® Changeset.applyToText(cs,str)æ–¹æ³•ï¼Œä»è€Œä¸éœ€è¦\bæŠŠè¡¨æ ¼é‚£ä¸€ä¸ªrangeçš„ text(æ–‡æœ¬æ•°æ®)è¿›è¡ŒOTç®—æ³•å®ç°å°±å¯ä»¥å®ç°æ–‡æ¡£ä¸­è¡¨æ ¼æ•°æ®çš„ååŒç¼–è¾‘\bã€‚ 2ã€å›¾ç‰‡ç›´æ¥\b copy å›¾ç‰‡ url123456789101112131415161718192021&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 8, \"changeset\": \"Z:s&gt;15|4=q*0*1+1*0|1+1*0+13$*\\nhttps://p.upyun.com/docs/cloud/demo.jpg\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"author\", \"p.1\" ], \"1\": [ \"img\", \"https://p.upyun.com/docs/cloud/demo.jpg\" ] &#125;, \"nextNum\": 2 &#125; &#125;&#125; ç›´æ¥ copy å›¾ç‰‡ url, æ˜¯ç›´æ¥åœ¨charbank:{*\\nurl}\b ,*è¡¨ç¤ºå›¾ç‰‡ï¼Œ\\nè¡¨ç¤ºæ¢ä¸€è¡Œï¼Œurlè¡¨ç¤ºå›¾ç‰‡é“¾æ¥,å’Œ etherpad ä¸åŒåœ¨äº*è¡¨ç¤ºå›¾ç‰‡ã€‚ å’Œæ’å…¥è¡¨æ ¼ä¸€æ ·ï¼Œéƒ½ä¼šåœ¨\bapoolé‡Œæ–°å¢å±æ€§&quot;1&quot;:[&quot;img&quot;,&quot;https://p.upyun.com/docs/cloud/demo.jpg&quot;] ä¸Šä¼ æœ¬åœ°å›¾ç‰‡ hackpad å›¾ç‰‡å­˜å‚¨ä½¿ç”¨ AWS çš„ S3 å­˜å‚¨æœåŠ¡ 12345678910111213141516171819202122232425&#123; \"type\": \"COLLABROOM\", \"data\": &#123; \"type\": \"USER_CHANGES\", \"baseRev\": 37, \"changeset\": \"Z:f&gt;1|4=e*0*1*2+1$*\", \"apool\": &#123; \"numToAttrib\": &#123; \"0\": [ \"attachmentPlaceholder\", \"attachment-1531119782428\" ], \"1\": [ \"author\", \"p.1\" ], \"2\": [ \"img\", \"/static/img/pixel.gif\" ] &#125;, \"nextNum\": 3 &#125; &#125;&#125; 1234567891011awsUser = __aws_key_id__awsPass = __aws_secret__s3Bucket = __aws_attachments_bucket__s3Region = us-east-1ç›¸å…³ä»£ç :editor.performDocumentReplaceRange(start, end, '*', [ ['img', '/static/img/pixel.gif'], ['attachmentPlaceholder', attachmentId]]); ä¸Šä¼ å›¾ç‰‡çš„æ–¹æ³•ï¼š æ„é€ FormDataæ•°æ®ï¼Œä½¿ç”¨ajaxä¸Šä¼ åˆ°S3\b 12345678910111213141516171819202122232425262728$.ajax(&#123; xhr: function() &#123; var xhr = new window.XMLHttpRequest(); xhr.upload.addEventListener(\"progress\", function(evt) &#123; if (evt.lengthComputable) &#123; var progress = evt.loaded / evt.total; editor.callWithAce(function (ace) &#123; setAttachmentUrlProgress(attachmentId, progress); &#125;); &#125; &#125;, false); return xhr; &#125;, url: s3host, data: form, processData: false, contentType: false, type: \"POST\", success: function() &#123; setTimeout(function() &#123; editor.callWithAce(function (ace) &#123; setAttachmentUrl(attachmentId, s3host + path, path); &#125;); observer.trigger('track', ['file-attach', null, null, &#123; success: true, padId: clientVars.padId, userId: clientVars.userId, type: file.type, path: path, size: file.size, uploadSize: shrunk.size &#125;]); &#125;, 500&#125;) 3ã€Aceç¼–è¾‘å™¨ &amp; Changesetå˜æ›´é›† &amp; AttribPoolå±æ€§æ± hackpad çš„é¡¹ç›®ç»“æ„ï¼š hackpad bin æ„å»ºé¡¹ç›®å’Œå¯åŠ¨é¡¹ç›®çš„å‘½ä»¤ contrib cron åŒ…å«ä¸€ä¸ªæ¸…ç†çš„å®šæ—¶ä»»åŠ¡ glue åŒ…å«ä¸€äº› python è„šæœ¬ runit åŒ…å«è®¾ç½®å®¹å™¨çš„ä¸€äº›è„šæœ¬ scripts è®¾ç½®æ•°æ®åº“å’ŒæœåŠ¡çš„ä¸€äº›è„šæœ¬ testing æµ‹è¯•\bç›®å½• etherpad bin åœ¨æœ¬åœ°å¯åŠ¨é¡¹ç›®çš„å‘½ä»¤ data æœ¬åœ°çš„æ•°æ®ï¼ŒåŒ…å«æ—¥å¿—å’Œ solr å…¨æ–‡æœç´¢æœåŠ¡å™¨ etc ä¸€äº›\bé…ç½®æ–‡ä»¶ solr solr å…¨æ–‡æœç´¢æœåŠ¡å™¨ src etherpad etherpad\b äº§å“åŠŸèƒ½ä»£ç  locals \bè¯­è¨€è®¾ç½® static etherpad é™æ€ä»£ç \båŒ…å« ace ç¼–è¾‘å™¨ easy_sync ç®—æ³•ç­‰\b themes \bä¸»é¢˜æ–‡ä»¶ .ejs æ¨¡æ¿ appjet-eth-dev.jar ç¼–è¯‘ infrastructure ç›®å½•ä¸‹çš„.scala æ–‡ä»¶ç”Ÿæˆçš„é¡¹ç›® infrastructure Scala \bç›®å½•ï¼Œç›®å‰ä¸æ˜¯å¤ªæ‡‚ lib åŒ…å«ä¸€ä¸ªæ•°æ®åº“è¿æ¥ä»¶ 1ã€ace ç¼–è¾‘å™¨ ç›¸å¯¹äº\betherpadï¼Œaceç¼–è¾‘å™¨\båŠŸèƒ½æ²¡æœ‰å¤ªå¤§çš„å˜åŒ–ï¼Œæ•´ä¸ªaceç›®å½•ç»“æ„åˆ†ç¦»ï¼ŒåŒæ—¶å¢åŠ äº†ace_tableè¡¨æ ¼ï¼Œace_media\b\bï¼Œace_caretç­‰æŠ½è±¡æ¨¡å—ã€‚ 2ã€Changeset å˜æ›´é›† ç›¸å¯¹äº\betherpadï¼Œchangeset\båŠŸèƒ½æ²¡æœ‰å˜åŒ–ï¼Œå³ä¾¿æ˜¯åŠ äº†tableï¼Œimageè¿˜æ˜¯å’Œetherpadçš„ç›¸åŒã€‚ hackpadçš„changesetç»“æ„ä¸Šåšäº†åˆ†ç¦»ã€‚æŠ½ç¦»æˆeasysync1.jsï¼Œeasysync2.jsã€‚ easysync1.jsåŒ…å«changesetè‡ªèº«çš„ä¸€äº›æ–¹æ³•ï¼ŒåŒ…æ‹¬Changeset.decodeFromStringï¼ŒChangeset.numberArrayToStringç­‰ã€‚ easysync2.jsåŒ…å«changesetçš„OTåŠŸèƒ½ä¸Šçš„ä¸€äº›æ–¹æ³•ï¼ŒåŒ…æ‹¬Changeset.followï¼ŒChangeset.composeç­‰ã€‚ 3ã€AttribPool å±æ€§æ±  ç›¸å¯¹äº\betherpadï¼ŒAttribPool\båˆ™æ²¡æœ‰æ”¹å˜ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"OT","slug":"Code/OT","permalink":"http://xiaoqinghua.site/categories/Code/OT/"}],"tags":[{"name":"OT","slug":"OT","permalink":"http://xiaoqinghua.site/tags/OT/"}]},{"title":"äº‘æ–‡æ¡£çš„éš¾ç‚¹","slug":"äº‘æ–‡æ¡£çš„éš¾ç‚¹","date":"2018-04-05T06:50:30.000Z","updated":"2018-08-05T06:57:09.278Z","comments":true,"path":"äº‘æ–‡æ¡£çš„éš¾ç‚¹.html","link":"","permalink":"http://xiaoqinghua.site/äº‘æ–‡æ¡£çš„éš¾ç‚¹.html","excerpt":"","text":"1. å¤šäººåä½œï¼Œå®æ—¶åŒæ­¥åœ¨äº‘æ–‡æ¡£ä¸ŠåŒæ—¶ç¼–å†™çš„å®¢æˆ·å¯èƒ½ä¼šéå¸¸å¤šï¼Œå¦‚æœä¸€ä¸ªæˆå‘˜æ›´æ–°äº†åˆ«çš„æˆå‘˜æ— æ³•åŠæ—¶çœ‹åˆ°ï¼Œæˆ–è€…å‡ ä¸ªæˆå‘˜æ— æ³•åŒæ—¶æ›´æ–°ï¼Œé‚£å°±ä¸å¯èƒ½å®ç°å›¢é˜Ÿåä½œï¼Œç”šè‡³ä¼šå‡ºç°ä¸šåŠ¡é”™è¯¯é£é™©ã€‚åœ¨çŸ³å¢¨æ–‡æ¡£ä¸Šï¼Œç”¨æˆ·è¾“å…¥çš„æ¯ä¸€ä¸ªæ–‡å­—éƒ½éœ€è¦åœ¨æ¯«ç§’çº§å°ºåº¦å†…å®æ—¶è®¡ç®—ï¼Œå¹¶ä¼ ç»™åŒä¸€ä¸ªæ–‡æ¡£çš„å…¶ä»–åä½œè€…ã€‚ä¸ºæ­¤ï¼ŒçŸ³å¢¨æ–‡æ¡£å¼•ç”¨äº† NATS æ•°æ®ç®¡é“ï¼Œå¯¹è¿›å…¥æœåŠ¡å™¨çš„æ‰€æœ‰æµé‡è¿›è¡Œå‰Šå³°å¡«è°·çš„å¤„ç†ã€‚åœ¨æ•°æ®é«˜å³°æœŸå¼•å…¥æœåŠ¡å™¨çš„æ•°æ®è¿›è¡Œå»¶æ—¶å¤„ç†ï¼Œç­‰å¾…ç©ºé—²æ—¶é—´å†è®¡ç®—ï¼Œä»è€Œä½¿æœåŠ¡å™¨å¯ä»¥å¹³ç¨³è¿è¡Œã€‚åŒæ—¶åŸºäºæ­¤ï¼Œè¿˜å®ç°äº†æ ¹æ®æ•°æ®æµé‡å¯¹åç«¯æœåŠ¡å™¨è‡ªåŠ¨æ‰©å®¹ï¼Œå½“æ•°æ®é‡çªç„¶å¢å¤§æ—¶ï¼Œè‡ªåŠ¨å¢åŠ æœåŠ¡å™¨ï¼Œæé«˜æ•´ä¸ªç³»ç»Ÿè´Ÿè½½èƒ½åŠ›ã€‚ 2.å¤šå®¢æˆ·ç«¯å®æ—¶åŒæ­¥ äº’è”ç½‘æ—¶ä»£ï¼Œå„ç§ç»ˆç«¯å±‚å‡ºä¸ç©·ï¼Œæ¯ä¸ªäººæ—¥å¸¸ä¸­è‡³å°‘ä¼šä½¿ç”¨ä¸¤ç§è®¾å¤‡ï¼Œæ‰‹æœºå’Œç”µè„‘ï¼Œå¦‚æœä¸€ä¸ªäººåŒæ—¶åœ¨æ‰‹æœºå’Œç”µè„‘ä¸Šç¼–è¾‘åŒä¸€ä»½ç¬”è®°ï¼Œå‡ºç°å†²çªæ—¶ï¼Œå¾ˆå¤šç¬”è®°ç±»åº”ç”¨ä¼šä¸ºæ¯ä¸€ä¸ªå†²çªåˆ›å»ºç‹¬ç«‹çš„å‰¯æœ¬ï¼Œéœ€è¦ç”¨æˆ·æ‰‹å·¥åˆå¹¶ï¼Œä½¿å¾—ç”¨æˆ·ä½¿ç”¨ç¬”è®°ä¾¿åˆ©æ€§å¤§å¤§ä¸‹é™ï¼› ä¸ºäº†æ”¯æŒå®æ—¶åä½œï¼ŒçŸ³å¢¨æ–‡æ¡£æŠ€æœ¯å›¢é˜Ÿå¯¹ç®—æ³•è¿›è¡Œäº†æ”¹è¿›ï¼Œè¿™ä¸ªç®—æ³•å¯ä»¥è§£å†³ä¸€æ®µæ–‡å­—ï¼Œå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶ä¿®æ”¹å¼•èµ·çš„å†²çªåˆå¹¶é—®é¢˜ã€‚å¦å¤–åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå·²ç»é€‚é…äº† 50 ç§ä¸åŒçš„æœºå™¨å’Œæµè§ˆå™¨ã€‚ 3.ç¦»çº¿ç¼–è¾‘ï¼Œé¿å…å†²çªç¦»çº¿ç¼–è¾‘ï¼Œç”¨æˆ·åŒæ­¥è¿‡æ¥çš„æ•°æ®å¾€å¾€æ˜¯ä»–å‡ ä¸ªå°æ—¶ç¼–å†™çš„æˆæœï¼Œæ­¤æ—¶ï¼Œè¿™ä¸ªç‰ˆæœ¬æˆ–å·²ç»ä¸æœåŠ¡å™¨çš„ç‰ˆæœ¬ç›¸å·®ç”šè¿œäº†ï¼ŒæŒ‰ç€æ­¤å‰æ–¹æ³•ï¼Œå¦‚ä½•è§£å†³æ–‡æ¡£å†²çªæ˜¯ä¸ªé—®é¢˜ã€‚ å¯¹æ­¤ï¼ŒçŸ³å¢¨æ–‡æ¡£å°½å¯èƒ½å¤šåœ°è®°å½•ç”¨æˆ·ç¼–è¾‘è¿‡ç¨‹ä¸­çš„æ¯ä¸€æ­¥æ“ä½œï¼Œç„¶ååˆ©ç”¨å„ç”¨æˆ·ç«¯çš„å†å²æ“ä½œä¿¡æ¯æŒ¨ä¸ªé‡æ”¾ï¼Œä»è€Œè¿˜åŸç”¨æˆ·ç¼–è¾‘çš„æœ¬æ„ã€‚æ¯”å¦‚ï¼Œå¯¹äºâ€œä»Šå¤©å¤©æ°”å¾ˆå¥½â€ï¼Œç¬¬ä¸€ä¸ªäººå¯èƒ½ä¼šåˆ é™¤ä¸­é—´çš„â€œå¤©æ°”â€ä¸¤å­—ï¼Œå˜æˆâ€œä»Šå¤©å¾ˆå¥½â€ï¼›è€Œå¦å¤–ä¸€ä¸ªäººå¯èƒ½ä¼šåŠ ä¸Šä¸€ä¸ªâ€œçœŸâ€å­—ï¼Œå˜æˆâ€œä»Šå¤©å¤©æ°”çœŸçš„å¾ˆå¥½â€ï¼ŒæŒ‰ç€çŸ³å¢¨æ–‡æ¡£çš„åŸºäºè¿˜åŸç”¨æˆ·æ„å›¾çš„ç®—æ³•ï¼Œæœ€ååˆå¹¶çš„ç»“æœåˆ™æ˜¯â€œä»Šå¤©çœŸçš„å¾ˆå¥½â€ï¼Œæ—¢æ»¡è¶³åˆ é™¤â€œå¤©æ°”â€ï¼Œåˆæ»¡è¶³å¢åŠ â€œçœŸâ€çš„åŒæ–¹æ„å›¾ã€‚å½“ç„¶ï¼Œè¿™ç§åˆå¹¶æ–¹æ³•ä¹Ÿå¹¶éç™¾åˆ†ç™¾å®Œç¾ï¼Œä½†æå­éª…è¡¨ç¤ºè¿™æ˜¯æœ€é€‚åˆç›®å‰ç¼–å†™ä½“éªŒçš„ã€‚","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Cloud-Office","slug":"Code/Cloud-Office","permalink":"http://xiaoqinghua.site/categories/Code/Cloud-Office/"}],"tags":[{"name":"Cloud-Office","slug":"Cloud-Office","permalink":"http://xiaoqinghua.site/tags/Cloud-Office/"}]},{"title":"VIMç»ƒä¹ æ‰‹å†Œ","slug":"VIMç»ƒä¹ æ‰‹å†Œ","date":"2018-02-25T06:42:48.000Z","updated":"2018-08-24T07:45:22.116Z","comments":true,"path":"VIMç»ƒä¹ æ‰‹å†Œ.html","link":"","permalink":"http://xiaoqinghua.site/VIMç»ƒä¹ æ‰‹å†Œ.html","excerpt":"","text":"==VIMå‘½ä»¤==1.ä¸€èˆ¬æ¨¡å¼å¯ç”¨çš„å…‰æ ‡ç§»åŠ¨ã€å¤åˆ¶ç²˜è´´ã€æœç´¢æ›¿æ¢ç­‰ ç§»åŠ¨å…‰æ ‡çš„æ–¹æ³• 1234567Ctrl+f å‘ä¸‹ç§»åŠ¨ä¸€é¡µCtrl+b å‘ä¸Šç§»åŠ¨ä¸€é¡µ0 ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€å‰é¢çš„å­—ç¬¦å¤„$ ç§»åŠ¨åˆ°è¿™ä¸€è¡Œçš„æœ€åé¢çš„å­—ç¬¦å¤„G ç§»åŠ¨åˆ°æ–‡æœ¬çš„æœ€åä¸€è¡Œgg ç§»åŠ¨åˆ°æ–‡æœ¬çš„ç¬¬ä¸€è¡Œï¼Œç›¸å½“äº1Gn&lt;Enter&gt; nä¸ºæ•°å­—ã€‚å…‰æ ‡å‘ä¸‹ç§»åŠ¨nè¡Œ æœç´¢æ›¿æ¢ 12345/word å‘å…‰æ ‡ä¹‹ä¸‹æŸ¥è¯¢â€œwordâ€çš„å­—ç¬¦ä¸²n æŸ¥æ‰¾åˆ°â€œwordâ€ä¹‹å,å…‰æ ‡å®šä½åˆ°ä¸‹ä¸€ä¸ªâ€œwordâ€N ä¸nç›¸å,å®šä½åˆ°ä¸Šä¸€ä¸ª:n1,n2s/word1/word2/g åœ¨n1è¡Œä¸n2è¡Œä¹‹é—´æŸ¥è¯¢â€œword1â€,å¹¶æ›¿æ¢æˆâ€œword2â€:n1,$s/word1/word2/gc åœ¨n1è¡Œä¸æ–‡æœ¬æœ€åä¸€è¡Œä¹‹é—´æŸ¥è¯¢â€œword1â€,å¹¶æ›¿æ¢æˆâ€œword2â€,å¹¶æç¤ºç”¨æˆ· åˆ é™¤ã€å¤åˆ¶ã€ç²˜è´´ 1234567891011121314x(å°å†™) ç›¸å½“äº[del]é”®X(å¤§å†™) ç›¸å½“äº[backspace]é”®dd åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œndd åˆ é™¤å…‰æ ‡æ‰€åœ¨çš„è¡Œä¸‹nè¡Œyy å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„é‚£ä¸€è¡Œnyy å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„è¡Œä¸‹nè¡Œp(å°å†™) å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åœ¨å…‰æ ‡ä¸‹ä¸€è¡ŒP(å¤§å†™) å°†å¤åˆ¶çš„å†…å®¹ç²˜è´´åœ¨å…‰æ ‡ä¸Šä¸€è¡ŒJ(å¤§å†™) å°†å½“å‰å…‰æ ‡è¡Œä¸ä¸‹ä¸€è¡Œï¼Œæ‹¼æˆä¸€è¡Œu æ¢å¤Crtl+r é‡åš. é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤æ³¨æ„: dd,yy éƒ½å¯ä»¥ä¸â€œ0â€,â€œ$â€,â€œGâ€é…åˆä½¿ç”¨ ä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°ç¼–è¾‘æ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜12345678i åœ¨å½“å‰å…‰æ ‡å¤„å¼€å§‹è¾“å…¥I åœ¨å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å¤„å¼€å§‹è¾“å…¥a åœ¨å½“å‰å…‰æ ‡çš„ä¸‹ä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥A åœ¨å½“å‰è¡Œçš„æœ€åä¸€ä¸ªå­—ç¬¦å¤„å¼€å§‹è¾“å…¥o åœ¨å½“å‰è¡Œçš„ä¸‹ä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡ŒO åœ¨å½“å‰è¡Œçš„ä¸Šä¸€è¡Œå¤„è¾“å…¥æ–°çš„ä¸€è¡Œr å–ä»£æ¨¡å¼ï¼Œåªä¼šå–ä»£å…‰æ ‡æ‰€åœ¨å­—ç¬¦ä¸€æ¬¡R å–ä»£æ¨¡å¼ï¼Œä¼šä¸€ç›´å–ä»£å…‰æ ‡æ‰€åœ¨çš„æ–‡å­—ï¼Œç›´åˆ°æŒ‰ä¸‹ESCé”® ä¸€èˆ¬æ¨¡å¼åˆ‡æ¢åˆ°å‘½ä»¤è¡Œæ¨¡å¼çš„å¯ç”¨çš„æŒ‰é’®è¯´æ˜123:w ä¿å­˜ï¼Œé€€å‡º:q ä»…ä»…æ˜¯é€€å‡ºviç¼–è¾‘å™¨ï¼Œå¦‚æœæ²¡æœ‰ä¿®æ”¹ç›´æ¥é€€å‡ºï¼Œå¦‚æœæœ‰ä¿®æ”¹ä¼šæç¤ºï¼Œå¯ä»¥ä½¿ç”¨:q!ä¸å­˜å‚¨ä¿®æ”¹éƒ¨åˆ†ï¼Œå¼ºåˆ¶é€€å‡º:wq å­˜å‚¨åé€€å‡º ç‰›é€¼çš„æŠ€å·§ å•è¯ç§»åŠ¨ 1234567W w ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´E e ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå•è¯ç»“å°¾B b å€’é€€åˆ°ä¸Šä¸€ä¸ªå•è¯å¼€å¤´- Eä¼šå¿½ç•¥æ ‡ç‚¹ç¬¦å·ï¼Œå¦‚ï¼šIâ€˜mï¼Œeä¼šå½“æˆä¸¤ä¸ªå•è¯ï¼ŒEåˆ™ä¸ä¼š- 2wï¼Œè¡¨ç¤ºå¾€ä¸‹ç§»åŠ¨2ä¸ªå•è¯- ä¸€èˆ¬ç”¨å°å†™çš„å°±å¯ä»¥äº† æ•´è¡Œç§»åŠ¨ 12340 ç§»åŠ¨åˆ°è¡Œé¦–$ ç§»åŠ¨åˆ°è¡Œæœ«+ ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œå¼€å¤´- ç§»åŠ¨åˆ°ä¸Šä¸€è¡Œå¼€å¤´ æ»šå± 1234567Ctrl+f å¾€å‰æ»šåŠ¨ä¸€æ•´å±Ctrl+b å¾€åæ»šåŠ¨ä¸€æ•´å±Ctrl+d å¾€å‰æ»šåŠ¨åŠå±Ctrl+u å¾€åæ»šåŠ¨åŠå±Ctrl+e å¾€åæ»šåŠ¨ä¸€è¡Œ Ctrl+y å¾€å‰æ»šåŠ¨ä¸€è¡Œ ç”¨zè°ƒæ•´å…‰æ ‡ 123z&lt;Enter&gt; å°†å…‰æ ‡æ‰€åœ¨è¡Œç§»åŠ¨åˆ°å±å¹•é¡¶ç«¯z. å°†å…‰æ ‡æ‰€åœ¨è¡Œç§»åŠ¨åˆ°å±å¹•ä¸­é—´z- å°†å…‰æ ‡æ‰€åœ¨è¡Œç§»åŠ¨åˆ°å±å¹•ä½ç«¯ åœ¨å±å¹•ä¸­ç§»åŠ¨ 123456H ç§»åŠ¨åˆ°å±å¹•é¡¶ç«¯çš„è¡ŒM ç§»åŠ¨åˆ°å±å¹•ä¸­å¤®çš„è¡ŒL ç§»åŠ¨åˆ°å±å¹•åº•ç«¯çš„è¡ŒnH ç§»åŠ¨åˆ°å±å¹•é¡¶ç«¯å¾€ä¸‹çš„ç¬¬nè¡ŒnL ç§»åŠ¨åˆ°å±å¹•é¡¶ç«¯å¾€ä¸Šçš„ç¬¬nè¡Œ å•è¯åˆ é™¤ 12345dw åˆ é™¤åˆ°ä¸‹ä¸€ä¸ªå•è¯å¼€å¤´de åˆ é™¤åˆ°æœ¬å•è¯æœ«å°¾dE åˆ é™¤åˆ°æœ¬å•è¯æœ«å°¾åŒ…æ‹¬æ ‡ç‚¹åœ¨å†…db åˆ é™¤åˆ°å‰ä¸€ä¸ªå•è¯dB åˆ é™¤åˆ°å‰ä¸€ä¸ªå•è¯åŒ…æ‹¬æ ‡ç‚¹åœ¨å†… å•è¯ä¿®æ”¹ 12cw ä»å…‰æ ‡å¤„ä¿®æ”¹åˆ°å•è¯ç»“å°¾cb ä»å…‰æ ‡å¤„ä¿®æ”¹åˆ°å•è¯å¼€å¤´ è¡Œä¿®æ”¹ 123456c$ ä»å…‰æ ‡ä¿®æ”¹åˆ°æœ¬è¡Œæœ«å°¾C åŠŸèƒ½åŒä¸Šc0 ä»å…‰æ ‡ä¿®æ”¹åˆ°æœ¬è¡Œå¼€å¤´cc åˆ é™¤æ•´è¡Œä»å¤´ä¿®æ”¹S åŠŸèƒ½åŒä¸Šs åˆ é™¤å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦ï¼Œç„¶åæ’å…¥ å•è¯å’Œå­—ç¬¦å¤åˆ¶ 123456ynl å‘å³å¤åˆ¶nä¸ªå­—ç¬¦ynh å‘å·¦å¤åˆ¶nä¸ªå­—ç¬¦ynw å‘å‰å¤åˆ¶nä¸ªå•è¯ynb å‘åå¤åˆ¶nä¸ªå•è¯eï¼ å…¨æ–‡æ¢å¤dt&quot; åˆ é™¤æ‰€æœ‰çš„å†…å®¹ï¼Œç›´åˆ°é‡åˆ°åŒå¼•å·â€”â€” &quot; æœ€å¼ºå…‰æ ‡ç§»åŠ¨ 12% : åŒ¹é…æ‹¬å·ç§»åŠ¨ï¼ŒåŒ…æ‹¬ (, &#123;, [. ï¼ˆé™ˆçš“æ³¨ï¼šä½ éœ€è¦æŠŠå…‰æ ‡å…ˆç§»åˆ°æ‹¬å·ä¸Šï¼‰;* å’Œ #: åŒ¹é…å…‰æ ‡å½“å‰æ‰€åœ¨çš„å•è¯ï¼Œç§»åŠ¨å…‰æ ‡åˆ°ä¸‹ä¸€ä¸ªï¼ˆæˆ–ä¸Šä¸€ä¸ªï¼‰åŒ¹é…å•è¯ï¼ˆ*æ˜¯ä¸‹ä¸€ä¸ªï¼Œ#æ˜¯ä¸Šä¸€ä¸ªï¼‰; ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Vim","slug":"Code/Vim","permalink":"http://xiaoqinghua.site/categories/Code/Vim/"}],"tags":[{"name":"Vim","slug":"Vim","permalink":"http://xiaoqinghua.site/tags/Vim/"}]},{"title":"Javaå¼‚å¸¸æ€»ç»“","slug":"Javaå¼‚å¸¸æ€»ç»“","date":"2017-09-23T14:20:13.000Z","updated":"2018-08-24T15:17:06.291Z","comments":true,"path":"Javaå¼‚å¸¸æ€»ç»“.html","link":"","permalink":"http://xiaoqinghua.site/Javaå¼‚å¸¸æ€»ç»“.html","excerpt":"","text":"å¼‚å¸¸æ¦‚è¿°å¼‚å¸¸å¼‚å¸¸å°±æ˜¯åœ¨ç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­æ‰€å‘ç”Ÿçš„ä¸æ­£å¸¸çš„äº‹ä»¶ï¼Œå®ƒä¼šä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç¨‹åº å¼‚å¸¸å¤„ç†Java ç¼–ç¨‹è¯­è¨€ä½¿ç”¨å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸ºç¨‹åºæä¾›äº†é”™è¯¯å¤„ç†çš„èƒ½åŠ›ï¼Œå¥½å¤„å°±æ˜¯ï¼šå¦‚æœä»£ç ä¸­å­˜åœ¨äº†å¼‚å¸¸ï¼Œä½†æ˜¯è¿›è¡Œäº†æ•è·å¤„ç†ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šç»§ç»­è¿è¡Œä¸‹å»ï¼Œä¸ä¼šå› ä¸ºä¸€ä¸ªå¼‚å¸¸å¯¼è‡´ç¨‹åºä¸­æ–­è¿è¡Œ ğŸŒ°1ï¼šå¦‚æœç¨‹åºå¯èƒ½å­˜åœ¨å¼‚å¸¸ä½†æ˜¯æ²¡æœ‰åšå¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆå°†å¯¼è‡´ç¨‹åºä¸èƒ½æ­£å¸¸çš„è¿è¡Œä¸‹å» 12345678910111213public class ExceptionTest &#123; public static void main(String[] args) &#123; int a = 10; int b = 0; int c = a / b; System.out.println(c); System.out.println(\"ä¸ä¼šè¾“å‡ºçš„è¯­å¥ï¼Œå› ä¸ºä¸ä¼šæ‰§è¡Œåˆ°è¿™é‡Œ\"); &#125;&#125;è¾“å‡ºç»“æœæ˜¯ï¼šException in thread \"main\" java.lang.ArithmeticException: / by zeroat cn.caijiajia.cn.caijiajia.exception.ExceptionTest.main(ExceptionTest.java:12) ğŸŒ°2ï¼šå¦‚æœç¨‹åºå¯èƒ½å­˜åœ¨å¼‚å¸¸å¹¶åšäº†å¼‚å¸¸å¤„ç†ï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šæ­£å¸¸çš„è¿è¡Œä¸‹å» 1234567891011121314151617181920public class ExceptionTest &#123; public static void main(String[] args) &#123; try &#123; int a = 10; int b = 0; int c = a / b; System.out.println(c); System.out.println(\"å¼‚å¸¸ä»£ç ä¸‹é¢çš„ä»£ç å°†éƒ½ä¸ä¼šæ‰§è¡Œ\"); &#125; catch (ArithmeticException e) &#123; System.out.println(\"å¤„ç†å¼‚å¸¸çš„ä»£ç \"); &#125; System.out.println(\"å¼‚å¸¸å¤„ç†ä»£ç ä¸‹é¢çš„ç¨‹åºå°†ä¼šç»§ç»­æ‰§è¡Œè€Œä¸ä¼šç¨‹åºä¸­æ–­\"); &#125;&#125;è¾“å‡ºç»“æœæ˜¯ï¼šException in thread \"main\" java.lang.ArithmeticException: / by zeroat cn.caijiajia.cn.caijiajia.exception.ExceptionTest.main(ExceptionTest.java:12)å¤„ç†å¼‚å¸¸çš„ä»£ç å¼‚å¸¸å¤„ç†ä»£ç ä¸‹é¢çš„ç¨‹åºå°†ä¼šç»§ç»­æ‰§è¡Œè€Œä¸ä¼šç¨‹åºä¸­æ–­ Java ä¸­å¦‚ä½•å¤„ç†å¼‚å¸¸å¼‚å¸¸å¤„ç†çš„ 5 ä¸ªå…³é”®å­—12345tryï¼šæ‰§è¡Œå¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç catchï¼šæ•è·å¼‚å¸¸å¹¶å¯¹å¼‚å¸¸æƒ…å†µåšç›¸åº”å¤„ç†finallyï¼šæ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œä»£ç æ€»èƒ½æ‰§è¡Œã€‚ï¼ˆé‡Šæ”¾èµ„æºï¼Œå…³é—­æ•°æ®åº“è¿æ¥ï¼‰throwsï¼šå£°æ˜å¯èƒ½æŠ›å‡ºçš„å„ç§å¼‚å¸¸ï¼ˆå—æ£€å¼‚å¸¸è¾ƒå¤šï¼‰ç”¨äºæ–¹æ³•åthrowï¼šæ‰‹åŠ¨çš„æŠ›å‡ºå¼‚å¸¸ï¼ˆæ‰‹åŠ¨æŠ›å‡ºæˆ‘ä»¬è‡ªå®šä¹‰çš„å¼‚å¸¸è¾ƒå¤šï¼‰ç”¨äºæ–¹æ³•ä½“ä¸­ å¼‚å¸¸å¤„ç†åç¨‹åºè¿è¡Œæƒ…å†µ æƒ…å†µä¸€ï¼šæ²¡äº§ç”Ÿå¼‚å¸¸ 123456789101112public void method() &#123; try &#123; // ä»£ç æ®µâ‘  [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ­¤å¤„ä¸ä¼šäº§ç”Ÿå¼‚å¸¸] &#125; catch (Exception e) &#123; // ä»£ç æ®µâ‘¡ [å¯¹å¼‚å¸¸å¤„ç†çš„ä»£ç æ®µ] &#125; // ä»£ç æ®µâ‘¢ [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ]&#125;è¿è¡Œç»“æœï¼š ä»£ç æ®µâ‘  ä»£ç æ®µâ‘¢ æƒ…å†µäºŒï¼šäº§ç”Ÿå¼‚å¸¸å¹¶æ•è·å¼‚å¸¸ 12345678910111213141516public void method() &#123; try &#123; // å¼‚å¸¸ä»£ç æ®µâ‘  [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ­¤å¤„ä¼šäº§ç”Ÿå¼‚å¸¸] // ä»£ç æ®µâ‘¡ [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ] &#125; catch (Exception e) &#123; // ä»£ç æ®µâ‘¢ [å¯¹å¼‚å¸¸å¤„ç†çš„ä»£ç æ®µ] &#125; // ä»£ç æ®µâ‘£ [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ]&#125;è¿è¡Œç»“æœï¼š ä»£ç æ®µâ‘  ä»£ç æ®µâ‘¢ ä»£ç æ®µâ‘£æ³¨æ„ï¼šå¦‚æœæƒ³è¦æ­£å¸¸çš„ ä»£ç æ®µâ‘¡ æ‰§è¡Œï¼Œé‚£ä¹ˆå¯ä»¥æŠŠä»£ç æ®µä» try catch é‡Œé¢æå‡ºæ¥ï¼Œå’Œ ä»£ç æ®µâ‘£ æ”¾åœ¨ä¸€èµ·ï¼Œå½“å¼‚å¸¸å¤„ç†å®Œä¹‹åï¼Œå°±å¯ä»¥åŒæ—¶å»æ‰§è¡Œ ä»£ç æ®µâ‘¡ å’Œ ä»£ç æ®µâ‘£ äº†ã€‚ æƒ…å†µä¸‰ï¼šäº§ç”Ÿå¼‚å¸¸å¹¶æ•è·å¼‚å¸¸ï¼Œä½†æ˜¯æ•è·å¼‚å¸¸ç±»å‹ä¸åŒ¹é…äº§ç”Ÿå¼‚å¸¸ç±»å‹ 1234567891011121314public void method() &#123; try &#123; // å¼‚å¸¸ä»£ç æ®µâ‘  [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ­¤å¤„ä¼šäº§ç”Ÿè§’æ ‡è¶Šç•Œå¼‚å¸¸] // ä»£ç æ®µâ‘¡ [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ] &#125; catch (IOException e) &#123; // ä»£ç æ®µâ‘¢ [å¯¹å¼‚å¸¸å¤„ç†çš„ä»£ç æ®µ] &#125; // ä»£ç æ®µâ‘£ [æ­£å¸¸ä¸šåŠ¡é€»è¾‘ä»£ç ]&#125;è¿è¡Œç»“æœï¼š ä»£ç æ®µâ‘  æ³¨æ„ï¼šå¦‚æœæ•è·å¼‚å¸¸ç±»å‹å’Œäº§ç”Ÿçš„å¼‚å¸¸ç±»å‹ä¸åŒ¹é…ï¼Œé‚£ä¹ˆå°±å’Œæ²¡æœ‰å¤„ç†å¼‚å¸¸æƒ…å†µä¸€æ ·äº†ï¼Œtry catch åé¢çš„ä»£ç æ®µå°†éƒ½ä¸ä¼šæ‰§è¡Œï¼Œå‘ç”Ÿå¼‚å¸¸å°±ä¼šå¯¼è‡´ç¨‹åºä¸­æ–­è¿è¡Œ å¼‚å¸¸ä½“ç³»å¼‚å¸¸ç±»å±‚æ¬¡å›¾ Error å’Œ ExceptionError ç±»å’Œ Exception ç±»çš„çˆ¶ç±»éƒ½æ˜¯ Throwable ç±» Error ç±»ä¸€èˆ¬æ˜¯æŒ‡ä¸è™šæ‹Ÿæœºç›¸å…³çš„é—®é¢˜ï¼Œå¦‚ç³»ç»Ÿå´©æºƒï¼Œè™šæ‹Ÿæœºé”™è¯¯ï¼Œå†…å­˜ç©ºé—´ä¸è¶³ï¼Œæ–¹æ³•è°ƒç”¨æ ˆæº¢å‡ºç­‰ã€‚å¯¹äºè¿™ç±»é”™è¯¯çš„å¯¼è‡´çš„åº”ç”¨ç¨‹åºä¸­æ–­ï¼Œä»…é ç¨‹åºæœ¬èº«æ— æ³•æ¢å¤å’Œå’Œé¢„é˜²ï¼Œé‡åˆ°è¿™æ ·çš„é”™è¯¯ï¼Œå»ºè®®è®©ç¨‹åºç»ˆæ­¢ã€‚å› æ­¤æˆ‘ä»¬åœ¨å­¦ä¹ çš„æ—¶å€™ä¸»è¦æ˜¯å­¦ä¼šExceptionã€‚ Exception ç±»è¡¨ç¤ºç¨‹åºå¯ä»¥å¤„ç†çš„å¼‚å¸¸ï¼Œå¯ä»¥æ•è·ä¸”å¯èƒ½æ¢å¤ã€‚é‡åˆ°è¿™ç±»å¼‚å¸¸ï¼Œåº”è¯¥å°½å¯èƒ½å¤„ç†å¼‚å¸¸ï¼Œä½¿ç¨‹åºæ¢å¤è¿è¡Œï¼Œè€Œä¸åº”è¯¥éšæ„ç»ˆæ­¢å¼‚å¸¸ã€‚ Exception å¼‚å¸¸åˆ†ç±»åŠå¤„ç†Exception å¼‚å¸¸ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼šChecked Exceptionï¼ŒUnchecked Exceptionï¼›å³å—æ£€å¼‚å¸¸å’Œéå—æ£€å¼‚å¸¸ï¼ˆè¿è¡Œæ—¶å¼‚å¸¸ï¼‰ Checked Exceptionï¼šå—æ£€å¼‚å¸¸ï¼Œå³ Java ç¨‹åºå¿…é¡»æ˜¾å¼å¤„ç†çš„å¼‚å¸¸ï¼Œå¦‚æœç¨‹åºæ²¡æœ‰å¤„ç† Checked å¼‚å¸¸ï¼Œè¯¥ç¨‹åºåœ¨ç¼–è¯‘æ—¶å°±ä¼šå‘ç”Ÿé”™è¯¯æ— æ³•ç¼–è¯‘ã€‚ä¾‹å¦‚å›¾ä¸­æ‰€ç¤ºçš„ IOException å¤„ç†å—æ£€å¼‚å¸¸é€šè¿‡æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼šé€šè¿‡ trycatch æ˜¾å¼å¤„ç†å¼‚å¸¸ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ 12345678910public class ExceptionTest &#123; public static void main(String[] args) &#123; try &#123; // é€šè¿‡ try catch æ˜¾ç¤ºå¤„ç†å¼‚å¸¸ FileInputStream fis = new FileInputStream(new File(\"\")); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125;&#125; æ–¹å¼äºŒï¼šé€šè¿‡ throws æŠ›å‡ºå¼‚å¸¸ï¼Œè®©ä¸Šå±‚æ¥å¤„ç†å¼‚å¸¸ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ 12345public class ExceptionTest &#123; public static void main(String[] args) throws IOException &#123; FileInputStream fis = new FileInputStream(new File(\"\")); &#125;&#125; Unchecked Exceptionï¼šéå—æ£€å¼‚å¸¸ï¼Œå³ RuntimeException è¿è¡Œæ—¶å¼‚å¸¸ã€‚è¿™äº›å¼‚å¸¸ç¨‹åºå¯ä»¥é€‰æ‹©æ•è·å¤„ç†ï¼Œä¹Ÿå¯ä»¥ä¸å¤„ç†ã€‚è¿™äº›å¼‚å¸¸ä¸€èˆ¬æ˜¯ç”±ç¨‹åºé€»è¾‘é”™è¯¯å¼•èµ·çš„ï¼Œç¨‹åºåº”è¯¥ä»é€»è¾‘è§’åº¦å°½å¯èƒ½é¿å…è¿™ç±»å¼‚å¸¸çš„å‘ç”Ÿã€‚æ¯”å¦‚å¸¸è§çš„ NullPointerExceptionã€IndexOutOfBoundsException å°±æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ã€‚ä¸è¿‡æŒ‰ç…§ç»éªŒæ¥è¯´ï¼Œè¿™ç±»å¼‚å¸¸è¦ä¹ˆå°½é‡é¿å…ï¼Œè¦ä¹ˆå‡ºç°äº†å°±è¦åšå¼‚å¸¸å¤„ç†ï¼Œä»è€Œä¿è¯ç¨‹åºçš„å¥å£®æ€§ã€‚ å¤„ç†è¿è¡Œæ—¶å¼‚å¸¸é€šè¿‡æœ‰å¦‚ä¸‹ä¸¤ç§æ–¹å¼ï¼š æ–¹å¼ä¸€ï¼šå¸¸è§çš„ç©ºæŒ‡é’ˆå¤„ç† 123456// é€šè¿‡å†™ä¼ªä»£ç æ¥æ¼”ç¤ºå…¶å¤„ç†æµç¨‹if (å¯¹è±¡ == null) &#123; // å¤„ç†å¯¹è±¡ä¸º null çš„é€»è¾‘&#125; else &#123; // å¤„ç†å¯¹è±¡ä¸ä¸º null çš„é€»è¾‘&#125; æ–¹å¼äºŒï¼šè·Ÿä¸šåŠ¡ç›¸å…³å¼‚å¸¸ï¼ŒæŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸ 1234567// é€šè¿‡æ‰‹æœºå·æ³¨å†Œä¸šåŠ¡é€»è¾‘User user = dao.getByPhone(phone);if (user != null) &#123; // è¯´æ˜æ­¤æ‰‹æœºå·ç å·²ç»è¢«æ³¨å†Œï¼Œé‚£ä¹ˆå°±æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ï¼ˆå³è‡ªå®šä¹‰å¼‚å¸¸ï¼‰ throw new MyRuntimeException(\"è¯¥ç”¨æˆ·å·²æ³¨å†Œ\");&#125;// å¦‚æœæ²¡æœ‰æ³¨å†Œï¼Œç»§ç»­èµ°æ³¨å†Œæµç¨‹ä»£ç  æ€»ç»“ï¼š å—æ£€å¼‚å¸¸ï¼ˆChecked Exceptionï¼‰å¤„ç†èµ·æ¥å¾ˆç®€å•ï¼Œå› ä¸ºç¨‹åºå¦‚æœä¸åšæ˜¾å¼å¤„ç†ï¼Œé‚£ä¹ˆå°±ä¼šç¼–è¯‘ä¸é€šè¿‡ï¼Œå¼ºåˆ¶è¦æ±‚å¤„ç† è¿è¡Œæ—¶å¼‚å¸¸ï¼ˆUnchecked exceptionï¼‰åˆ™æ˜¯çœ‹å¿ƒæƒ…å¤„ç†çš„ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦å…¬å¸ä»£ç æ›´åŠ å¥å£®ï¼Œæ›´å°‘çš„å‡ºç°é—®é¢˜ï¼Œæœ€å¥½è¦åšä¸€ä¸‹å¼‚å¸¸å¤„ç†ã€‚ä½†æ˜¯å¦‚æœåšè¿™ä¸ªå¤„ç†å‘¢ï¼Ÿå¯¹äºè¿™ç§è¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å’Œä¸šåŠ¡ç›¸å…³çš„ï¼Œæ¯”å¦‚æ‰‹æœºå·æ³¨å†Œä¾‹å­ï¼›è¿™ç§æƒ…å†µä¸‹åœ¨ Java çš„å¼‚å¸¸ä½“ç³»ä¸­å¹¶æ²¡æœ‰ç›¸å…³å¼‚å¸¸ç±»åšå¤„ç†ï¼Œå› ä¸º Java ä¸ç®¡å†æ™ºèƒ½ï¼Œä¹Ÿä¸å¯èƒ½çŸ¥é“æˆ‘ä»¬çš„ä¸šåŠ¡æƒ…å†µï¼Œå½“ç„¶å°±ä¸ä¼šé’ˆå¯¹ä¸šåŠ¡æä¾›ä¸€äº›å¼‚å¸¸ç±»ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œå› æ­¤ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè‡ªå®šä¹‰å¼‚å¸¸å°±å‡ºç°äº†ï¼Œå®ƒå¯¹äºæˆ‘ä»¬å¤„ç†ä¸šåŠ¡ä¸­äº§ç”Ÿçš„è¿è¡Œæ—¶å¼‚å¸¸éå¸¸`éå¸¸é‡è¦ï¼Œæ¥ä¸‹æ¥å°±æ¥çœ‹çœ‹è‡ªå®šä¹‰å¼‚å¸¸`ã€‚ è‡ªå®šä¹‰å¼‚å¸¸äº§ç”ŸåŸå› Java ç°æœ‰çš„å¼‚å¸¸ç±»ä¸èƒ½æ»¡è¶³æ›´å¤šçš„ä¸šåŠ¡å¼‚å¸¸å¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬è¦è‡ªå®šä¹‰åˆé€‚çš„å¼‚å¸¸ç±»æ¥å¤„ç†ä¸šåŠ¡å¼‚å¸¸ å¦‚ä½•è‡ªå®šä¹‰å¼‚å¸¸ç±»ç¬¬ä¸€æ­¥ï¼šå£°æ˜ä¸€ä¸ªç±»ç»§æ‰¿ Exception æˆ–å…¶å­ç±» é‚£ä¹ˆæˆ‘ä»¬å£°æ˜çš„è¿™ä¸ªç±»åˆ°åº•ç»§æ‰¿è°å‘¢ï¼ŸExceptionï¼ŸRuntimeExceptionï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šRuntimeException åŸå› æ˜¯ï¼šçœ‹äº†ä¸Šé¢çš„å¼‚å¸¸ç±»å±‚æ¬¡å›¾ï¼Œåº”è¯¥ä¹Ÿèƒ½å‘ç°ï¼ŒException ä¸‹é¢æœ‰ä¸¤å¤§ç±»å­ç±»ï¼Œå—æ£€å¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»ç»§æ‰¿äº† Exceptionï¼Œåˆ™å°±ä¼šå› ä¸ºå—æ£€å¼‚å¸¸çš„å­˜åœ¨è€Œå˜æˆäº†å—æ£€å¼‚å¸¸ç±»ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è‡ªå®šä¹‰çš„å¼‚å¸¸ç±»ï¼Œå¦‚æœåœ¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±å¿…é¡»æ˜¾å¼å¤„ç†å¼‚å¸¸ï¼Œè¦ä¹ˆ try catchï¼Œè¦ä¹ˆæŠ›å‡ºç»™ä¸Šå±‚ï¼›è¿™æ ·ä¸€æ¥ï¼Œä½¿å¾—æˆ‘ä»¬çš„ç¨‹åºå¾ˆæ··ä¹±ï¼Œè€Œä¸”å¹¶æ²¡æœ‰è¾¾åˆ°æˆ‘ä»¬é¢„æœŸçš„ç»“æœã€‚ç„¶åå½“æˆ‘ä»¬è‡ªå®šä¹‰çš„ç±»ç»§æ‰¿äº† RuntimeException ä¹‹åï¼Œå½“æˆ‘ä»¬ç¨‹åºä¸­æƒ³è¦ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥ new ä¸€ä¸ªå³å¯ï¼Œè€Œä¸å†éœ€è¦æ˜¾å¼å»å†å¤šåšå¤„ç†äº†ã€‚ ç¬¬äºŒæ­¥ï¼šè‡ªå®šä¹‰å¼‚å¸¸ç±»åº”è‡³å°‘åŒ…å«å››ä¸ªæ„é€ æ–¹æ³• 123456789101112131415public class MyException extends RuntimeException &#123; public MyException() &#123;&#125; public MyException(String msg) &#123; super(msg); &#125; public MyException(Throwable throwable) &#123; super(throwable); &#125; public MyException(String msg, Throwable throwable) &#123; super(msg, throwable); &#125;&#125; catchä½äº†å¼‚å¸¸ä¸€å®šè¦è®°ä½å¤„ç†ï¼š 12345678910111213public static void main(String[] args) &#123; for (int i = 0; i &lt; 10; i++) &#123; try &#123; throw new Myexception(\"æˆ‘æ˜¯ä¸€ä¸ªå¼‚å¸¸\"); &#125; catch (Exception e) &#123; e.printStackTrace(); return; &#125; &#125; &#125;æ­¤æ—¶ `retrun` å°±æ˜¯å¤„ç†ï¼Œé€€å‡ºå¾ªç¯å¦‚æœä¸å¤„ç†ï¼Œå¾ªç¯ä¸€ç›´è¿›è¡Œ ç¬¬ä¸‰æ­¥ï¼šåœ¨ç¨‹åºä¸­ä½¿ç”¨æˆ‘ä»¬çš„è‡ªå®šä¹‰å¼‚å¸¸ 12345678910public void testException() &#123; User user = dao.getByPhone(phone); if (user != null) &#123; // å› ä¸º MyException æ˜¯ç»§æ‰¿ RuntimeExceptionï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥æŠ›å‡ºå¼‚å¸¸è€Œä¸ç”¨åšå…¶å®ƒå¤„ç† throw new MyException(\"è¯¥æ‰‹æœºå·å·²è¢«æ³¨å†Œ\"); &#125; // ...&#125; æ³¨ï¼šæ²¡é”™ï¼Œè¿™é‡Œåˆä½¿ç”¨äº†è¿™ä¸ªæ‰‹æœºå·æ³¨å†Œçš„ä¾‹å­ï¼Œå› ä¸ºè¿™ä¸ªå°±æ˜¯å®å®åœ¨åœ¨çš„åœ¨ä¸šåŠ¡ä¸­çš„å¼‚å¸¸å¤„ç†ã€‚ä¸šåŠ¡æ˜¯åƒå˜ä¸‡åŒ–ï¼Œä½†æ˜¯å®ƒä»¬å¯èƒ½äº§ç”Ÿçš„å¼‚å¸¸å¤„ç†æ–¹å¼æ˜¯ä¸ä¼šå˜åŒ–çš„ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯å»åšå¼‚å¸¸å¤„ç†å³å¯ã€‚ tipsï¼š å¦‚ä¸Šè‡ªå®šä¹‰çš„å¼‚å¸¸ç±»ä¸­çš„æ„é€ æ–¹æ³•æ˜¯æœ€åŸºæœ¬çš„å‡ ä¸ªã€‚æ¯å®¶å…¬å¸çš„è‡ªå®šä¹‰å¼‚å¸¸å¯èƒ½éƒ½ä¼šæœ‰åŒºåˆ«; æ¯”å¦‚å®šä¹‰ä¸€ä¸ª SuperException ç±»å®ç°äº† RuntimeExceptionï¼Œç„¶ååœ¨è‡ªå®šä¹‰ ClientExceptionï¼ŒServerException å†å»ç»§æ‰¿ SuperExceptionï¼›é‚£ä¹ˆè¿™å°±æ˜¯ä¸€å¥—è‡ªå®šä¹‰ä½“ç³»äº†ï¼Œåˆ†ä¸ºå®¢æˆ·ç«¯å¼‚å¸¸å’ŒæœåŠ¡ç«¯å¼‚å¸¸ï¼Œåœ¨éœ€è¦åšå¼‚å¸¸å¤„ç†çš„åœ°æ–¹ä½¿ç”¨å¯¹åº”çš„å¼‚å¸¸ç±»å¹¶æŠ›å‡ºå¼‚å¸¸é”™è¯¯ä¿¡æ¯å³å¯äº†ã€‚ æ¯”å¦‚å¯èƒ½æœ‰çš„å…¬å¸ä¼šåœ¨è‡ªå®šä¹‰å¼‚å¸¸ç±»ä¸­åœ¨å®šä¹‰ä¸€äº›å­—æ®µï¼ŒerrorCodeï¼ŒerrorMessage ç­‰ï¼Œæ¥ä»£è¡¨æŸäº›ä¸šåŠ¡é”™è¯¯ç å’ŒÂ·å¯¹åº”çš„é”™è¯¯ä¿¡æ¯Â·ç­‰ã€‚ä¸ç®¡æ€ä¹ˆæ ·ï¼Œæˆ‘ä»¬åªè¦äº†è§£è‡ªå®šä¹‰å¼‚å¸¸çš„åŸç†åï¼Œé¢å¯¹å“ªä¸ªå…¬å¸çš„è‡ªå®šä¹‰å¼‚å¸¸ä½“ç³»æˆ‘ä»¬éƒ½èƒ½å¤Ÿè½»æ¾åº”å¯¹ã€‚ æ€»ç»“ ä¸€ä¸ªæ˜¯å¼‚å¸¸ä½“ç³»ï¼Œè¦åˆ†æ¸…å—æ£€å¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸ï¼› ä¸€ä¸ªå°±æ˜¯è‡ªå®šä¹‰å¼‚å¸¸ï¼ŒçŸ¥é“å¦‚ä½•è‡ªå®šä¹‰å¼‚å¸¸å’Œå¦‚ä½•ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ã€‚ å‚è€ƒèµ„æ–™Java å…¥é—¨ä¹‹å¼‚å¸¸å¤„ç†Java å¼‚å¸¸çš„é¢è¯•é—®é¢˜åŠç­”æ¡ˆ -Part 1Java å¼‚å¸¸çš„é¢è¯•é—®é¢˜åŠç­”æ¡ˆ -Part 2Java å¼‚å¸¸çš„é¢è¯•é—®é¢˜åŠç­”æ¡ˆ -Part 3","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Javaåå°„","slug":"Javaåå°„","date":"2017-09-10T09:06:08.000Z","updated":"2018-08-24T09:11:38.628Z","comments":true,"path":"Javaåå°„.html","link":"","permalink":"http://xiaoqinghua.site/Javaåå°„.html","excerpt":"","text":"åå°„æ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ª Class å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸ç±»æœ‰å…³çš„ä¿¡æ¯ã€‚å½“ç¼–è¯‘ä¸€ä¸ªæ–°ç±»æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªåŒåçš„ .class æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†…å®¹ä¿å­˜ç€ Class å¯¹è±¡ã€‚ ç±»åŠ è½½ç›¸å½“äº Class å¯¹è±¡çš„åŠ è½½ã€‚ç±»åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åŠ¨æ€åŠ è½½åˆ° JVM ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ Class.forName(&quot;com.mysql.jdbc.Driver&quot;) è¿™ç§æ–¹å¼æ¥æ§åˆ¶ç±»çš„åŠ è½½ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Class å¯¹è±¡ã€‚ åå°„å¯ä»¥æä¾›è¿è¡Œæ—¶çš„ç±»ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™ä¸ªç±»å¯ä»¥åœ¨è¿è¡Œæ—¶æ‰åŠ è½½è¿›æ¥ï¼Œç”šè‡³åœ¨ç¼–è¯‘æ—¶æœŸè¯¥ç±»çš„ .class ä¸å­˜åœ¨ä¹Ÿå¯ä»¥åŠ è½½è¿›æ¥ã€‚ Class å’Œ java.lang.reflect ä¸€èµ·å¯¹åå°„æä¾›äº†æ”¯æŒï¼Œjava.lang.reflect ç±»åº“ä¸»è¦åŒ…å«äº†ä»¥ä¸‹ä¸‰ä¸ªç±»ï¼š Field ï¼šå¯ä»¥ä½¿ç”¨ get() å’Œ set() æ–¹æ³•è¯»å–å’Œä¿®æ”¹ Field å¯¹è±¡å…³è”çš„å­—æ®µï¼› Method ï¼šå¯ä»¥ä½¿ç”¨ invoke() æ–¹æ³•è°ƒç”¨ä¸ Method å¯¹è±¡å…³è”çš„æ–¹æ³•ï¼› Constructor ï¼šå¯ä»¥ç”¨ Constructor åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ Advantages of Using Reflection: Extensibility Features :An application may make use of external, user-defined classes by creating instances of extensibility objects using their fully-qualified names.Class Browsers and Visual Development Environments : A class browser needs to be able to enumerate the members of classes. Visual development environments can benefit from making use of type information available in reflection to aid the developer in writing correct code.Debuggers and Test Tools : Debuggers need to be able to examine private members on classes. Test harnesses can make use of reflection to systematically call a discoverable set APIs defined on a class, to insure a high level of code coverage in a test suite. Drawbacks of Reflection:Reflection is powerful, but should not be used indiscriminately. If it is possible to perform an operation without using reflection, then it is preferable to avoid using it. The following concerns should be kept in mind when accessing code via reflection. Performance Overhead : Because reflection involves types that are dynamically resolved, certain Java virtual machine optimizations can not be performed. Consequently, reflective operations have slower performance than their non-reflective counterparts, and should be avoided in sections of code which are called frequently in performance-sensitive applications. Security Restrictions : Reflection requires a runtime permission which may not be present when running under a security manager. This is in an important consideration for code which has to run in a restricted security context, such as in an Applet. Exposure of Internals :Since reflection allows code to perform operations that would be illegal in non-reflective code, such as accessing private fields and methods, the use of reflection can result in unexpected side-effects, which may render code dysfunctional and may destroy portability. Reflective code breaks abstractions and therefore may change behavior with upgrades of the platform. Trail: The Reflection API Java åå°„ä½¿ç”¨æ€»ç»“","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Objectç±»æ€»ç»“","slug":"Objectæ€»ç»“","date":"2017-09-03T09:06:13.000Z","updated":"2018-08-24T07:42:55.771Z","comments":true,"path":"Objectæ€»ç»“.html","link":"","permalink":"http://xiaoqinghua.site/Objectæ€»ç»“.html","excerpt":"","text":"Object ä¸Šå¸ç±»Objectç±»æ˜¯Javaä¸­å…¶ä»–æ‰€æœ‰ç±»çš„ç¥–å…ˆï¼Œæ²¡æœ‰Objectç±»Javaé¢å‘å¯¹è±¡æ— ä»è°ˆèµ·ã€‚ä½œä¸ºå…¶ä»–æ‰€æœ‰ç±»çš„åŸºç±»ï¼ŒObjectå…·æœ‰å“ªäº›å±æ€§å’Œè¡Œä¸ºï¼Œæ˜¯Javaè¯­è¨€è®¾è®¡èƒŒåçš„æ€ç»´ä½“ç°ã€‚ Objectç±»ä½äºjava.langåŒ…ä¸­ï¼Œjava.langåŒ…åŒ…å«ç€Javaæœ€åŸºç¡€å’Œæ ¸å¿ƒçš„ç±»ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šè‡ªåŠ¨å¯¼å…¥ã€‚Objectç±»æ²¡æœ‰å®šä¹‰å±æ€§ï¼Œä¸€å…±æœ‰13ä¸ªæ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233// éšå¼æ„é€ æ–¹æ³•public Object();// è°ƒç”¨æœ¬åœ°C/C++å®ç°çš„æ–¹æ³•private static native void registerNatives();// åˆå§‹åŒ–è°ƒç”¨static &#123; registerNatives();&#125;protected native Object clone() throws CloneNotSupportedExceptionpublic final native Class&lt;?&gt; getClass()public boolean equals(Object obj)public native int hashCode()public String toString()public final void wait() throws InterruptedExceptionpublic final void wait(long timeout, int nanos) throws InterruptedExceptionpublic final native void notify()public final native void notifyAll()public final native void wait(long timeout) throws InterruptedExceptionprotected void finalize() throws Throwable &#123;&#125; 1ã€ç±»æ„é€ å™¨public Object();å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼ŒJavaä¸­é€šè¿‡å½¢å¦‚ new A(args..)å½¢å¼åˆ›å»ºä¸€ä¸ªå±äºè¯¥ç±»å‹çš„å¯¹è±¡ã€‚å…¶ä¸­ A å³æ˜¯ç±»åï¼ŒA(args..)å³æ­¤ç±»å®šä¹‰ä¸­ç›¸å¯¹åº”çš„æ„é€ å‡½æ•°ã€‚é€šè¿‡æ­¤ç§å½¢å¼åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯é€šè¿‡ç±»ä¸­çš„æ„é€ å‡½æ•°å®Œæˆã€‚ä¸ºä½“ç°æ­¤ç‰¹æ€§ï¼ŒJavaä¸­è§„å®šï¼šåœ¨ç±»å®šä¹‰è¿‡ç¨‹ä¸­ï¼Œå¯¹äºæœªå®šä¹‰æ„é€ å‡½æ•°çš„ç±»ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ä½œä¸ºæ‰€æœ‰ç±»çš„åŸºç±»ï¼ŒObjectç±»è‡ªç„¶è¦åæ˜ å‡ºæ­¤ç‰¹æ€§ï¼Œåœ¨æºç ä¸­ï¼Œæœªç»™å‡ºObjectç±»æ„é€ å‡½æ•°å®šä¹‰ï¼Œä½†å®é™…ä¸Šï¼Œæ­¤æ„é€ å‡½æ•°æ˜¯å­˜åœ¨çš„ã€‚ å½“ç„¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»éƒ½æ˜¯é€šè¿‡æ­¤ç§æ–¹å¼å»æ„å»ºï¼Œä¹Ÿè‡ªç„¶çš„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç±»æ„é€ å‡½æ•°éƒ½æ˜¯publicã€‚ 2ã€private static native void registerNatives();registerNativeså‡½æ•°å‰é¢æœ‰nativeå…³é”®å­—ä¿®é¥°ï¼ŒJavaä¸­ï¼Œç”¨nativeå…³é”®å­—ä¿®é¥°çš„å‡½æ•°è¡¨æ˜è¯¥æ–¹æ³•çš„å®ç°å¹¶ä¸æ˜¯åœ¨Javaä¸­å»å®Œæˆï¼Œè€Œæ˜¯ç”±C/C++å»å®Œæˆï¼Œå¹¶è¢«ç¼–è¯‘æˆäº†.dllï¼Œç”±Javaå»è°ƒç”¨ã€‚æ–¹æ³•çš„å…·ä½“å®ç°ä½“åœ¨dllæ–‡ä»¶ä¸­ï¼Œå¯¹äºä¸åŒå¹³å°ï¼Œå…¶å…·ä½“å®ç°åº”è¯¥æœ‰æ‰€ä¸åŒã€‚ç”¨nativeä¿®é¥°ï¼Œå³è¡¨ç¤ºæ“ä½œç³»ç»Ÿï¼Œéœ€è¦æä¾›æ­¤æ–¹æ³•ï¼ŒJavaæœ¬èº«éœ€è¦ä½¿ç”¨ã€‚å…·ä½“åˆ°registerNatives()æ–¹æ³•æœ¬èº«ï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯å°†C/C++ä¸­çš„æ–¹æ³•æ˜ å°„åˆ°Javaä¸­çš„nativeæ–¹æ³•ï¼Œå®ç°æ–¹æ³•å‘½åçš„è§£è€¦ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œå¯èƒ½æœ‰äººä¼šé—®ï¼ŒregisterNatives()ä¿®é¥°ç¬¦ä¸ºprivateï¼Œä¸”å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œä½œç”¨ä½•ä»¥è¾¾åˆ°ï¼Ÿå…¶å®ï¼Œåœ¨Javaæºç ä¸­ï¼Œæ­¤æ–¹æ³•çš„å£°æ˜åæœ‰ç´§æ¥ç€ä¸€æ®µé™æ€ä»£ç å—ï¼š 12341 private static native void registerNatives();2 static &#123;3 registerNatives();4 &#125; 3ã€protected native Object clone() throws CloneNotSupportedException;clone()æ–¹æ³•åˆæ˜¯ä¸€ä¸ªè¢«å£°æ˜ä¸ºnativeçš„æ–¹æ³•ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“äº†clone()æ–¹æ³•å¹¶ä¸æ˜¯Javaçš„åŸç”Ÿæ–¹æ³•ï¼Œå…·ä½“çš„å®ç°æ˜¯æœ‰C/C++å®Œæˆçš„ã€‚cloneè‹±æ–‡ç¿»è¯‘ä¸º&quot;å…‹éš†&quot;ï¼Œå…¶ç›®çš„æ˜¯åˆ›å»ºå¹¶è¿”å›æ­¤å¯¹è±¡çš„ä¸€ä¸ªå‰¯æœ¬ã€‚å½¢è±¡ç‚¹ç†è§£ï¼Œè¿™æœ‰ä¸€è¾†ç§‘é²å…¹ï¼Œä½ çœ‹ç€ä¸é”™ï¼Œæƒ³è¦ä¸ªä¸€æ¨¡ä¸€æ ·çš„ã€‚ä½ è°ƒç”¨æ­¤æ–¹æ³•å³å¯åƒå˜é­”æœ¯ä¸€æ ·å˜å‡ºä¸€è¾†ä¸€æ¨¡ä¸€æ ·çš„ç§‘é²å…¹å‡ºæ¥ã€‚é…ç½®ä¸€æ ·ï¼Œé•¿ç›¸ä¸€æ ·ã€‚ä½†ä»æ­¤åˆ»èµ·ï¼ŒåŸæ¥çš„é‚£è¾†ç§‘é²å…¹å¦‚æœè¿›è¡Œäº†æ–°çš„è£…é¥°ï¼Œä¸ä½ å…‹éš†å‡ºæ¥çš„è¿™è¾†ç§‘é²å…¹æ²¡æœ‰ä»»ä½•å…³ç³»äº†ã€‚ä½ å…‹éš†å‡ºæ¥çš„å¯¹è±¡å˜ä¸å˜å®Œå…¨åœ¨äºä½ å¯¹å…‹éš†å‡ºæ¥çš„ç§‘é²å…¹æœ‰æ²¡æœ‰è¿›è¡Œè¿‡ä»€ä¹ˆæ“ä½œäº†ã€‚Javaæœ¯è¯­è¡¨è¿°ä¸ºï¼šcloneå‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼ŒæŒ‡å‘çš„æ˜¯æ–°çš„cloneå‡ºæ¥çš„å¯¹è±¡ï¼Œæ­¤å¯¹è±¡ä¸åŸå¯¹è±¡åˆ†åˆ«å ç”¨ä¸åŒçš„å †ç©ºé—´ã€‚ æ˜ç™½äº†cloneçš„å«ä¹‰åï¼Œæ¥ä¸‹æ¥çœ‹çœ‹å¦‚æœè°ƒç”¨clone()å‡½æ•°å¯¹è±¡è¿›è¡Œæ­¤å…‹éš†æ“ä½œã€‚ é¦–å…ˆçœ‹ä¸€ä¸‹ä¸‹é¢çš„è¿™ä¸ªä¾‹å­ï¼š 123456789public class ObjectTest &#123; public static void main(String[] args) &#123; Object o1 = new Object(); // The method clone() from the type Object is not visible Object clone = o1.clone(); &#125;&#125; ä¾‹å­å¾ˆç®€å•ï¼Œåœ¨main()æ–¹æ³•ä¸­ï¼Œnewä¸€ä¸ªObjectå¯¹è±¡åï¼Œæƒ³ç›´æ¥è°ƒç”¨æ­¤å¯¹è±¡çš„cloneæ–¹æ³•å…‹éš†ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å‡ºç°é”™è¯¯æç¤ºï¼š&quot;The method clone() from the type Object is not visible&quot; why? æ ¹æ®æç¤ºï¼Œç¬¬ä¸€ååº”æ˜¯ObjectTestç±»ä¸­å®šä¹‰çš„Objectå¯¹è±¡æ— æ³•è®¿é—®å…¶clone()æ–¹æ³•ã€‚å›åˆ°Objectç±»ä¸­clone()æ–¹æ³•çš„å®šä¹‰ï¼Œå¯ä»¥çœ‹åˆ°å…¶è¢«å£°æ˜ä¸ºprotectedï¼Œä¼°è®¡é—®é¢˜å°±åœ¨è¿™ä¸Šé¢äº†ï¼Œprotectedä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•è¡¨ç¤ºï¼šåœ¨åŒä¸€ä¸ªåŒ…å†…æˆ–è€…ä¸åŒåŒ…çš„å­ç±»å¯ä»¥è®¿é—®ã€‚æ˜¾ç„¶ï¼ŒObjectç±»ä¸ObjectTestç±»åœ¨ä¸åŒçš„åŒ…ä¸­ï¼Œä½†æ˜¯ObjectTestç»§æ‰¿è‡ªObjectï¼Œæ˜¯Objectç±»çš„å­ç±»ï¼Œäºæ˜¯ï¼Œç°åœ¨å´å‡ºç°å­ç±»ä¸­é€šè¿‡Objectå¼•ç”¨ä¸èƒ½è®¿é—®protectedæ–¹æ³•ï¼ŒåŸå› åœ¨äºå¯¹&quot;ä¸åŒåŒ…ä¸­çš„å­ç±»å¯ä»¥è®¿é—®&quot;æ²¡æœ‰æ­£ç¡®ç†è§£ã€‚ &quot;ä¸åŒåŒ…ä¸­çš„å­ç±»å¯ä»¥è®¿é—®&quot;ï¼Œæ˜¯æŒ‡å½“ä¸¤ä¸ªç±»ä¸åœ¨åŒä¸€ä¸ªåŒ…ä¸­çš„æ—¶å€™ï¼Œç»§æ‰¿è‡ªçˆ¶ç±»çš„å­ç±»å†…éƒ¨ä¸”ä¸»è°ƒï¼ˆè°ƒç”¨è€…ï¼‰ä¸ºå­ç±»çš„å¼•ç”¨æ—¶æ‰èƒ½è®¿é—®çˆ¶ç±»ç”¨protectedä¿®é¥°çš„æˆå‘˜ï¼ˆå±æ€§/æ–¹æ³•ï¼‰ã€‚ åœ¨å­ç±»å†…éƒ¨ï¼Œä¸»è°ƒä¸ºçˆ¶ç±»çš„å¼•ç”¨æ—¶å¹¶ä¸èƒ½è®¿é—®æ­¤protectedä¿®é¥°çš„æˆå‘˜ã€‚ï¼ï¼ˆsuperå…³é”®å­—é™¤å¤–ï¼‰ äºæ˜¯ï¼Œä¸Šä¾‹æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼Œå¯ä»¥æ­£å¸¸ç¼–è¯‘ï¼š 12345678910111213public class ObjectTest &#123; public static void main(String[] args) &#123; ObjectTest ot1 = new ObjectTest(); try &#123; ObjectTest ot2 = (ObjectTest) ot1.clone(); &#125; catch (CloneNotSupportedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); &#125; &#125;&#125; æ˜¯çš„ï¼Œå› ä¸ºæ­¤æ—¶çš„ä¸»è°ƒå·²ç»æ˜¯å­ç±»çš„å¼•ç”¨äº†ã€‚ ä¸Šè¿°ä»£ç åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¼šæŠ›å‡º&quot;java.lang.CloneNotSupportedException&quot;,è¡¨æ˜clone()æ–¹æ³•å¹¶æœªæ­£ç¡®æ‰§è¡Œå®Œæ¯•ï¼Œé—®é¢˜çš„åŸå› åœ¨ä¸Javaä¸­çš„è¯­æ³•è§„å®šï¼š clone()çš„æ­£ç¡®è°ƒç”¨æ˜¯éœ€è¦å®ç°Cloneableæ¥å£ï¼Œå¦‚æœæ²¡æœ‰å®ç°Cloneableæ¥å£ï¼Œå¹¶ä¸”å­ç±»ç›´æ¥è°ƒç”¨Objectç±»çš„clone()æ–¹æ³•ï¼Œåˆ™ä¼šæŠ›å‡ºCloneNotSupportedExceptionå¼‚å¸¸ã€‚ Cloneableæ¥å£ä»…æ˜¯ä¸€ä¸ªè¡¨ç¤ºæ¥å£ï¼Œæ¥å£æœ¬èº«ä¸åŒ…å«ä»»ä½•æ–¹æ³•ï¼Œç”¨æ¥æŒ‡ç¤ºObject.clone()å¯ä»¥åˆæ³•çš„è¢«å­ç±»å¼•ç”¨æ‰€è°ƒç”¨ã€‚ äºæ˜¯ï¼Œä¸Šè¿°ä»£ç æ”¹æˆå¦‚ä¸‹å½¢å¼ï¼Œå³å¯æ­£ç¡®æŒ‡å®šclone()æ–¹æ³•ä»¥å®ç°å…‹éš†ã€‚ 12345678910111213141516 3 public class ObjectTest implements Cloneable &#123; 4 5 public static void main(String[] args) &#123; 6 7 ObjectTest ot1 = new ObjectTest(); 8 9 try &#123;10 ObjectTest ot2 = (ObjectTest) ot1.clone();11 System.out.println(\"ot2:\" + ot2);12 &#125; catch (CloneNotSupportedException e) &#123;13 // TODO Auto-generated catch block14 e.printStackTrace();15 &#125;16 &#125;17 18 &#125; 4ã€public final native Class&lt;?&gt; getClass();getClass()ä¹Ÿæ˜¯ä¸€ä¸ªnativeæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯æ­¤Objectå¯¹è±¡çš„ç±»å¯¹è±¡/è¿è¡Œæ—¶ç±»å¯¹è±¡Class&lt;?&gt;ã€‚æ•ˆæœä¸Object.classç›¸åŒã€‚ é¦–å…ˆè§£é‡Šä¸‹&quot;ç±»å¯¹è±¡&quot;çš„æ¦‚å¿µï¼šåœ¨Javaä¸­ï¼Œç±»æ˜¯å¯¹å…·æœ‰ä¸€ç»„ç›¸åŒç‰¹å¾æˆ–è¡Œä¸ºçš„å®ä¾‹çš„æŠ½è±¡å¹¶è¿›è¡Œæè¿°ï¼Œå¯¹è±¡åˆ™æ˜¯æ­¤ç±»æ‰€æè¿°çš„ç‰¹å¾æˆ–è¡Œä¸ºçš„å…·ä½“å®ä¾‹ã€‚ä½œä¸ºæ¦‚å¿µå±‚æ¬¡çš„ç±»ï¼Œå…¶æœ¬èº«ä¹Ÿå…·æœ‰æŸäº›å…±åŒçš„ç‰¹æ€§ï¼Œå¦‚éƒ½å…·æœ‰ç±»åç§°ã€ç”±ç±»åŠ è½½å™¨å»åŠ è½½ï¼Œéƒ½å…·æœ‰åŒ…ï¼Œå…·æœ‰çˆ¶ç±»ï¼Œå±æ€§å’Œæ–¹æ³•ç­‰ã€‚äºæ˜¯ï¼ŒJavaä¸­æœ‰ä¸“é—¨å®šä¹‰äº†ä¸€ä¸ªç±»ï¼ŒClassï¼Œå»æè¿°å…¶ä»–ç±»æ‰€å…·æœ‰çš„è¿™äº›ç‰¹æ€§ï¼Œå› æ­¤ï¼Œä»æ­¤è§’åº¦å»çœ‹ï¼Œç±»æœ¬èº«ä¹Ÿéƒ½æ˜¯å±äºClassç±»çš„å¯¹è±¡ã€‚ä¸ºä¸ç»å¸¸æ„ä¹‰ä¸Šçš„å¯¹è±¡ç›¸åŒºåˆ†ï¼Œåœ¨æ­¤ç§°ä¹‹ä¸º&quot;ç±»å¯¹è±¡&quot;ã€‚ 5ã€public boolean equals(Object obj);==ä¸equalsåœ¨ Java ä¸­ç»å¸¸è¢«ä½¿ç”¨ï¼Œå¤§å®¶ä¹Ÿéƒ½çŸ¥é“==ä¸equalsçš„åŒºåˆ«ï¼š ==è¡¨ç¤ºçš„æ˜¯å˜é‡å€¼å®Œæˆç›¸åŒï¼ˆå¯¹äºåŸºç¡€ç±»å‹ï¼Œåœ°å€ä¸­å­˜å‚¨çš„æ˜¯å€¼ï¼Œå¼•ç”¨ç±»å‹åˆ™å­˜å‚¨æŒ‡å‘å®é™…å¯¹è±¡çš„åœ°å€ï¼‰ equalsè¡¨ç¤ºçš„æ˜¯å¯¹è±¡çš„å†…å®¹å®Œå…¨ç›¸åŒï¼Œæ­¤å¤„çš„å†…å®¹å¤šæŒ‡å¯¹è±¡çš„ç‰¹å¾/å±æ€§ã€‚ å®é™…ä¸Šï¼Œä¸Šé¢è¯´æ³•æ˜¯ä¸ä¸¥è°¨çš„ï¼Œæ›´å¤šçš„åªæ˜¯å¸¸è§äºStringç±»ä¸­ã€‚é¦–å…ˆçœ‹ä¸€ä¸‹Objectç±»ä¸­å…³äºequals()æ–¹æ³•çš„å®šä¹‰ï¼š 123public boolean equals(Object obj) &#123; return (this == obj);&#125; ç”±æ­¤å¯è§ï¼ŒObjectåŸç”Ÿçš„equals()æ–¹æ³•å†…éƒ¨è°ƒç”¨çš„æ­£æ˜¯==ï¼Œä¸==å…·æœ‰ç›¸åŒçš„å«ä¹‰ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œä¸ºä»€ä¹ˆè¿˜è¦å®šä¹‰æ­¤equals()æ–¹æ³•ï¼Ÿ equlas()æ–¹æ³•çš„æ­£ç¡®ç†è§£åº”è¯¥æ˜¯ï¼šåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚é‚£ä¹ˆåˆ¤æ–­å¯¹è±¡ç›¸ç­‰çš„æ ‡å°ºåˆæ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä¸Šï¼Œåœ¨Objectç±»ä¸­ï¼Œæ­¤æ ‡å°ºå³ä¸º==ã€‚å½“ç„¶ï¼Œè¿™ä¸ªæ ‡å°ºä¸æ˜¯å›ºå®šçš„ï¼Œå…¶ä»–ç±»ä¸­å¯ä»¥æŒ‰ç…§å®é™…çš„éœ€è¦å¯¹æ­¤æ ‡å°ºå«ä¹‰è¿›è¡Œé‡å®šä¹‰ã€‚å¦‚Stringç±»ä¸­åˆ™æ˜¯ä¾æ®å­—ç¬¦ä¸²å†…å®¹æ˜¯å¦ç›¸ç­‰æ¥é‡å®šä¹‰äº†æ­¤æ ‡å°ºå«ä¹‰ã€‚å¦‚æ­¤å¯ä»¥å¢åŠ ç±»çš„åŠŸèƒ½å‹å’Œå®é™…ç¼–ç çš„çµæ´»æ€§ã€‚å½“ç„¶äº†ï¼Œå¦‚æœè‡ªå®šä¹‰çš„ç±»æ²¡æœ‰é‡å†™equals()æ–¹æ³•æ¥é‡æ–°å®šä¹‰æ­¤æ ‡å°ºï¼Œé‚£ä¹ˆé»˜è®¤çš„å°†æ˜¯å…¶çˆ¶ç±»çš„equals()ï¼Œç›´åˆ°ObjectåŸºç±»ã€‚ String ç±»çš„ equals(): 123456789101112131415161718192021public boolean equals(Object anObject) &#123; if (this == anObject) &#123; return true; &#125; if (anObject instanceof String) &#123; String anotherString = (String)anObject; int n = value.length; if (n == anotherString.value.length) &#123; char v1[] = value; char v2[] = anotherString.value; int i = 0; while (n-- != 0) &#123; if (v1[i] != v2[i]) return false; i++; &#125; return true; &#125; &#125; return false; &#125; å¦‚ä¸‹åœºæ™¯çš„å®é™…ä¸šåŠ¡éœ€æ±‚ï¼Œå¯¹äºUser beanï¼Œç”±å®é™…çš„ä¸šåŠ¡éœ€æ±‚å¯çŸ¥å½“å±æ€§uidç›¸åŒæ—¶ï¼Œè¡¨ç¤ºçš„æ˜¯åŒä¸€ä¸ªUserï¼Œå³ä¸¤ä¸ªUserå¯¹è±¡ç›¸ç­‰ã€‚åˆ™å¯ä»¥é‡å†™equalsä»¥é‡å®šä¹‰Userå¯¹è±¡ç›¸ç­‰çš„æ ‡å°ºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041public class User &#123; private int uid; private String name; private int age; public int getUid() &#123; return uid; &#125; public void setUid(int uid) &#123; this.uid = uid; &#125; protected String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; @Override public boolean equals(Object obj) &#123; if (obj == null || !(obj instanceof User)) &#123; return false; &#125; if (((User) obj).getUid() == this.getUid()) &#123; return true; &#125; return false; &#125;&#125; 123456789101112131415public class ObjectTest implements Cloneable &#123; public static void main(String[] args) &#123; User u1 = new User(); u1.setUid(111); u1.setName(\"å¼ ä¸‰\"); User u2 = new User(); u2.setUid(111); u2.setName(\"å¼ ä¸‰ä¸°\"); System.out.println(u1.equals(u2)); //è¿”å›true &#125;&#125; ObjectTestä¸­æ‰“å°å‡ºtrueï¼Œå› ä¸ºUserç±»å®šä¹‰ä¸­é‡å†™äº†equals()æ–¹æ³•ï¼Œè¿™å¾ˆå¥½ç†è§£ï¼Œå¾ˆå¯èƒ½å¼ ä¸‰æ˜¯ä¸€ä¸ªäººå°åï¼Œå¼ ä¸‰ä¸°æ‰æ˜¯å…¶å¤§åï¼Œåˆ¤æ–­è¿™ä¸¤ä¸ªäººæ˜¯ä¸æ˜¯åŒä¸€ä¸ªäººï¼Œè¿™æ—¶åªç”¨åˆ¤æ–­uidæ˜¯å¦ç›¸åŒå³å¯ã€‚ å¦‚ä¸Šé‡å†™equalsæ–¹æ³•è¡¨é¢ä¸Šçœ‹ä¸Šå»æ˜¯å¯ä»¥äº†ï¼Œå®åˆ™ä¸ç„¶ã€‚å› ä¸ºå®ƒç ´åäº†Javaä¸­çš„çº¦å®šï¼šé‡å†™equals()æ–¹æ³•å¿…é¡»é‡å†™hasCode()æ–¹æ³• è¡¥å…… ç­‰ä»·å…³ç³» è‡ªåæ€§ 1x.equals(x); // true å¯¹ç§°æ€§ 1x.equals(y) == y.equals(x); // true ä¼ é€’æ€§ 12if (x.equals(y) &amp;&amp; y.equals(z)) x.equals(z); // true; ä¸€è‡´æ€§ 12å¤šæ¬¡è°ƒç”¨ equals() æ–¹æ³•ç»“æœä¸å˜x.equals(y) == x.equals(y); // true ä¸ null çš„æ¯”è¾ƒ 12å¯¹ä»»ä½•ä¸æ˜¯ null çš„å¯¹è±¡ x è°ƒç”¨ x.equals(null) ç»“æœéƒ½ä¸º falsex.equals(null); // false; equals() ä¸ == å¯¹äºåŸºæœ¬ç±»å‹ï¼Œ== åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼ŒåŸºæœ¬ç±»å‹æ²¡æœ‰ equals() æ–¹æ³•ã€‚ å¯¹äºå¼•ç”¨ç±»å‹ï¼Œ== åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ equals() åˆ¤æ–­å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦ç­‰ä»·ã€‚ 1234Integer x = new Integer(1);Integer y = new Integer(1);System.out.println(x.equals(y)); // trueSystem.out.println(x == y); // false 6ã€public native int hashCode();hashCode()æ–¹æ³•è¿”å›ä¸€ä¸ªæ•´å½¢æ•°å€¼ï¼Œè¡¨ç¤ºè¯¥å¯¹è±¡çš„å“ˆå¸Œç å€¼ã€‚ hashCode()å…·æœ‰å¦‚ä¸‹çº¦å®šï¼š åœ¨Javaåº”ç”¨ç¨‹åºç¨‹åºæ‰§è¡ŒæœŸé—´ï¼Œå¯¹äºåŒä¸€å¯¹è±¡å¤šæ¬¡è°ƒç”¨hashCode()æ–¹æ³•æ—¶ï¼Œå…¶è¿”å›çš„å“ˆå¸Œç æ˜¯ç›¸åŒçš„ï¼Œå‰ææ˜¯å°†å¯¹è±¡è¿›è¡Œequalsæ¯”è¾ƒæ—¶æ‰€ç”¨çš„æ ‡å°ºä¿¡æ¯æœªåšä¿®æ”¹ã€‚åœ¨Javaåº”ç”¨ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œåˆ°å¦å¤–ä¸€æ¬¡æ‰§è¡Œï¼ŒåŒä¸€å¯¹è±¡çš„hashCode()è¿”å›çš„å“ˆå¸Œç æ— é¡»ä¿æŒä¸€è‡´ï¼› å¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼ˆä¾æ®ï¼šè°ƒç”¨equals()æ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå¯¹è±¡è°ƒç”¨hashCode()è¿”å›çš„å“ˆå¸Œç ä¹Ÿå¿…é¡»ç›¸ç­‰ï¼› åä¹‹ï¼Œä¸¤ä¸ªå¯¹è±¡è°ƒç”¨hasCode()è¿”å›çš„å“ˆå¸Œç ç›¸ç­‰ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç›¸ç­‰ã€‚ ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæ–°å»ºäº†ä¸¤ä¸ªç­‰ä»·çš„å¯¹è±¡ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ° HashSet ä¸­ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸¤ä¸ªå¯¹è±¡å½“æˆä¸€æ ·çš„ï¼Œåªåœ¨é›†åˆä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å› ä¸º EqualExample æ²¡æœ‰å®ç° hasCode() æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸¤ä¸ªå¯¹è±¡çš„æ•£åˆ—å€¼æ˜¯ä¸åŒçš„ï¼Œæœ€ç»ˆå¯¼è‡´é›†åˆæ·»åŠ äº†ä¸¤ä¸ªç­‰ä»·çš„å¯¹è±¡ã€‚ 1234567EqualExample e1 = new EqualExample(1, 1, 1);EqualExample e2 = new EqualExample(1, 1, 1);System.out.println(e1.equals(e2)); // trueHashSet&lt;EqualExample&gt; set = new HashSet&lt;&gt;();set.add(e1);set.add(e2);System.out.println(set.size()); // 2 ç†æƒ³çš„æ•£åˆ—å‡½æ•°åº”å½“å…·æœ‰å‡åŒ€æ€§ï¼Œå³ä¸ç›¸ç­‰çš„å¯¹è±¡åº”å½“å‡åŒ€åˆ†å¸ƒåˆ°æ‰€æœ‰å¯èƒ½çš„æ•£åˆ—å€¼ä¸Šã€‚è¿™å°±è¦æ±‚äº†æ•£åˆ—å‡½æ•°è¦æŠŠæ‰€æœ‰åŸŸçš„å€¼éƒ½è€ƒè™‘è¿›æ¥ï¼Œå¯ä»¥å°†æ¯ä¸ªåŸŸéƒ½å½“æˆ R è¿›åˆ¶çš„æŸä¸€ä½ï¼Œç„¶åç»„æˆä¸€ä¸ª R è¿›åˆ¶çš„æ•´æ•°ã€‚R ä¸€èˆ¬å– 31ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¥‡ç´ æ•°ï¼Œå¦‚æœæ˜¯å¶æ•°çš„è¯ï¼Œå½“å‡ºç°ä¹˜æ³•æº¢å‡ºï¼Œä¿¡æ¯å°±ä¼šä¸¢å¤±ï¼Œå› ä¸ºä¸ 2 ç›¸ä¹˜ç›¸å½“äºå‘å·¦ç§»ä¸€ä½ã€‚ ä¸€ä¸ªæ•°ä¸ 31 ç›¸ä¹˜å¯ä»¥è½¬æ¢æˆç§»ä½å’Œå‡æ³•ï¼š31*x == (x&lt;&lt;5)-xï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œè¿™ä¸ªä¼˜åŒ–ã€‚ 12345678@Overridepublic int hashCode() &#123; int result = 17; result = 31 * result + x; result = 31 * result + y; result = 31 * result + z; return result;&#125; 7ã€public String toString();toString()æ–¹æ³•è¿”å›è¯¥å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºã€‚å…ˆçœ‹ä¸€ä¸‹Objectä¸­çš„å…·ä½“æ–¹æ³•ä½“ï¼š 123public String toString() &#123; return getClass().getName() + \"@\" + Integer.toHexString(hashCode());&#125; toString()æ–¹æ³•ç›¸ä¿¡å¤§å®¶éƒ½ç»å¸¸ç”¨åˆ°ï¼Œå³ä½¿æ²¡æœ‰æ˜¾å¼è°ƒç”¨ï¼Œä½†å½“æˆ‘ä»¬ä½¿ç”¨System.out.println(obj)æ—¶ï¼Œå…¶å†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡toString()æ¥å®ç°çš„ã€‚ getClass()è¿”å›å¯¹è±¡çš„ç±»å¯¹è±¡ï¼ŒgetClassName()ä»¥Stringå½¢å¼è¿”å›ç±»å¯¹è±¡çš„åç§°ï¼ˆå«åŒ…åï¼‰ã€‚Integer.toHexString(hashCode())åˆ™æ˜¯ä»¥å¯¹è±¡çš„å“ˆå¸Œç ä¸ºå®å‚ï¼Œä»¥16è¿›åˆ¶æ— ç¬¦å·æ•´æ•°å½¢å¼è¿”å›æ­¤å“ˆå¸Œç çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚ å› æ­¤ï¼štoString()æ˜¯ç”±å¯¹è±¡çš„ç±»å‹å’Œå…¶å“ˆå¸Œç å”¯ä¸€ç¡®å®šï¼ŒåŒä¸€ç±»å‹ä½†ä¸ç›¸ç­‰çš„ä¸¤ä¸ªå¯¹è±¡åˆ†åˆ«è°ƒç”¨toString()æ–¹æ³•è¿”å›çš„ç»“æœå¯èƒ½ç›¸åŒã€‚ 8~12ã€wait(â€¦) / notify() / notifyAll()ä¸€è¯´åˆ°wait(...) / notify() | notifyAll()å‡ ä¸ªæ–¹æ³•ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯çº¿ç¨‹ã€‚ç¡®å®ï¼Œè¿™å‡ ä¸ªæ–¹æ³•ä¸»è¦ç”¨äºjavaå¤šçº¿ç¨‹ä¹‹é—´çš„åä½œã€‚å…ˆå…·ä½“çœ‹ä¸‹è¿™å‡ ä¸ªæ–¹æ³•çš„ä¸»è¦å«ä¹‰ï¼š wait()ï¼šè°ƒç”¨æ­¤æ–¹æ³•æ‰€åœ¨çš„å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°åœ¨å…¶ä»–çº¿ç¨‹ä¸Šè°ƒç”¨æ­¤æ–¹æ³•çš„ä¸»è°ƒï¼ˆæŸä¸€å¯¹è±¡ï¼‰çš„notify()/notifyAll()æ–¹æ³•ã€‚ wait(long timeout)/wait(long timeout, int nanos)ï¼šè°ƒç”¨æ­¤æ–¹æ³•æ‰€åœ¨çš„å½“å‰çº¿ç¨‹ç­‰å¾…ï¼Œç›´åˆ°åœ¨å…¶ä»–çº¿ç¨‹ä¸Šè°ƒç”¨æ­¤æ–¹æ³•çš„ä¸»è°ƒï¼ˆæŸä¸€å¯¹è±¡ï¼‰çš„notify()/notifyAll()æ–¹æ³•ï¼Œæˆ–è¶…è¿‡æŒ‡å®šçš„è¶…æ—¶æ—¶é—´é‡ã€‚ notify()/notifyAll()ï¼šå”¤é†’åœ¨æ­¤å¯¹è±¡ç›‘è§†å™¨ä¸Šç­‰å¾…çš„å•ä¸ªçº¿ç¨‹/æ‰€æœ‰çº¿ç¨‹ã€‚ wait(...) / notify() | notifyAll()ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯é…å¥—ä½¿ç”¨ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public class ThreadTest &#123; /** * @param args */ public static void main(String[] args) &#123; // TODO Auto-generated method stub MyRunnable r = new MyRunnable(); Thread t = new Thread(r); t.start(); synchronized (r) &#123; try &#123; System.out.println(\"main thread ç­‰å¾…tçº¿ç¨‹æ‰§è¡Œå®Œ\"); r.wait(); System.out.println(\"è¢«notityå”¤é†’ï¼Œå¾—ä»¥ç»§ç»­æ‰§è¡Œ\"); &#125; catch (InterruptedException e) &#123; // TODO Auto-generated catch block e.printStackTrace(); System.out.println(\"main thread æœ¬æƒ³ç­‰å¾…ï¼Œä½†è¢«æ„å¤–æ‰“æ–­äº†\"); &#125; System.out.println(\"çº¿ç¨‹tæ‰§è¡Œç›¸åŠ ç»“æœ\" + r.getTotal()); &#125; &#125;&#125;class MyRunnable implements Runnable &#123; private int total; @Override public void run() &#123; // TODO Auto-generated method stub synchronized (this) &#123; System.out.println(\"Thread name is:\" + Thread.currentThread().getName()); for (int i = 0; i &lt; 10; i++) &#123; total += i; &#125; notify(); System.out.println(\"æ‰§è¡ŒnotifååŒæ­¥ä»£ç å—ä¸­ä¾ç„¶å¯ä»¥ç»§ç»­æ‰§è¡Œç›´è‡³å®Œæ¯•\"); &#125; System.out.println(\"æ‰§è¡Œnotifåä¸”åŒæ­¥ä»£ç å—å¤–çš„ä»£ç æ‰§è¡Œæ—¶æœºå–å†³äºçº¿ç¨‹è°ƒåº¦\"); &#125; public int getTotal() &#123; return total; &#125;&#125; è¿è¡Œç»“æœï¼š 123456main thread ç­‰å¾…tçº¿ç¨‹æ‰§è¡Œå®ŒThread name is:Thread-0æ‰§è¡ŒnotifååŒæ­¥ä»£ç å—ä¸­ä¾ç„¶å¯ä»¥ç»§ç»­æ‰§è¡Œç›´è‡³å®Œæ¯•æ‰§è¡Œnotifåä¸”åŒæ­¥ä»£ç å—å¤–çš„ä»£ç æ‰§è¡Œæ—¶æœºå–å†³äºçº¿ç¨‹è°ƒåº¦ //æ­¤è¡Œè¾“å‡ºä½ç½®æœ‰å…·ä½“çš„JVMçº¿ç¨‹è°ƒåº¦å†³å®šï¼Œæœ‰å¯èƒ½æœ€åæ‰§è¡Œè¢«notityå”¤é†’ï¼Œå¾—ä»¥ç»§ç»­æ‰§è¡Œçº¿ç¨‹tæ‰§è¡Œç›¸åŠ ç»“æœ45 æ—¢ç„¶æ˜¯ä½œç”¨äºå¤šçº¿ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆå´æ˜¯Objectè¿™ä¸ªåŸºç±»æ‰€å…·æœ‰çš„æ–¹æ³•ï¼ŸåŸå› åœ¨äºç†è®ºä¸Šä»»ä½•å¯¹è±¡éƒ½å¯ä»¥è§†ä¸ºçº¿ç¨‹åŒæ­¥ä¸­çš„ç›‘å¬å™¨ï¼Œä¸”wait(...)/notify()|notifyAll()æ–¹æ³•åªèƒ½åœ¨åŒæ­¥ä»£ç å—ä¸­æ‰èƒ½ä½¿ç”¨ã€‚ ä»ä¸Šè¿°ä¾‹å­çš„è¾“å‡ºç»“æœä¸­å¯ä»¥å¾—å‡ºå¦‚ä¸‹ç»“è®ºï¼š wait(...)æ–¹æ³•è°ƒç”¨åå½“å‰çº¿ç¨‹å°†ç«‹å³é˜»å¡ï¼Œä¸”é‡Šæ”¾å…¶æ‰€æŒæœ‰çš„åŒæ­¥ä»£ç å—ä¸­çš„é”ï¼Œç›´åˆ°è¢«å”¤é†’æˆ–è¶…æ—¶æˆ–æ‰“æ–­åä¸”é‡æ–°è·å–åˆ°é”åæ‰èƒ½ç»§ç»­æ‰§è¡Œï¼› notify()/notifyAll()æ–¹æ³•è°ƒç”¨åï¼Œå…¶æ‰€åœ¨çº¿ç¨‹ä¸ä¼šç«‹å³é‡Šæ”¾æ‰€æŒæœ‰çš„é”ï¼Œç›´åˆ°å…¶æ‰€åœ¨åŒæ­¥ä»£ç å—ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œæ­¤æ—¶é‡Šæ”¾é”ï¼Œå› æ­¤ï¼Œå¦‚æœå…¶åŒæ­¥ä»£ç å—åè¿˜æœ‰ä»£ç ï¼Œå…¶æ‰§è¡Œåˆ™ä¾èµ–äºJVMçš„çº¿ç¨‹è°ƒåº¦ã€‚ åœ¨Javaæºç ä¸­ï¼Œå¯ä»¥çœ‹åˆ°wait()å…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š 123public final void wait() throws InterruptedException &#123; wait(0);&#125; ä¸”wait(long timeout, int nanos)æ–¹æ³•å®šä¹‰å†…éƒ¨å®è´¨ä¸Šä¹Ÿæ˜¯é€šè¿‡è°ƒç”¨wait(long timeout)å®Œæˆã€‚è€Œwait(long timeout)æ˜¯ä¸€ä¸ªnativeæ–¹æ³•ã€‚å› æ­¤ï¼Œwait(...)æ–¹æ³•æœ¬è´¨ä¸Šéƒ½æ˜¯nativeæ–¹å¼å®ç°ã€‚ notify()/notifyAll()æ–¹æ³•ä¹Ÿéƒ½æ˜¯nativeæ–¹æ³•ã€‚ 13ã€protected void finalize();finalizeæ–¹æ³•ä¸»è¦ä¸Javaåƒåœ¾å›æ”¶æœºåˆ¶æœ‰å…³ã€‚é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹finalizedæ–¹æ³•åœ¨Objectä¸­çš„å…·ä½“å®šä¹‰ï¼š 1protected void finalize() throws Throwable &#123; &#125; æˆ‘ä»¬å‘ç°Objectç±»ä¸­finalizeæ–¹æ³•è¢«å®šä¹‰æˆä¸€ä¸ªç©ºæ–¹æ³•ï¼Œä¸ºä»€ä¹ˆè¦å¦‚æ­¤å®šä¹‰å‘¢ï¼Ÿfinalizeæ–¹æ³•çš„è°ƒç”¨æ—¶æœºæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ é¦–å…ˆï¼ŒObjectä¸­å®šä¹‰finalizeæ–¹æ³•è¡¨æ˜Javaä¸­æ¯ä¸€ä¸ªå¯¹è±¡éƒ½å°†å…·æœ‰finalizeè¿™ç§è¡Œä¸ºï¼Œå…¶å…·ä½“è°ƒç”¨æ—¶æœºåœ¨ï¼šJVMå‡†å¤‡å¯¹æ­¤å¯¹å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´è¿›è¡Œåƒåœ¾å›æ”¶å‰ï¼Œå°†è¢«è°ƒç”¨ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œæ­¤æ–¹æ³•å¹¶ä¸æ˜¯ç”±æˆ‘ä»¬ä¸»åŠ¨å»è°ƒç”¨çš„ï¼ˆè™½ç„¶å¯ä»¥ä¸»åŠ¨å»è°ƒç”¨ï¼Œæ­¤æ—¶ä¸å…¶ä»–è‡ªå®šä¹‰æ–¹æ³•æ— å¼‚ï¼‰ã€‚","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Javaå…³é”®å­—finalå’Œstatic","slug":"Javaå…³é”®å­—finalå’Œstatic","date":"2017-09-02T07:31:51.000Z","updated":"2018-08-24T07:42:38.998Z","comments":true,"path":"Javaå…³é”®å­—finalå’Œstatic.html","link":"","permalink":"http://xiaoqinghua.site/Javaå…³é”®å­—finalå’Œstatic.html","excerpt":"","text":"å…³é”®å­—final1ã€æ•°æ®ï¼š å£°æ˜æ•°æ®ä¸ºå¸¸é‡ï¼Œå¯ä»¥æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨è¿è¡Œæ—¶è¢«åˆå§‹åŒ–åä¸èƒ½è¢«æ”¹å˜çš„å¸¸é‡ã€‚ å¯¹äºåŸºæœ¬ç±»å‹ï¼Œfinal ä½¿æ•°å€¼ä¸å˜ï¼› å¯¹äºå¼•ç”¨ç±»å‹ï¼Œfinal ä½¿å¼•ç”¨ä¸å˜ï¼Œä¹Ÿå°±ä¸èƒ½å¼•ç”¨å…¶å®ƒå¯¹è±¡ï¼Œä½†æ˜¯è¢«å¼•ç”¨çš„å¯¹è±¡æœ¬èº«æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚ 1234final int x = 1;// x = 2; // cannot assign value to final variable 'x'final A y = new A();y.a = 1; 2ã€æ–¹æ³•ï¼š å£°æ˜æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚ private æ–¹æ³•éšå¼åœ°è¢«æŒ‡å®šä¸º finalï¼Œå¦‚æœåœ¨å­ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å’ŒåŸºç±»ä¸­çš„ä¸€ä¸ª private æ–¹æ³•ç­¾åç›¸åŒï¼Œæ­¤æ—¶å­ç±»çš„æ–¹æ³•ä¸æ˜¯é‡å†™åŸºç±»æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨å­ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚ 3ã€ç±»ï¼š å£°æ˜ç±»ä¸å…è®¸è¢«ç»§æ‰¿ã€‚ static1ã€é™æ€å˜é‡ï¼š é™æ€å˜é‡ï¼šåˆç§°ä¸ºç±»å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå˜é‡å±äºç±»çš„ï¼Œç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å…±äº«é™æ€å˜é‡ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è®¿é—®å®ƒï¼›é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä»½ã€‚ å®ä¾‹å˜é‡ï¼šæ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å°±ä¼šäº§ç”Ÿä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå®ƒä¸è¯¥å®ä¾‹åŒç”Ÿå…±æ­»ã€‚ 1234567891011public class A &#123; private int x; // å®ä¾‹å˜é‡ private static int y; // é™æ€å˜é‡ public static void main(String[] args) &#123; // int x = A.x; // Non-static field 'x' cannot be referenced from a static context A a = new A(); int x = a.x; int y = A.y; &#125;&#125; 2ã€é™æ€æ–¹æ³•ï¼š é™æ€æ–¹æ³•åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å­˜åœ¨äº†ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å®ä¾‹ã€‚æ‰€ä»¥é™æ€æ–¹æ³•å¿…é¡»æœ‰å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸èƒ½æ˜¯æŠ½è±¡æ–¹æ³•ï¼ˆabstractï¼‰ã€‚ 12345public abstract class A &#123; public static void func1()&#123; &#125; // public abstract static void func2(); // Illegal combination of modifiers: 'abstract' and 'static'&#125; åªèƒ½è®¿é—®æ‰€å±ç±»çš„é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ï¼Œæ–¹æ³•ä¸­ä¸èƒ½æœ‰ this å’Œ super å…³é”®å­—ã€‚ 12345678910public class A &#123; private static int x; private int y; public static void func1()&#123; int a = x; // int b = y; // Non-static field 'y' cannot be referenced from a static context // int b = this.y; // 'A.this' cannot be referenced from a static context &#125;&#125; 3ã€é™æ€è¯­å¥å—ï¼š é™æ€è¯­å¥å—åœ¨ç±»åˆå§‹åŒ–æ—¶è¿è¡Œä¸€æ¬¡ã€‚ 1234567891011public class A &#123; static &#123; System.out.println(\"123\"); &#125; public static void main(String[] args) &#123; A a1 = new A(); A a2 = new A(); &#125;&#125;123 4ã€é™æ€å†…éƒ¨ç±»ï¼š éé™æ€å†…éƒ¨ç±»ä¾èµ–äºå¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œè€Œé™æ€å†…éƒ¨ç±»ä¸éœ€è¦ã€‚ 1234567891011121314public class OuterClass &#123; class InnerClass &#123; &#125; static class StaticInnerClass &#123; &#125; public static void main(String[] args) &#123; // InnerClass innerClass = new InnerClass(); // 'OuterClass.this' cannot be referenced from a static context OuterClass outerClass = new OuterClass(); InnerClass innerClass = outerClass.new InnerClass(); StaticInnerClass staticInnerClass = new StaticInnerClass(); &#125;&#125; é™æ€å†…éƒ¨ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€çš„å˜é‡å’Œæ–¹æ³•ã€‚ 5ã€é™æ€å¯¼åŒ…ï¼š åœ¨ä½¿ç”¨é™æ€å˜é‡å’Œæ–¹æ³•æ—¶ä¸ç”¨å†æŒ‡æ˜ ClassNameï¼Œä»è€Œç®€åŒ–ä»£ç ï¼Œä½†å¯è¯»æ€§å¤§å¤§é™ä½ã€‚ 1import static com.xxx.ClassName.* 6ã€åˆå§‹åŒ–é¡ºåºï¼š é™æ€å˜é‡å’Œé™æ€è¯­å¥å—ä¼˜å…ˆäºå®ä¾‹å˜é‡å’Œæ™®é€šè¯­å¥å—ï¼Œé™æ€å˜é‡å’Œé™æ€è¯­å¥å—çš„åˆå§‹åŒ–é¡ºåºå–å†³äºå®ƒä»¬åœ¨ä»£ç ä¸­çš„é¡ºåºã€‚ 12345678public static String staticField = \"é™æ€å˜é‡\";static &#123; System.out.println(\"é™æ€è¯­å¥å—\");&#125;public String field = \"å®ä¾‹å˜é‡\";&#123; System.out.println(\"æ™®é€šè¯­å¥å—\");&#125; æœ€åæ‰æ˜¯æ„é€ å‡½æ•°çš„åˆå§‹åŒ–ã€‚ 123public InitialOrderTest() &#123; System.out.println(\"æ„é€ å‡½æ•°\");&#125; å­˜åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ–é¡ºåºä¸ºï¼š 1234561 çˆ¶ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰2 å­ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰3 çˆ¶ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰4 çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰5 å­ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰6 å­ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Java æŠ½è±¡ç±»å’Œæ¥å£","slug":"JavaæŠ½è±¡ç±»æ¥å£","date":"2017-08-27T11:56:48.000Z","updated":"2018-08-24T14:20:25.347Z","comments":true,"path":"JavaæŠ½è±¡ç±»æ¥å£.html","link":"","permalink":"http://xiaoqinghua.site/JavaæŠ½è±¡ç±»æ¥å£.html","excerpt":"","text":"æŠ½è±¡ç±» å½“ç¼–å†™ä¸€ä¸ªç±»æ—¶ï¼Œå¸¸å¸¸ä¼šä¸ºè¯¥ç±»å®šä¹‰ä¸€äº›æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•ç”¨ä»¥æè¿°è¯¥ç±»çš„è¡Œä¸ºæ–¹å¼ï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•éƒ½æœ‰å…·ä½“çš„æ–¹æ³•ä½“ã€‚ä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒæŸä¸ªçˆ¶ç±»åªæ˜¯çŸ¥é“å…¶å­ç±»åº”è¯¥åŒ…å«æ€æ ·çš„æ–¹æ³•ï¼Œä½†æ— æ³•å‡†ç¡®åœ°çŸ¥é“è¿™äº›å­ç±»å¦‚ä½•å®ç°è¿™äº›æ–¹æ³•ã€‚ä½¿ç”¨æŠ½è±¡æ–¹æ³•å³å¯æ»¡è¶³è¯¥è¦æ±‚ï¼šæŠ½è±¡æ–¹æ³•æ˜¯åªæœ‰æ–¹æ³•ç­¾åï¼ˆæ–¹æ³•å+å½¢å‚åˆ—è¡¨ï¼‰ï¼Œæ²¡æœ‰æ–¹æ³•å®ç°çš„æ–¹æ³• æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»å¿…é¡»ä½¿ç”¨abstractä¿®é¥°ç¬¦æ¥å®šä¹‰ï¼Œæœ‰æŠ½è±¡æ–¹æ³•çš„ç±»åªèƒ½è¢«å®šä¹‰æˆæŠ½è±¡ç±»ï¼ŒæŠ½è±¡ç±»é‡Œå¯ä»¥æ²¡æœ‰æŠ½è±¡æ–¹æ³• æŠ½è±¡æ–¹æ³•å’ŒæŠ½è±¡ç±»çš„è§„åˆ™å¦‚ä¸‹ï¼š æŠ½è±¡ç±»å¿…é¡»ä½¿ç”¨abstractä¿®é¥°ç¬¦æ¥ä¿®é¥°ï¼ŒæŠ½è±¡æ–¹æ³•ä¹Ÿå¿…é¡»ä½¿ç”¨abstractä¿®é¥°ç¬¦æ¥ä¿®é¥°ï¼ŒæŠ½è±¡æ–¹æ³•ä¸èƒ½æœ‰æ–¹æ³•ä½“ æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œæ— æ³•ä½¿ç”¨newå…³é”®å­—æ¥è°ƒç”¨æŠ½è±¡ç±»çš„æ„é€ å™¨åˆ›å»ºæŠ½è±¡ç±»çš„å®ä¾‹ã€‚å³ä½¿æŠ½è±¡ç±»é‡Œä¸åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œè¿™ä¸ªæŠ½è±¡ç±»ä¹Ÿä¸èƒ½åˆ›å»ºå®ä¾‹ æŠ½è±¡ç±»å¯ä»¥åŒ…å«æˆå‘˜å˜é‡ã€æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ï¼‰ã€æ„é€ å™¨ã€åˆå§‹åŒ–å—ã€å†…éƒ¨ç±»ï¼ˆæ¥å£ã€æšä¸¾ï¼‰5ç§æˆåˆ†ã€‚æŠ½è±¡ç±»çš„æ„é€ å™¨ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä¸»è¦æ˜¯ç”¨äºè¢«å…¶å­ç±»è°ƒç”¨ å«æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»ï¼ˆåŒ…æ‹¬ç›´æ¥å®šä¹‰äº†ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼›æˆ–ç»§æ‰¿äº†ä¸€ä¸ªæŠ½è±¡çˆ¶ç±»ï¼Œä½†æ²¡æœ‰å®Œå…¨å®ç°çˆ¶ç±»åŒ…å«çš„æŠ½è±¡æ–¹æ³•ï¼›æˆ–å®ç°äº†ä¸€ä¸ªæ¥å£ï¼Œä½†æ²¡æœ‰å®Œå…¨å®ç°æ¥å£åŒ…å«çš„æŠ½è±¡æ–¹æ³•ä¸‰ç§æƒ…å†µï¼‰åªèƒ½è¢«å®šä¹‰æˆæŠ½è±¡ç±» æŠ½è±¡ç±»ä¸ç©ºæ–¹æ³•ä½“çš„æ–¹æ³•ï¼špublic abstract void test(); public void test(){}; æŠ½è±¡ç±»ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œåªèƒ½å½“ä½œçˆ¶ç±»è¢«å…¶ä»–å­ç±»ç»§æ‰¿ å½“ä½¿ç”¨abstractä¿®é¥°ç±»æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªç±»åªèƒ½è¢«ç»§æ‰¿ï¼›å½“ä½¿ç”¨abstractä¿®é¥°æ–¹æ³•æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–¹æ³•å¿…é¡»ç”±å­ç±»æä¾›å®ç°ï¼ˆå³é‡å†™ï¼‰ã€‚è€Œfinalä¿®é¥°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ï¼Œfinalä¿®é¥°çš„æ–¹æ³•ä¸èƒ½è¢«é‡å†™ã€‚å› æ­¤finalå’Œabstractæ°¸è¿œä¸èƒ½åŒæ—¶ä½¿ç”¨ abstractä¸èƒ½ç”¨äºä¿®é¥°æˆå‘˜å˜é‡ï¼Œä¸èƒ½ç”¨äºä¿®é¥°å±€éƒ¨å˜é‡ï¼Œå³æ²¡æœ‰æŠ½è±¡å˜é‡ã€æ²¡æœ‰æŠ½è±¡æˆå‘˜å˜é‡ç­‰è¯´æ³•ï¼›abstractä¹Ÿä¸èƒ½ç”¨äºä¿®é¥°æ„é€ å™¨ï¼Œæ²¡æœ‰æŠ½è±¡æ„é€ å™¨ï¼ŒæŠ½è±¡ç±»é‡Œå®šä¹‰çš„æ„é€ å™¨åªèƒ½æ˜¯æ™®é€šæ„é€ å™¨ å½“ä½¿ç”¨staticä¿®é¥°ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œè¡¨æ˜è¿™ä¸ªæ–¹æ³•å±äºè¯¥ç±»æœ¬èº«ï¼Œå³é€šè¿‡ç±»å°±å¯è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä½†å¦‚æœè¯¥æ–¹æ³•è¢«å®šä¹‰æˆæŠ½è±¡æ–¹æ³•ï¼Œåˆ™å°†å¯¼è‡´é€šè¿‡è¯¥ç±»æ¥è°ƒç”¨è¯¥æ–¹æ³•æ—¶å‡ºç°é”™è¯¯ï¼ˆè°ƒç”¨äº†ä¸€ä¸ªæ²¡æœ‰æ–¹æ³•ä½“çš„æ–¹æ³•è‚¯å®šä¼šå¼•èµ·é”™è¯¯ï¼‰ã€‚å› æ­¤staticå’Œabstractä¸èƒ½åŒæ—¶ä¿®é¥°æŸä¸ªæ–¹æ³•ï¼Œå³æ²¡æœ‰æ‰€è°“çš„ç±»æŠ½è±¡æ–¹æ³•ã€‚ä½†staticå’Œabstractå¯ä»¥åŒæ—¶ä¿®é¥°å†…éƒ¨ç±» abstractå…³é”®å­—ä¿®é¥°çš„æ–¹æ³•å¿…é¡»è¢«å…¶å­ç±»é‡å†™æ‰æœ‰æ„ä¹‰ï¼Œå¦åˆ™è¿™ä¸ªæ–¹æ³•å°†æ°¸è¿œä¸ä¼šæœ‰æ–¹æ³•ä½“ï¼Œå› æ­¤abstractæ–¹æ³•ä¸èƒ½å®šä¹‰ä¸ºprivateè®¿é—®æƒé™ï¼Œå³privateå’Œabstractä¸èƒ½åŒæ—¶ä¿®é¥°æ–¹æ³• æŠ½è±¡ç±»çš„æ–¹æ³•æŠ½è±¡ç±»ä½“ç°çš„å°±æ˜¯ä¸€ç§æ¨¡æ¿æ¨¡å¼çš„è®¾è®¡ï¼ŒæŠ½è±¡ç±»ä½œä¸ºå¤šä¸ªå­ç±»çš„é€šç”¨æ¨¡æ¿ï¼Œå­ç±»åœ¨æŠ½è±¡ç±»çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•ã€æ”¹é€ ï¼Œä½†å­ç±»æ€»ä½“ä¸Šä¼šå¤§è‡´ä¿ç•™æŠ½è±¡ç±»çš„è¡Œä¸ºæ–¹å¼ã€‚ æ¨¡æ¿æ¨¡å¼åœ¨é¢å‘å¯¹è±¡çš„è½¯ä»¶ä¸­å¾ˆå¸¸ç”¨ï¼Œå…¶åŸç†ç®€å•ï¼Œå®ç°ä¹Ÿå¾ˆç®€å•ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨æ¨¡æ¿æ¨¡å¼çš„ä¸€äº›ç®€å•è§„åˆ™ï¼š æŠ½è±¡çˆ¶ç±»å¯ä»¥åªå®šä¹‰éœ€è¦ä½¿ç”¨çš„æŸäº›æ–¹æ³•ï¼ŒæŠŠä¸èƒ½å®ç°çš„éƒ¨åˆ†æŠ½è±¡æˆæŠ½è±¡æ–¹æ³•ï¼Œç•™ç»™å…¶å­ç±»å»å®ç° çˆ¶ç±»ä¸­å¯èƒ½åŒ…å«éœ€è¦è°ƒç”¨å…¶ä»–ç³»åˆ—æ–¹æ³•çš„æ–¹æ³•ï¼Œè¿™äº›è¢«è°ƒç”¨æ–¹æ³•æ—¢å¯ä»¥ç”±çˆ¶ç±»å®ç°ï¼Œä¹Ÿå¯ä»¥ç”±å…¶å­ç±»å®ç°ã€‚çˆ¶ç±»é‡Œæä¾›çš„æ–¹æ³•åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªé€šç”¨ç®—æ³•ï¼Œå…¶å®ç°ä¹Ÿè®¸å¹¶ä¸å®Œå…¨ç”±è‡ªèº«å®ç°ï¼Œè€Œå¿…é¡»ä¾èµ–äºå…¶å­ç±»çš„è¾…åŠ© Java8æ”¹è¿›çš„æ¥å£æŠ½è±¡ç±»æ˜¯ä»å¤šä¸ªç±»ä¸­æŠ½è±¡å‡ºæ¥çš„æ¨¡æ¿ï¼Œå¦‚æœå°†è¿™ç§æŠ½è±¡è¿›è¡Œå¾—æ›´å½»åº•ï¼Œåˆ™å¯ä»¥æç‚¼å‡ºä¸€ç§æ›´åŠ ç‰¹æ®Šçš„â€œæŠ½è±¡ç±»â€â€”â€”æ¥å£ï¼ˆinterfaceï¼‰ï¼Œæ¥å£é‡Œä¸èƒ½åŒ…å«æ™®é€šæ–¹æ³•ï¼Œæ¥å£é‡Œçš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚Java8å¯¹æ¥å£è¿›è¡Œäº†æ”¹è¿›ï¼Œå…è®¸åœ¨æ¥å£ä¸­å®šä¹‰é»˜è®¤æ–¹æ³•ï¼Œé»˜è®¤æ–¹æ³•å¯ä»¥æä¾›æ–¹æ³•å®ç° æ¥å£çš„æ¦‚å¿µæ¥å£å®šä¹‰çš„æ˜¯å¤šä¸ªç±»å…±åŒçš„å…¬å…±è¡Œä¸ºè§„èŒƒï¼Œè¿™äº›è¡Œä¸ºæ˜¯ä¸å¤–éƒ¨äº¤æµçš„é€šé“ï¼Œè¿™æ„å‘³ç€æ¥å£é‡Œé€šå¸¸æ˜¯å®šä¹‰ä¸€ç»„å…¬ç”¨æ–¹æ³•ã€‚ Java8ä¸­æ¥å£çš„å®šä¹‰123456[ä¿®é¥°ç¬¦] interface æ¥å£å extends çˆ¶æ¥å£1,çˆ¶æ¥å£2...&#123; é›¶ä¸ªåˆ°å¤šä¸ªå¸¸é‡å®šä¹‰... é›¶ä¸ªåˆ°å¤šä¸ªæŠ½è±¡æ–¹æ³•å®šä¹‰... é›¶ä¸ªåˆ°å¤šä¸ªå†…éƒ¨ç±»ã€æ¥å£ã€æšä¸¾å®šä¹‰... é›¶ä¸ªåˆ°å¤šä¸ªé»˜è®¤æ–¹æ³•æˆ–ç±»æ–¹æ³•å®šä¹‰...&#125; ä¿®é¥°ç¬¦å¯ä»¥æ˜¯publicæˆ–è€…çœç•¥ï¼Œå¦‚æœçœç•¥äº†publicè®¿é—®æ§åˆ¶ç¬¦ï¼Œåˆ™é»˜è®¤é‡‡ç”¨åŒ…æƒé™è®¿é—®æ§åˆ¶ç¬¦ï¼Œå³åªæœ‰åœ¨ç›¸åŒåŒ…ç»“æ„ä¸‹æ‰å¯ä»¥è®¿é—®è¯¥æ¥å£ æ¥å£ååº”ä¸ç±»åé‡‡ç”¨ç›¸åŒçš„å‘½åè§„åˆ™ï¼Œå³å¦‚æœä»…ä»è¯­æ³•è§’åº¦æ¥çœ‹ï¼Œæ¥å£ååªè¦æ˜¯åˆæ³•çš„æ ‡è¯†ç¬¦å³å¯ï¼›å¦‚æœè¦éµå®ˆJavaå¯è¯»æ€§è§„èŒƒï¼Œåˆ™æ¥å£ååº”ç”±å¤šä¸ªæœ‰æ„ä¹‰çš„å•è¯è¿ç¼€è€Œæˆï¼Œæ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œå•è¯ä¸å•è¯ä¹‹é—´æ— é¡»ä»»ä½•åˆ†éš”ç¬¦ã€‚æ¥å£åé€šå¸¸èƒ½å¤Ÿä½¿ç”¨å½¢å®¹è¯ã€‚ ä¸€ä¸ªæ¥å£å¯ä»¥æœ‰å¤šä¸ªç›´æ¥çˆ¶æ¥å£ï¼Œä½†æ¥å£åªèƒ½ç»§æ‰¿æ¥å£ï¼Œä¸èƒ½ç»§æ‰¿ç±»ã€‚ ç”±äºæ¥å£å®šä¹‰çš„æ˜¯ä¸€ç§è§„èŒƒï¼Œå› æ­¤æ¥å£é‡Œä¸èƒ½åŒ…å«æ„é€ å™¨å’Œåˆå§‹åŒ–å—å®šä¹‰ã€‚æ¥å£é‡Œå¯ä»¥åŒ…å«æˆå‘˜å˜é‡ï¼ˆåªèƒ½æ˜¯é™æ€å¸¸é‡ï¼‰ã€æ–¹æ³•ï¼ˆåªèƒ½æ˜¯æŠ½è±¡å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•æˆ–é»˜è®¤æ–¹æ³•ï¼‰ã€å†…éƒ¨ç±»ï¼ˆåŒ…æ‹¬å†…éƒ¨æ¥å£ã€æšä¸¾ï¼‰å®šä¹‰ æ¥å£é‡Œå®šä¹‰çš„æ˜¯å¤šä¸ªç±»å…±åŒçš„å…¬å…±è¡Œä¸ºè§„èŒƒï¼Œå› æ­¤æ¥å£é‡Œçš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬å¸¸é‡ã€æ–¹æ³•ã€å†…éƒ¨ç±»å’Œå†…éƒ¨æšä¸¾éƒ½æ˜¯publicè®¿é—®æƒé™ã€‚å®šä¹‰æ¥å£æˆå‘˜æ—¶ï¼Œå¯ä»¥çœç•¥è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œå¦‚æœæŒ‡å®šè®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œåˆ™åªèƒ½ä½¿ç”¨publicè®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ã€‚ å¯¹äºæ¥å£é‡Œå®šä¹‰çš„é™æ€å¸¸é‡è€Œè¨€ï¼Œå®ƒä»¬æ˜¯æ¥å£ç›¸å…³çš„ï¼Œå› æ­¤ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºè¿™äº›æˆå‘˜å˜é‡å¢åŠ staticå’Œfinalä¸¤ä¸ªä¿®é¥°ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¥å£ä¸­å®šä¹‰æˆå‘˜å˜é‡æ—¶ï¼Œä¸ç®¡æ˜¯å¦ä½¿ç”¨public static finalä¿®é¥°ç¬¦ï¼Œæ¥å£é‡Œçš„æˆå‘˜å˜é‡æ€»æ˜¯ä½¿ç”¨è¿™ä¸‰ä¸ªä¿®é¥°ç¬¦æ¥ä¿®é¥°ã€‚è€Œä¸”æ¥å£é‡Œæ²¡æœ‰æ„é€ å™¨å’Œåˆå§‹åŒ–å—ï¼Œå› æ­¤æ¥å£é‡Œå®šä¹‰çš„æˆå‘˜å˜é‡åªèƒ½åœ¨å®šä¹‰æ—¶æŒ‡å®šé»˜è®¤å€¼ æ¥å£é‡Œå®šä¹‰çš„å†…éƒ¨ç±»ã€å†…éƒ¨æ¥å£ã€å†…éƒ¨æšä¸¾é»˜è®¤éƒ½é‡‡ç”¨public staticä¸¤ä¸ªä¿®é¥°ç¬¦ï¼Œä¸ç®¡å®šä¹‰æ—¶æ˜¯å¦æŒ‡å®šè¿™ä¸¤ä¸ªä¿®é¥°ç¬¦ï¼Œç³»ç»Ÿéƒ½ä¼šè‡ªåŠ¨ä½¿ç”¨public staticå¯¹å®ƒä»¬è¿›è¡Œä¿®é¥° æ¥å£é‡Œå®šä¹‰çš„æ–¹æ³•åªèƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€ç±»æ–¹æ³•æˆ–é»˜è®¤æ–¹æ³•ï¼Œå› æ­¤å¦‚æœä¸æ˜¯å®šä¹‰é»˜è®¤æ–¹æ³•ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä¸ºæ™®é€šæ–¹æ³•å¢åŠ abstractä¿®é¥°ç¬¦ï¼›å®šä¹‰æ¥å£é‡Œçš„æ™®é€šæ–¹æ³•æ—¶ä¸ç®¡æ˜¯å¦ä½¿ç”¨public abstractä¿®é¥°ç¬¦ï¼Œæ¥å£é‡Œçš„æ™®é€šæ–¹æ³•æ€»æ˜¯public abstractæ¥ä¿®é¥°ã€‚æ¥å£é‡Œçš„æ™®é€šæ–¹æ³•ä¸èƒ½æœ‰æ–¹æ³•å®ç°ï¼ˆæ–¹æ³•ä½“ï¼‰ï¼›ä½†ç±»æ–¹æ³•ã€é»˜è®¤ï¼ˆdefaultï¼‰æ–¹æ³•éƒ½å¿…é¡»æœ‰æ–¹æ³•å®ç°ï¼ˆæ–¹æ³•ä½“ Java8å…è®¸åœ¨æ¥å£ä¸­å®šä¹‰ç±»æ–¹æ³•ï¼Œç±»æ–¹æ³•å¿…é¡»ä½¿ç”¨staticä¿®é¥°ï¼Œè¯¥æ–¹æ³•ä¸èƒ½ä½¿ç”¨defaultä¿®é¥°ï¼Œæ— è®ºç¨‹åºæ˜¯å¦æŒ‡å®šï¼Œç±»æ–¹æ³•æ€»æ˜¯ä½¿ç”¨publicä¿®é¥°â€”â€”å¦‚æœå¼€å‘è€…æ²¡æœ‰æŒ‡å®špublicï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºç±»æ–¹æ³•æ·»åŠ publicä¿®é¥°ç¬¦ã€‚ç±»æ–¹æ³•å¯ä»¥ç›´æ¥ä½¿ç”¨æ¥å£æ¥è°ƒç”¨ã€‚ æ¥å£çš„ç»§æ‰¿æ¥å£çš„ç»§æ‰¿å’Œç±»ç»§æ‰¿ä¸ä¸€æ ·ï¼Œæ¥å£å®Œå…¨æ”¯æŒå¤šç»§æ‰¿ï¼Œå³ä¸€ä¸ªæ¥å£å¯ä»¥æœ‰å¤šä¸ªç›´æ¥çˆ¶æ¥å£ã€‚å’Œç±»ç»§æ‰¿ç›¸ä¼¼ï¼Œå­æ¥å£æ‰©å±•æŸä¸ªçˆ¶æ¥å£ï¼Œå°†ä¼šè·å¾—çˆ¶æ¥å£é‡Œå®šä¹‰çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•ã€å¸¸é‡ã€‚ä¸€ä¸ªæ¥å£ç»§æ‰¿å¤šä¸ªçˆ¶æ¥å£æ—¶ï¼Œå¤šä¸ªçˆ¶æ¥å£æ’åœ¨extendså…³é”®å­—ä¹‹åï¼Œå¤šä¸ªçˆ¶æ¥å£ä¹‹é—´ä»¥è‹±æ–‡é€—å·ï¼ˆ,ï¼‰éš”å¼€ã€‚ ä½¿ç”¨æ¥å£æ¥å£ä¸èƒ½ç”¨äºåˆ›å»ºå®ä¾‹ï¼Œä½†æ¥å£å¯ä»¥ç”¨äºå£°æ˜å¼•ç”¨ç±»å‹å˜é‡ã€‚å½“ä½¿ç”¨æ¥å£æ¥å£°æ˜å¼•ç”¨ç±»å‹å˜é‡æ—¶ï¼Œè¿™ä¸ªå¼•ç”¨ç±»å‹å˜é‡å¿…é¡»å¼•ç”¨åˆ°å…¶å®ç°ç±»çš„å¯¹è±¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ¥å£çš„ä¸»è¦ç”¨é€”å°±æ˜¯è¢«å®ç°ç±»å®ç°ã€‚ å®šä¹‰å˜é‡ï¼Œä¹Ÿå¯ç”¨äºè¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ è°ƒç”¨æ¥å£ä¸­å®šä¹‰çš„å¸¸é‡ è¢«å…¶ä»–ç±»å®ç°ä¸€ä¸ªç±»å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ï¼Œç»§æ‰¿ä½¿ç”¨extendså…³é”®å­—ï¼Œå®ç°åˆ™ä½¿ç”¨implementså…³é”®å­— 123[ä¿®é¥°ç¬¦] class ç±»å extends çˆ¶ç±» implements æ¥å£1ï¼Œæ¥å£2&#123; ç±»ä½“éƒ¨åˆ†&#125; ä¸€ä¸ªç±»å®ç°äº†ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£ä¹‹åï¼Œè¿™ä¸ªç±»å¿…é¡»å®Œå…¨å®ç°è¿™äº›æ¥å£é‡Œæ‰€å®šä¹‰çš„å…¨éƒ¨æŠ½è±¡æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯é‡å†™è¿™äº›æŠ½è±¡æ–¹æ³•ï¼‰ï¼›å¦åˆ™ï¼Œè¯¥ç±»å°†ä¿ç•™ä»çˆ¶æ¥å£é‚£é‡Œç»§æ‰¿åˆ°çš„æŠ½è±¡æ–¹æ³•ï¼Œè¯¥ç±»ä¹Ÿå¿…é¡»å®šä¹‰æˆæŠ½è±¡ç±»ã€‚ ä¸€ä¸ªç±»å®ç°æŸä¸ªæ¥å£æ—¶ï¼Œè¯¥ç±»å°†ä¼šè·å¾—æ¥å£ä¸­å®šä¹‰çš„å¸¸é‡ï¼ˆæˆå‘˜å˜é‡ï¼‰ã€æ–¹æ³•ç­‰ï¼Œå› æ­¤å¯ä»¥æŠŠå®ç°æ¥å£ç†è§£ä¸ºä¸€ç§ç‰¹æ®Šçš„ç»§æ‰¿ï¼Œç›¸å½“äºå®ç°ç±»ç»§æ‰¿äº†ä¸€ä¸ªå½»åº•æŠ½è±¡çš„ç±»ï¼ˆç›¸å½“äºé™¤äº†é»˜è®¤æ–¹æ³•å¤–ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŠ½è±¡æ–¹æ³•çš„ç±»ï¼‰ã€‚ å®ç°æ¥å£æ–¹æ³•æ—¶ï¼Œå¿…é¡»ä½¿ç”¨publicè®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦ï¼Œå› ä¸ºæ¥å£é‡Œçš„æ–¹æ³•éƒ½æ˜¯publicçš„ï¼Œè€Œå­ç±»ï¼ˆç›¸å½“äºå®ç°ç±»ï¼‰é‡å†™çˆ¶ç±»æ–¹æ³•æ—¶è®¿é—®æƒé™åªèƒ½æ›´å¤§æˆ–è€…ç›¸ç­‰ï¼Œæ‰€ä»¥å®ç°ç±»å®ç°æ¥å£é‡Œçš„æ–¹æ³•æ—¶åªèƒ½ä½¿ç”¨publicè®¿é—®æƒé™ æ¥å£å’ŒæŠ½è±¡ç±»æ¥å£å’ŒæŠ½è±¡ç±»å¾ˆåƒï¼Œå®ƒä»¬éƒ½å…·æœ‰å¦‚ä¸‹ç‰¹å¾: æ¥å£å’ŒæŠ½è±¡ç±»éƒ½ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œå®ƒä»¬éƒ½ä½äºç»§æ‰¿æ ‘çš„é¡¶ç«¯ï¼Œç”¨äºè¢«å…¶ä»–ç±»å®ç°å’Œç»§æ‰¿ã€‚ æ¥å£å’ŒæŠ½è±¡ç±»éƒ½å¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œå®ç°æ¥å£æˆ–ç»§æ‰¿æŠ½è±¡ç±»çš„æ™®é€šå­ç±»éƒ½å¿…é¡»å®ç°è¿™äº›æŠ½è±¡æ–¹æ³•ã€‚ æ¥å£ä½œä¸ºç³»ç»Ÿä¸å¤–ç•Œäº¤äº’çš„çª—å£ï¼Œæ¥å£ä½“ç°çš„æ˜¯ä¸€ç§è§„èŒƒæŠ½è±¡ç±»ä½œä¸ºç³»ç»Ÿä¸­å¤šä¸ªå­ç±»çš„å…±åŒçˆ¶ç±»ï¼Œå®ƒæ‰€ä½“ç°çš„æ˜¯ä¸€ç§æ¨¡æ¿å¼è®¾è®¡ æ¥å£å’ŒæŠ½è±¡ç±»åœ¨ç”¨æ³•ä¸Šçš„å·®åˆ«ï¼š æ¥å£é‡Œåªèƒ½åŒ…å«æŠ½è±¡æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•ï¼Œä¸èƒ½ä¸ºæ™®é€šæ–¹æ³•æä¾›æ–¹æ³•å®ç°ï¼›æŠ½è±¡ç±»åˆ™å®Œå…¨å¯ä»¥åŒ…å«æ™®é€šæ–¹æ³• æ¥å£é‡Œä¸èƒ½å®šä¹‰é™æ€æ–¹æ³•ï¼›æŠ½è±¡ç±»é‡Œå¯ä»¥å®šä¹‰é™æ€æ–¹æ³• æ¥å£é‡Œåªèƒ½å®šä¹‰é™æ€å¸¸é‡ï¼Œä¸èƒ½å®šä¹‰æ™®é€šæˆå‘˜å˜é‡ï¼›æŠ½è±¡ç±»é‡Œåˆ™æ—¢å¯ä»¥å®šä¹‰æ™®é€šæˆå‘˜å˜é‡ï¼Œä¹Ÿå¯ä»¥å®šä¹‰é™æ€å¸¸é‡ æ¥å£é‡Œä¸åŒ…å«æ„é€ å™¨ï¼›æŠ½è±¡ç±»é‡Œå¯ä»¥åŒ…å«æ„é€ å™¨ï¼ŒæŠ½è±¡ç±»é‡Œçš„æ„é€ å™¨å¹¶ä¸æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œè€Œæ˜¯è®©å…¶å­ç±»è°ƒç”¨è¿™äº›æ„é€ å™¨æ¥å®Œæˆå±äºæŠ½è±¡ç±»çš„åˆå§‹åŒ–æ“ä½œ æ¥å£é‡Œä¸èƒ½åŒ…å«åˆå§‹åŒ–å—ï¼Œä½†æŠ½è±¡ç±»åˆ™å®Œå…¨åŒ…å«åˆå§‹åŒ–å— ä¸€ä¸ªç±»æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªç›´æ¥çˆ¶ç±»ï¼ŒåŒ…æ‹¬æŠ½è±¡ç±»ï¼›ä½†ä¸€ä¸ªç±»å¯ä»¥ç›´æ¥å®ç°å¤šä¸ªæ¥å£ï¼Œé€šè¿‡å®ç°å¤šä¸ªæ¥å£å¯ä»¥å¼¥è¡¥Javaå•ç»§æ‰¿çš„ä¸è¶³ã€‚","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Java å‚æ•°ä¼ é€’","slug":"Javaå‚æ•°ä¼ é€’","date":"2017-08-27T10:48:08.000Z","updated":"2018-08-24T07:42:27.841Z","comments":true,"path":"Javaå‚æ•°ä¼ é€’.html","link":"","permalink":"http://xiaoqinghua.site/Javaå‚æ•°ä¼ é€’.html","excerpt":"","text":"æ¦‚è¿°1.ä»€ä¹ˆæ˜¯å‚æ•°ä¼ é€’ï¼Ÿ 123è°ƒç”¨æ–¹æ³•æ—¶å‘å½¢å‚ä¼ é€’æ•°æ®çš„è¿‡ç¨‹å«åšå‚æ•°ä¼ é€’ã€‚åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æœ‰ä¸¤ç§ä¼ é€’æ–¹å¼ï¼šå€¼ä¼ é€’ä¸å¼•ç”¨ä¼ é€’ã€‚å¿…é¡»å¼ºè°ƒçš„æ˜¯ï¼Œè¿™é‡Œæåˆ°çš„ä¸¤ç§ä¼ é€’æ–¹å¼ä¸æ˜¯ä»…é™äºJavaä½¿ç”¨åˆ°çš„ä¼ é€’æ–¹å¼ï¼Œè€Œæ˜¯å‡ºç°åœ¨åŒ…æ‹¬Javaåœ¨å†…çš„å¤šç§ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¼ é€’æ–¹å¼ã€‚ 2.å˜é‡ç±»å‹ 1åœ¨Javaä¸­ï¼Œæˆ‘ä»¬å°†æŒ‡å‘åŸºæœ¬ç±»å‹æ•°æ®çš„å˜é‡ç§°ä¸ºåŸå§‹å˜é‡ï¼Œå°†æŒ‡å‘å¯¹è±¡çš„å˜é‡ç§°ä¸ºå¼•ç”¨å˜é‡ã€‚ å€¼ä¼ é€’1.ä»€ä¹ˆæ˜¯å€¼ä¼ é€’ï¼Ÿ 1å°†å˜é‡çš„å‰¯æœ¬ä¼ å…¥æ–¹æ³•ï¼Œæ–¹æ³•å†…å¤–æ“ä½œéš”ç¦»ï¼Œåœ¨æ–¹æ³•å†…å¯¹å˜é‡çš„æ“ä½œä¸ä¼šåæ˜ åˆ°æ–¹æ³•å¤–çš„å˜é‡ä¸­ã€‚ 2.åŸå§‹å˜é‡ 12345678910public void change(int b) &#123; b = 7;&#125;@Testpublic void testBasic() &#123; int a = 9; change(a); System.out.println(a);&#125; å®é™…è¾“å‡ºï¼š9 åœ¨å‚æ•°ä¼ é€’æ—¶ï¼ŒæŒ‰ç…§å€¼ä¼ é€’çš„è§„åˆ™ï¼Œå˜é‡bæ¥æ”¶ä¸€ä¸ªaçš„å‰¯æœ¬ï¼ŒåŒæ ·æŒ‡å‘å­—é¢å€¼â€œ9â€ï¼š æ¥ä¸‹æ¥ï¼Œåœ¨æ–¹æ³•å†…éƒ¨ï¼Œä¸ºbèµ‹å€¼7ï¼Œè¿™æ ·bæŒ‡å‘7ï¼Œç”±äºaä¸bæ˜¯ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„å˜é‡ï¼Œä¸¤è€…ä¹‹é—´æ²¡æœ‰å¼•ç”¨ä¸è¢«å¼•ç”¨çš„å…³ç³»ï¼Œaä¾ç„¶æŒ‡å‘9ï¼š 3.String 12345678910public void change(String str01) &#123; str01 = \"baidu\";&#125;@Testpublic void testString() &#123; String str = new String(\"www.baidu.com\"); change(str); System.out.println(str);&#125; å®é™…è¾“å‡ºï¼šwww.baidu.com åœ¨å‚æ•°ä¼ é€’æ—¶ï¼Œstrå°†è‡ªèº«çš„ä¸€ä¸ªå‰¯æœ¬ä¼ é€’ç»™str01ï¼Œè¿™æ ·str01ä¹ŸæŒ‡å‘å †ä¸­å­˜æ”¾â€œwww.baidu.comâ€çš„å¯¹è±¡ï¼š åœ¨æ–¹æ³•å†…éƒ¨ä¸ºstr01èµ‹å€¼ï¼Œè¿™æ ·str01å°±æŒ‡å‘æ–¹æ³•åŒºå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„â€baiduâ€ï¼Œsträ¾ç„¶æŒ‡å‘å †ä¸­çš„â€œwww.baidu.comâ€ï¼Œsträ¸str01æŒ‡å‘ä¸åŒçš„å¯¹è±¡ï¼Œç›¸äº’ä¹‹é—´ä¸å½±å“ï¼š è¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šjavaå°†Stringè®¾è®¡æˆä¸å¯æ”¹å˜çš„å¯¹è±¡ï¼Œå³ä¸€æ—¦Stringå¯¹è±¡åŒ…å«çš„å­—é¢å€¼å‘ç”Ÿæ”¹å˜ï¼Œjavaå°±ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶å°†å˜é‡æŒ‡å‘æ–°çš„å¯¹è±¡ã€‚ 4.StringBuilder 12345678910public void change(StringBuilder builder01) &#123; builder01.append(\" World!\");&#125;@Testpublic void testStringBuilder() &#123; StringBuilder builder = new StringBuilder(\"Hello\"); change(builder); System.out.println(builder);&#125; å®é™…è¾“å‡ºï¼šHello World! åœ¨å‚æ•°ä¼ é€’å®Œæˆä»¥åï¼Œbuilder01å˜é‡è·å¾—builderå˜é‡çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå‰¯æœ¬ä¸åŸå§‹å˜é‡æŒ‡å‘å †ä¸­åŒä¸€ä¸ªå¯¹è±¡ï¼š åœ¨æ–¹æ³•å†…éƒ¨ï¼Œå˜é‡builderæ²¡æœ‰æŒ‡å‘æ–°çš„å¯¹è±¡ï¼Œä¾ç„¶ä¸builderæŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œæ‰€ä»¥å½“builderè®¿é—®å †ä¸­åŒä¸€å¯¹è±¡æ—¶ï¼Œæ•°æ®å‘ç”Ÿæ”¹å˜ï¼š 5.è‡ªå®šä¹‰ç±»å‹ 123456789101112131415161718public class MyInner &#123; public int a;&#125;public class Test&#123; public void change(MyInner in01) &#123; in01.a = 1; &#125; @Test public void testDemain() &#123; MyInner in = new MyInner(); in.a = 9; change(in); System.out.println(in.a); &#125;&#125; å®é™…è¾“å‡ºï¼š1 æ‰§è¡Œè¿‡ç¨‹åŒStringBuilderæ‰§è¡Œè¿‡ç¨‹ç›¸åŒï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ä¸‹é¢å¯¹ä¸Šé¢çš„ä»£ç åšä¸€ç‚¹æ”¹åŠ¨ï¼Œå¦‚ä¸‹ï¼š 12345678910111213141516171819public class MyInner &#123; public int a;&#125;public class Test&#123; public void change(MyInner in01) &#123; in01=new MyInner();//ä½¿in01æŒ‡å‘ä¸€ä¸ªæ–°çš„å¯¹è±¡ in01.a = 1; &#125; @Test public void testDemain() &#123; MyInner in = new MyInner(); in.a = 9; change(in); System.out.println(in.a); &#125;&#125; å®é™…è¾“å‡ºï¼š9 å‚æ•°ä¼ é€’å®Œæˆæ—¶ï¼Œin01ä¸inæŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œin01å¯¹å¯¹è±¡çš„æ“ä½œç­‰åŒäºinå¯¹å¯¹è±¡çš„æ“ä½œï¼Œæ¥ç€åœ¨æ–¹æ³•å†…éƒ¨æ‰§è¡Œâ€in01=new MyInner();â€ï¼Œè¿™æ ·in01 å°±æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œin01æ‰€æœ‰çš„æ“ä½œéƒ½ä¸inæ— å…³äº†ï¼š ç»¼åˆä»¥ä¸Šçš„è¿è¡Œç»“æœä¸åˆ†æï¼Œå¯çŸ¥javaå‚æ•°ä¼ é€’æ–¹å¼ç¬¦åˆå€¼ä¼ é€’ã€‚ å¼•ç”¨ä¼ é€’ä»€ä¹ˆæ˜¯å¼•ç”¨ä¼ é€’ï¼Ÿ 12345å°†å˜é‡è‡ªèº«çš„å†…å­˜åœ°å€ä¼ å…¥æ–¹æ³•ä¸­ï¼Œæ–¹æ³•ä¸­çš„å˜é‡æŒ‡å‘æ–¹æ³•å¤–çš„å˜é‡ï¼Œåœ¨æ–¹æ³•ä¸­å¯¹å˜é‡çš„æ“ä½œå°±æ˜¯å¯¹æ–¹æ³•å¤–å˜é‡çš„æ“ä½œ ã€‚ä¸å†ä¸€ä¸€åˆ†æå…¶ä»–å˜é‡ç±»å‹ï¼Œåˆ†æåå¯ä»¥å‘ç°ï¼Œjavaåœ¨ä¼ é€’å‚æ•°æ—¶é‡‡ç”¨çš„ ä¸æ˜¯å¼•ç”¨ä¼ é€’ï¼Œè€Œæ˜¯å€¼ä¼ é€’ã€‚ç®€å•è®²ï¼Œå€¼ä¼ é€’æ—¶æ–¹æ³•å†…å¤–æ˜¯ä¸¤ä¸ªæ‹¥æœ‰åŒä¸€æŒ‡å‘çš„å˜é‡ï¼Œå¼•ç”¨ä¼ é€’æ—¶æ–¹æ³•å†…å¤–æ˜¯åŒä¸€ä¸ªå˜é‡ã€‚ æœ¬æ–‡è½¬è‡ª:http://www.tuicool.com/articles/niUfuqN","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Javaæ•°æ®ç±»å‹ç¼“å­˜æ± ","slug":"æ•°æ®ç±»å‹ç¼“å­˜æ± ","date":"2017-08-27T02:28:23.000Z","updated":"2018-08-24T07:45:53.514Z","comments":true,"path":"æ•°æ®ç±»å‹ç¼“å­˜æ± .html","link":"","permalink":"http://xiaoqinghua.site/æ•°æ®ç±»å‹ç¼“å­˜æ± .html","excerpt":"","text":"new Integer(123) ä¸ Integer.valueOf(123) çš„åŒºåˆ«åœ¨äºï¼š new Integer(123) æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡Integer.valueOf(123) ä¼šä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨ä¼šå–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ 123456Integer x = new Integer(123);Integer y = new Integer(123);System.out.println(x == y); // falseInteger z = Integer.valueOf(123);Integer k = Integer.valueOf(123);System.out.println(z == k); // true valueOf() æ–¹æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å…ˆåˆ¤æ–­å€¼æ˜¯å¦åœ¨ç¼“å­˜æ± ä¸­ï¼Œå¦‚æœåœ¨çš„è¯å°±ç›´æ¥è¿”å›ç¼“å­˜æ± çš„å†…å®¹ã€‚ 12345public static Integer valueOf(int i) &#123; if (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high) return IntegerCache.cache[i + (-IntegerCache.low)]; return new Integer(i);&#125; åœ¨ Java 8 ä¸­ï¼ŒInteger ç¼“å­˜æ± çš„å¤§å°é»˜è®¤ä¸º -128~127ã€‚ 1234567891011121314151617181920212223242526272829static final int low = -128;static final int high;static final Integer cache[];static &#123; // high value may be configured by property int h = 127; String integerCacheHighPropValue = sun.misc.VM.getSavedProperty(\"java.lang.Integer.IntegerCache.high\"); if (integerCacheHighPropValue != null) &#123; try &#123; int i = parseInt(integerCacheHighPropValue); i = Math.max(i, 127); // Maximum array size is Integer.MAX_VALUE h = Math.min(i, Integer.MAX_VALUE - (-low) -1); &#125; catch( NumberFormatException nfe) &#123; // If the property cannot be parsed into an int, ignore it. &#125; &#125; high = h; cache = new Integer[(high - low) + 1]; int j = low; for(int k = 0; k &lt; cache.length; k++) cache[k] = new Integer(j++); // range [-128, 127] must be interned (JLS7 5.1.7) assert IntegerCache.high &gt;= 127;&#125; ç¼–è¯‘å™¨ä¼šåœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå› æ­¤å¤šä¸ª Integer å®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºå¹¶ä¸”å€¼ç›¸åŒï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚ 123Integer m = 123;Integer n = 123;System.out.println(m == n); // true åŸºæœ¬ç±»å‹å¯¹åº”çš„ç¼“å­˜æ± å¦‚ä¸‹ï¼š 12345boolean values true and falseall byte valuesshort values between -128 and 127int values between -128 and 127char in the range \\u0000 to \\u007F åœ¨ä½¿ç”¨è¿™äº›åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ã€‚ StackOverflow : Differences between new Integer(123), Integer.valueOf(123) and just 123","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Java å†…éƒ¨ç±»","slug":"Javaå†…éƒ¨ç±»","date":"2017-08-26T07:01:58.000Z","updated":"2018-08-24T07:42:24.335Z","comments":true,"path":"Javaå†…éƒ¨ç±».html","link":"","permalink":"http://xiaoqinghua.site/Javaå†…éƒ¨ç±».html","excerpt":"","text":"å°‘å•°å—¦ï¼Œå…ˆä¸Šä»£ç 123456789101112131415161718192021222324252627public class OuterClass &#123; private String name ; private int age; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; class InnerClass&#123; public InnerClass()&#123; name = \"chenssy\"; age = 23; &#125; &#125;&#125; åœ¨è¿™é‡ŒInnerClasså°±æ˜¯å†…éƒ¨ç±»ï¼Œè™½ç„¶æ²¡æœ‰æ€ä¹ˆä½¿ç”¨è¿‡(è²Œä¼¼ä»…ä»…åªåœ¨åšswing æ³¨å†Œäº‹ä»¶ä¸­ä½¿ç”¨è¿‡)ï¼Œä½†æ˜¯éšç€ç¼–ç¨‹èƒ½åŠ›çš„æé«˜ï¼Œæˆ‘ä»¬ä¼šé¢†æ‚Ÿåˆ°å®ƒçš„é­…åŠ›æ‰€åœ¨ï¼Œå®ƒå¯ä»¥ä½¿ç”¨èƒ½å¤Ÿæ›´åŠ ä¼˜é›…çš„è®¾è®¡æˆ‘ä»¬çš„ç¨‹åºç»“æ„ã€‚åœ¨ä½¿ç”¨å†…éƒ¨ç±»ä¹‹é—´æˆ‘ä»¬éœ€è¦æ˜ç™½ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Œå†…éƒ¨ç±»èƒ½å¤Ÿä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆæ ·çš„å¥½å¤„ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±» ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å†…éƒ¨ç±»ï¼Ÿåœ¨ã€ŠThink in javaã€‹ä¸­æœ‰è¿™æ ·ä¸€å¥è¯ï¼šä½¿ç”¨å†…éƒ¨ç±»æœ€å¸å¼•äººçš„åŸå› æ˜¯ï¼šæ¯ä¸ªå†…éƒ¨ç±»éƒ½èƒ½ç‹¬ç«‹åœ°ç»§æ‰¿ä¸€ä¸ªï¼ˆæ¥å£çš„ï¼‰å®ç°ï¼Œæ‰€ä»¥æ— è®ºå¤–å›´ç±»æ˜¯å¦å·²ç»ç»§æ‰¿äº†æŸä¸ªï¼ˆæ¥å£çš„ï¼‰å®ç°ï¼Œå¯¹äºå†…éƒ¨ç±»éƒ½æ²¡æœ‰å½±å“ã€‚ åœ¨æˆ‘ä»¬ç¨‹åºè®¾è®¡ä¸­æœ‰æ—¶å€™ä¼šå­˜åœ¨ä¸€äº›ä½¿ç”¨æ¥å£å¾ˆéš¾è§£å†³çš„é—®é¢˜ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åˆ©ç”¨å†…éƒ¨ç±»æä¾›çš„ã€å¯ä»¥ç»§æ‰¿å¤šä¸ªå…·ä½“çš„æˆ–è€…æŠ½è±¡çš„ç±»çš„èƒ½åŠ›æ¥è§£å†³è¿™äº›ç¨‹åºè®¾è®¡é—®é¢˜ã€‚å¯ä»¥è¿™æ ·è¯´ï¼Œæ¥å£åªæ˜¯è§£å†³äº†éƒ¨åˆ†é—®é¢˜ï¼Œè€Œå†…éƒ¨ç±»ä½¿å¾—å¤šé‡ç»§æ‰¿(äºŒä¹‰æ€§)çš„è§£å†³æ–¹æ¡ˆå˜å¾—æ›´åŠ å®Œæ•´ã€‚ å…¶å®ä½¿ç”¨å†…éƒ¨ç±»æœ€å¤§çš„ä¼˜ç‚¹å°±åœ¨äºå®ƒèƒ½å¤Ÿéå¸¸å¥½çš„è§£å†³å¤šé‡ç»§æ‰¿çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸éœ€è¦è§£å†³å¤šé‡ç»§æ‰¿é—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‡ªç„¶å¯ä»¥ä½¿ç”¨å…¶ä»–çš„ç¼–ç æ–¹å¼ï¼Œä½†æ˜¯ä½¿ç”¨å†…éƒ¨ç±»è¿˜èƒ½å¤Ÿä¸ºæˆ‘ä»¬å¸¦æ¥å¦‚ä¸‹ç‰¹æ€§ï¼ˆæ‘˜è‡ªã€ŠThink in javaã€‹ï¼‰ï¼š 1234567891ã€å†…éƒ¨ç±»å¯ä»¥ç”¨å¤šä¸ªå®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹éƒ½æœ‰è‡ªå·±çš„çŠ¶æ€ä¿¡æ¯ï¼Œå¹¶ä¸”ä¸å…¶ä»–å¤–å›´å¯¹è±¡çš„ä¿¡æ¯ç›¸äº’ç‹¬ç«‹ã€‚2ã€åœ¨å•ä¸ªå¤–å›´ç±»ä¸­ï¼Œå¯ä»¥è®©å¤šä¸ªå†…éƒ¨ç±»ä»¥ä¸åŒçš„æ–¹å¼å®ç°åŒä¸€ä¸ªæ¥å£ï¼Œæˆ–è€…ç»§æ‰¿åŒä¸€ä¸ªç±»ã€‚3ã€åˆ›å»ºå†…éƒ¨ç±»å¯¹è±¡çš„æ—¶åˆ»å¹¶ä¸ä¾èµ–äºå¤–å›´ç±»å¯¹è±¡çš„åˆ›å»ºã€‚4ã€å†…éƒ¨ç±»å¹¶æ²¡æœ‰ä»¤äººè¿·æƒ‘çš„â€œis-aâ€å…³ç³»ï¼Œä»–å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ã€‚5ã€å†…éƒ¨ç±»æä¾›äº†æ›´å¥½çš„å°è£…ï¼Œé™¤äº†è¯¥å¤–å›´ç±»ï¼Œå…¶ä»–ç±»éƒ½ä¸èƒ½è®¿é—®ã€‚ å†…éƒ¨ç±»åŸºç¡€ åœ¨è¿™ä¸ªéƒ¨åˆ†ä¸»è¦ä»‹ç»å†…éƒ¨ç±»å¦‚ä½•ä½¿ç”¨å¤–éƒ¨ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œä»¥åŠä½¿ç”¨.thisä¸.newã€‚ å½“æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»çš„æ—¶å€™ï¼Œå®ƒæ— å½¢ä¸­å°±ä¸å¤–å›´ç±»æœ‰äº†ä¸€ç§è”ç³»ï¼Œä¾èµ–äºè¿™ç§è”ç³»ï¼Œå®ƒå¯ä»¥æ— é™åˆ¶åœ°è®¿é—®å¤–å›´ç±»çš„å…ƒç´ ã€‚ 1234567891011121314151617181920212223242526public class OuterClass &#123; private String name ; private int age; /**çœç•¥getterå’Œsetteræ–¹æ³•**/ public class InnerClass&#123; public InnerClass()&#123; name = \"xiaoqinghua\"; age = 25; &#125; public void display()&#123; System.out.println(\"nameï¼š\" + getName() +\" ;ageï¼š\" + getAge()); &#125; &#125; public static void main(String[] args) &#123; OuterClass outerClass = new OuterClass(); OuterClass.InnerClass innerClass = outerClass.new InnerClass(); innerClass.display(); &#125;&#125;--------------Outputï¼šnameï¼šxiaoqinghua ;ageï¼š25 åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…éƒ¨äº†InnerClasså¯ä»¥å¯¹å¤–å›´ç±»OuterClassçš„å±æ€§è¿›è¡Œæ— ç¼çš„è®¿é—®ï¼Œå°½ç®¡å®ƒæ˜¯privateä¿®é¥°çš„ã€‚è¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬åœ¨åˆ›å»ºæŸä¸ªå¤–å›´ç±»çš„å†…éƒ¨ç±»å¯¹è±¡æ—¶ï¼Œæ­¤æ—¶å†…éƒ¨ç±»å¯¹è±¡å¿…å®šä¼šæ•è·ä¸€ä¸ªæŒ‡å‘é‚£ä¸ªå¤–å›´ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œåªè¦æˆ‘ä»¬åœ¨è®¿é—®å¤–å›´ç±»çš„æˆå‘˜æ—¶ï¼Œå°±ä¼šç”¨è¿™ä¸ªå¼•ç”¨æ¥é€‰æ‹©å¤–å›´ç±»çš„æˆå‘˜ã€‚ å…¶å®åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­æˆ‘ä»¬è¿˜çœ‹åˆ°äº†å¦‚ä½•æ¥å¼•ç”¨å†…éƒ¨ç±»ï¼šå¼•ç”¨å†…éƒ¨ç±»æˆ‘ä»¬éœ€è¦æŒ‡æ˜è¿™ä¸ªå¯¹è±¡çš„ç±»å‹ï¼šOuterClasName.InnerClassNameã€‚åŒæ—¶å¦‚æœæˆ‘ä»¬éœ€è¦åˆ›å»ºæŸä¸ªå†…éƒ¨ç±»å¯¹è±¡ï¼Œå¿…é¡»è¦åˆ©ç”¨å¤–éƒ¨ç±»çš„å¯¹è±¡é€šè¿‡.newæ¥åˆ›å»ºå†…éƒ¨ç±»ï¼š OuterClass.InnerClass innerClass = outerClass.new InnerClass();ã€‚ åŒæ—¶å¦‚æœæˆ‘ä»¬éœ€è¦ç”Ÿæˆå¯¹å¤–éƒ¨ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥ä½¿ç”¨OuterClassName.thisï¼Œè¿™æ ·å°±èƒ½å¤Ÿäº§ç”Ÿä¸€ä¸ªæ­£ç¡®å¼•ç”¨å¤–éƒ¨ç±»çš„å¼•ç”¨äº†ã€‚å½“ç„¶è¿™ç‚¹å®åœ¨ç¼–è¯‘æœŸå°±çŸ¥æ™“äº†ï¼Œæ²¡æœ‰ä»»ä½•è¿è¡Œæ—¶çš„æˆæœ¬ã€‚ 1234567891011121314151617181920public class OuterClass &#123; public void display()&#123; System.out.println(\"OuterClass...\"); &#125; public class InnerClass&#123; public OuterClass getOuterClass()&#123; return OuterClass.this; &#125; &#125; public static void main(String[] args) &#123; OuterClass outerClass = new OuterClass(); OuterClass.InnerClass innerClass = outerClass.new InnerClass(); innerClass.getOuterClass().display(); &#125;&#125;-------------Output:OuterClass... åˆ°è¿™é‡Œäº†æˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå†…éƒ¨ç±»æ˜¯ä¸ªç¼–è¯‘æ—¶çš„æ¦‚å¿µï¼Œä¸€æ—¦ç¼–è¯‘æˆåŠŸåï¼Œå®ƒå°±ä¸å¤–å›´ç±»å±äºä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»ï¼ˆå½“ç„¶ä»–ä»¬ä¹‹é—´è¿˜æ˜¯æœ‰è”ç³»çš„ï¼‰ã€‚å¯¹äºä¸€ä¸ªåä¸ºOuterClassçš„å¤–å›´ç±»å’Œä¸€ä¸ªåä¸ºInnerClassçš„å†…éƒ¨ç±»ï¼Œåœ¨ç¼–è¯‘æˆåŠŸåï¼Œä¼šå‡ºç°è¿™æ ·ä¸¤ä¸ªclassæ–‡ä»¶ï¼šOuterClass.classå’ŒOuterClass$InnerClass.classã€‚ åœ¨Javaä¸­å†…éƒ¨ç±»ä¸»è¦åˆ†ä¸ºæˆå‘˜å†…éƒ¨ç±»ã€å±€éƒ¨å†…éƒ¨ç±»ã€åŒ¿åå†…éƒ¨ç±»ã€é™æ€å†…éƒ¨ç±»ã€‚ æˆå‘˜å†…éƒ¨ç±»æˆå‘˜å†…éƒ¨ç±»ä¹Ÿæ˜¯æœ€æ™®é€šçš„å†…éƒ¨ç±»ï¼Œå®ƒæ˜¯å¤–å›´ç±»çš„ä¸€ä¸ªæˆå‘˜ï¼Œæ‰€ä»¥ä»–æ˜¯å¯ä»¥æ— é™åˆ¶çš„è®¿é—®å¤–å›´ç±»çš„æ‰€æœ‰ æˆå‘˜å±æ€§å’Œæ–¹æ³•ï¼Œå°½ç®¡æ˜¯privateçš„ï¼Œä½†æ˜¯å¤–å›´ç±»è¦è®¿é—®å†…éƒ¨ç±»çš„æˆå‘˜å±æ€§å’Œæ–¹æ³•åˆ™éœ€è¦é€šè¿‡å†…éƒ¨ç±»å®ä¾‹æ¥è®¿é—®ã€‚ åœ¨æˆå‘˜å†…éƒ¨ç±»ä¸­è¦æ³¨æ„ä¸¤ç‚¹: æˆå‘˜å†…éƒ¨ç±»ä¸­ä¸èƒ½å­˜åœ¨ä»»ä½•staticçš„å˜é‡å’Œæ–¹æ³• æˆå‘˜å†…éƒ¨ç±»æ˜¯ä¾é™„äºå¤–å›´ç±»çš„ï¼Œæ‰€ä»¥åªæœ‰å…ˆåˆ›å»ºäº†å¤–å›´ç±»æ‰èƒ½å¤Ÿåˆ›å»ºå†…éƒ¨ç±» 12345678910111213141516171819202122232425262728293031public class OuterClass &#123; private String str; public void outerDisplay()&#123; System.out.println(\"outerClass...\"); &#125; public class InnerClass&#123; public void innerDisplay()&#123; //ä½¿ç”¨å¤–å›´å†…çš„å±æ€§ str = \"xiaoqinghua...\"; System.out.println(str); //ä½¿ç”¨å¤–å›´å†…çš„æ–¹æ³• outerDisplay(); &#125; &#125; /*æ¨èä½¿ç”¨getxxx()æ¥è·å–æˆå‘˜å†…éƒ¨ç±»ï¼Œå°¤å…¶æ˜¯è¯¥å†…éƒ¨ç±»çš„æ„é€ å‡½æ•°æ— å‚æ•°æ—¶ */ public InnerClass getInnerClass()&#123; return new InnerClass(); &#125; public static void main(String[] args) &#123; OuterClass outer = new OuterClass(); OuterClass.InnerClass inner = outer.getInnerClass(); inner.innerDisplay(); &#125;&#125;--------------------xiaoqinghua...outerClass... å±€éƒ¨å†…éƒ¨ç±»æœ‰è¿™æ ·ä¸€ç§å†…éƒ¨ç±»ï¼Œå®ƒæ˜¯åµŒå¥—åœ¨æ–¹æ³•å’Œä½œç”¨äºå†…çš„ï¼Œå¯¹äºè¿™ä¸ªç±»çš„ä½¿ç”¨ä¸»è¦æ˜¯åº”ç”¨ä¸è§£å†³æ¯”è¾ƒå¤æ‚çš„é—®é¢˜ï¼Œæƒ³åˆ›å»ºä¸€ä¸ªç±»æ¥è¾…åŠ©æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆï¼Œåˆ°é‚£æ—¶åˆä¸å¸Œæœ›è¿™ä¸ªç±»æ˜¯å…¬å…±å¯ç”¨çš„ï¼Œæ‰€ä»¥å°±äº§ç”Ÿäº†å±€éƒ¨å†…éƒ¨ç±»ï¼Œå±€éƒ¨å†…éƒ¨ç±»å’Œæˆå‘˜å†…éƒ¨ç±»ä¸€æ ·è¢«ç¼–è¯‘ï¼Œåªæ˜¯å®ƒçš„ä½œç”¨åŸŸå‘ç”Ÿäº†æ”¹å˜ï¼Œå®ƒåªèƒ½åœ¨è¯¥æ–¹æ³•å’Œå±æ€§ä¸­è¢«ä½¿ç”¨ï¼Œå‡ºäº†è¯¥æ–¹æ³•å’Œå±æ€§å°±ä¼šå¤±æ•ˆã€‚ å¯¹äºå±€éƒ¨å†…éƒ¨ç±»å®åœ¨æ˜¯æƒ³ä¸å‡ºä»€ä¹ˆå¥½ä¾‹å­ï¼Œæ‰€ä»¥å°±å¼•ç”¨ã€ŠThink in javaã€‹ä¸­çš„ç»å…¸ä¾‹å­äº†ã€‚ å®šä¹‰åœ¨æ–¹æ³•é‡Œï¼š 12345678910111213141516171819public class Parcel5 &#123; public Destionation destionation(String str)&#123; class PDestionation implements Destionation&#123; private String label; private PDestionation(String whereTo)&#123; label = whereTo; &#125; public String readLabel()&#123; return label; &#125; &#125; return new PDestionation(str); &#125; public static void main(String[] args) &#123; Parcel5 parcel5 = new Parcel5(); Destionation d = parcel5.destionation(\"xiaoqinghua\"); &#125;&#125; å®šä¹‰åœ¨ä½œç”¨åŸŸå†…: 1234567891011121314151617181920212223242526public class Parcel6 &#123; private void internalTracking(boolean b)&#123; if(b)&#123; class TrackingSlip&#123; private String id; TrackingSlip(String s) &#123; id = s; &#125; String getSlip()&#123; return id; &#125; &#125; TrackingSlip ts = new TrackingSlip(\"xiaoqinghua\"); String string = ts.getSlip(); &#125; &#125; public void track()&#123; internalTracking(true); &#125; public static void main(String[] args) &#123; Parcel6 parcel6 = new Parcel6(); parcel6.track(); &#125;&#125; åŒ¿åå†…éƒ¨ç±»åœ¨åšSwingç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨è¿™ç§æ–¹å¼æ¥ç»‘å®šäº‹ä»¶ 123456button2.addActionListener( new ActionListener()&#123; public void actionPerformed(ActionEvent e) &#123; System.out.println(\"ç‚¹å‡»äº†æŒ‰é’®\"); &#125; &#125;); æˆ‘ä»¬å’‹ä¸€çœ‹å¯èƒ½è§‰å¾—éå¸¸å¥‡æ€ªï¼Œå› ä¸ºè¿™ä¸ªå†…éƒ¨ç±»æ˜¯æ²¡æœ‰åå­—çš„ï¼Œåœ¨çœ‹å¦‚ä¸‹è¿™ä¸ªä¾‹å­ï¼š 123456789101112131415161718192021222324public class OuterClass &#123; public InnerClass getInnerClass(final int num,String str2)&#123; return new InnerClass()&#123; int number = num + 3; public int getNumber()&#123; return number; &#125; &#125;; /* æ³¨æ„ï¼šåˆ†å·ä¸èƒ½çœ */ &#125; public static void main(String[] args) &#123; OuterClass out = new OuterClass(); InnerClass inner = out.getInnerClass(2, \"xiaoqinghua\"); System.out.println(inner.getNumber()); &#125;&#125;interface InnerClass &#123; int getNumber();&#125;----------------Output:5 è¿™é‡Œæˆ‘ä»¬å°±éœ€è¦çœ‹æ¸…å‡ ä¸ªåœ°æ–¹ 123456781ã€ åŒ¿åå†…éƒ¨ç±»æ˜¯æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦çš„ã€‚2ã€ new åŒ¿åå†…éƒ¨ç±»ï¼Œè¿™ä¸ªç±»é¦–å…ˆæ˜¯è¦å­˜åœ¨çš„ã€‚å¦‚æœæˆ‘ä»¬å°†é‚£ä¸ªInnerClassæ¥å£æ³¨é‡Šæ‰ï¼Œå°±ä¼šå‡ºç°ç¼–è¯‘å‡ºé”™ã€‚3ã€ æ³¨æ„getInnerClass()æ–¹æ³•çš„å½¢å‚ï¼Œç¬¬ä¸€ä¸ªå½¢å‚æ˜¯ç”¨finalä¿®é¥°çš„ï¼Œè€Œç¬¬äºŒä¸ªå´æ²¡æœ‰ã€‚åŒæ—¶æˆ‘ä»¬ä¹Ÿå‘ç°ç¬¬äºŒä¸ªå½¢å‚åœ¨åŒ¿åå†…éƒ¨ç±»ä¸­æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å½“æ‰€åœ¨æ–¹æ³•çš„å½¢å‚éœ€è¦è¢«åŒ¿åå†…éƒ¨ç±»ä½¿ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå½¢å‚å°±å¿…é¡»ä¸ºfinalã€‚4ã€ åŒ¿åå†…éƒ¨ç±»æ˜¯æ²¡æœ‰æ„é€ æ–¹æ³•çš„ã€‚å› ä¸ºå®ƒè¿åå­—éƒ½æ²¡æœ‰ä½•æ¥æ„é€ æ–¹æ³•ã€‚ é™æ€å†…éƒ¨ç±»staticå¯ä»¥ä¿®é¥°æˆå‘˜å˜é‡ã€æ–¹æ³•ã€ä»£ç å—ï¼Œå…¶ä»–å®ƒè¿˜å¯ä»¥ä¿®é¥°å†…éƒ¨ç±»ï¼Œä½¿ç”¨staticä¿®é¥°çš„å†…éƒ¨ç±»æˆ‘ä»¬ç§°ä¹‹ä¸ºé™æ€å†…éƒ¨ç±»ï¼Œä¸è¿‡æˆ‘ä»¬æ›´å–œæ¬¢ç§°ä¹‹ä¸ºåµŒå¥—å†…éƒ¨ç±»ã€‚é™æ€å†…éƒ¨ç±»ä¸éé™æ€å†…éƒ¨ç±»ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«ï¼Œæˆ‘ä»¬çŸ¥é“éé™æ€å†…éƒ¨ç±»åœ¨ç¼–è¯‘å®Œæˆä¹‹åä¼šéšå«åœ°ä¿å­˜ç€ä¸€ä¸ªå¼•ç”¨ï¼Œè¯¥å¼•ç”¨æ˜¯æŒ‡å‘åˆ›å»ºå®ƒçš„å¤–å›´å†…ï¼Œä½†æ˜¯é™æ€å†…éƒ¨ç±»å´æ²¡æœ‰ã€‚æ²¡æœ‰è¿™ä¸ªå¼•ç”¨å°±æ„å‘³ç€ï¼š å®ƒçš„åˆ›å»ºæ˜¯ä¸éœ€è¦ä¾èµ–äºå¤–å›´ç±»çš„ã€‚ å®ƒä¸èƒ½ä½¿ç”¨ä»»ä½•å¤–å›´ç±»çš„éstaticæˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162public class OuterClass &#123; private String sex; public static String name = \"chenssy\"; /** *é™æ€å†…éƒ¨ç±» */ static class InnerClass1&#123; /* åœ¨é™æ€å†…éƒ¨ç±»ä¸­å¯ä»¥å­˜åœ¨é™æ€æˆå‘˜ */ public static String _name1 = \"chenssy_static\"; public void display()&#123; /* * é™æ€å†…éƒ¨ç±»åªèƒ½è®¿é—®å¤–å›´ç±»çš„é™æ€æˆå‘˜å˜é‡å’Œæ–¹æ³• * ä¸èƒ½è®¿é—®å¤–å›´ç±»çš„éé™æ€æˆå‘˜å˜é‡å’Œæ–¹æ³• */ System.out.println(\"OutClass name :\" + name); &#125; &#125; /** * éé™æ€å†…éƒ¨ç±» */ class InnerClass2&#123; /* éé™æ€å†…éƒ¨ç±»ä¸­ä¸èƒ½å­˜åœ¨é™æ€æˆå‘˜ */ public String _name2 = \"chenssy_inner\"; /* éé™æ€å†…éƒ¨ç±»ä¸­å¯ä»¥è°ƒç”¨å¤–å›´ç±»çš„ä»»ä½•æˆå‘˜,ä¸ç®¡æ˜¯é™æ€çš„è¿˜æ˜¯éé™æ€çš„ */ public void display()&#123; System.out.println(\"OuterClass nameï¼š\" + name); &#125; &#125; /** * @desc å¤–å›´ç±»æ–¹æ³• * @author chenssy * @data 2013-10-25 * @return void */ public void display()&#123; /* å¤–å›´ç±»è®¿é—®é™æ€å†…éƒ¨ç±»ï¼šå†…éƒ¨ç±». */ System.out.println(InnerClass1._name1); /* é™æ€å†…éƒ¨ç±» å¯ä»¥ç›´æ¥åˆ›å»ºå®ä¾‹ä¸éœ€è¦ä¾èµ–äºå¤–å›´ç±» */ new InnerClass1().display(); /* éé™æ€å†…éƒ¨çš„åˆ›å»ºéœ€è¦ä¾èµ–äºå¤–å›´ç±» */ OuterClass.InnerClass2 inner2 = new OuterClass().new InnerClass2(); /* æ–¹ä½éé™æ€å†…éƒ¨ç±»çš„æˆå‘˜éœ€è¦ä½¿ç”¨éé™æ€å†…éƒ¨ç±»çš„å®ä¾‹ */ System.out.println(inner2._name2); inner2.display(); &#125; public static void main(String[] args) &#123; OuterClass outer = new OuterClass(); outer.display(); &#125;&#125;----------------Output:chenssy_staticOutClass name :chenssychenssy_innerOuterClass nameï¼šchenssy ä»¥ä¸Šå†…å®¹è½¬è½½è‡³ï¼šhttp://www.cnblogs.com/chenssy/ chenssy å¤§ä½¬çš„åšå®¢ åŠ ä¸€ä¸‹æ–™ï¼šé‡å†™å’Œé‡è½½ é‡å†™ï¼ˆOverrideï¼‰ å­˜åœ¨äºç»§æ‰¿ä½“ç³»ä¸­ï¼ŒæŒ‡å­ç±»å®ç°äº†ä¸€ä¸ªä¸çˆ¶ç±»åœ¨æ–¹æ³•å£°æ˜ä¸Šå®Œå…¨ç›¸åŒçš„ä¸€ä¸ªæ–¹æ³•ã€‚ ä¸ºäº†æ»¡è¶³é‡Œå¼æ›¿æ¢åŸåˆ™ï¼Œé‡å†™æœ‰æœ‰ä»¥ä¸‹ä¸¤ä¸ªé™åˆ¶ï¼š å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»å¤§äºç­‰äºçˆ¶ç±»æ–¹æ³•ï¼› å­ç±»æ–¹æ³•çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹ã€‚ ä½¿ç”¨ @Override æ³¨è§£ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨å¸®å¿™æ£€æŸ¥æ˜¯å¦æ»¡è¶³ä¸Šé¢çš„ä¸¤ä¸ªé™åˆ¶æ¡ä»¶ã€‚ é‡è½½ï¼ˆOverloadï¼‰ å­˜åœ¨äºåŒä¸€ä¸ªç±»ä¸­ï¼ŒæŒ‡ä¸€ä¸ªæ–¹æ³•ä¸å·²ç»å­˜åœ¨çš„æ–¹æ³•åç§°ä¸Šç›¸åŒï¼Œä½†æ˜¯å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€é¡ºåºè‡³å°‘æœ‰ä¸€ä¸ªä¸åŒã€‚ åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œè¿”å›å€¼ä¸åŒï¼Œå…¶å®ƒéƒ½ç›¸åŒä¸ç®—æ˜¯é‡è½½ã€‚","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Stringçš„é‚£äº›äº‹","slug":"å†è®°String","date":"2017-08-25T02:28:23.000Z","updated":"2018-08-22T08:57:11.354Z","comments":true,"path":"å†è®°String.html","link":"","permalink":"http://xiaoqinghua.site/å†è®°String.html","excerpt":"","text":"String çš„ç”¨æ³•Stringç±»åœ¨ java.lang åŒ…ä¸­ï¼Œjava ä½¿ç”¨Stringç±»åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡ï¼Œå­—ç¬¦ä¸²å˜é‡å±äºå¯¹è±¡ã€‚java æŠŠStringç±»å£°æ˜çš„finalç±»ï¼Œä¸èƒ½æœ‰å­ç±»ã€‚Stringç±»å¯¹è±¡åˆ›å»ºåä¸èƒ½ä¿®æ”¹ï¼Œç”± 0 æˆ–å¤šä¸ªå­—ç¬¦ç»„æˆï¼ŒåŒ…å«åœ¨ä¸€å¯¹åŒå¼•å·ä¹‹é—´ï¼Œä¸‹é¢ç®€å•çš„ç†Ÿæ‚‰ä¸€ä¸‹å…¶å¸¸ç”¨çš„ APIï¼š 1234567891011121314151617char charAt (int index) è¿”å›indexæ‰€æŒ‡å®šçš„å­—ç¬¦ String concat(String str) å°†ä¸¤å­—ç¬¦ä¸²è¿æ¥ boolean endsWith(String str) æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä»¥strç»“å°¾ boolean equals(Object obj) æ¯”è¾ƒä¸¤å¯¹è±¡ char[] getBytes å°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—ç¬¦æ•°ç»„è¿”å› char[] getBytes(String str) å°†æŒ‡å®šçš„å­—ç¬¦ä¸²è½¬æˆåˆ¶æœæ•°ç»„è¿”å› boolean startsWith(String str) æµ‹è¯•å­—ç¬¦ä¸²æ˜¯å¦ä»¥strå¼€å§‹ int length() è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ String replace(char old ,char new) å°†oldç”¨newæ›¿ä»£ char[] toCharArray å°†å­—ç¬¦ä¸²è½¬æ¢æˆå­—ç¬¦æ•°ç»„ String toLowerCase() å°†å­—ç¬¦ä¸²å†…çš„å­—ç¬¦æ”¹å†™æˆå°å†™ String toUpperCase() å°†å­—ç¬¦ä¸²å†…çš„å­—ç¬¦æ”¹å†™æˆå¤§å†™ String valueOf(Boolean b) å°†å¸ƒå°”æ–¹æ³•bçš„å†…å®¹ç”¨å­—ç¬¦ä¸²è¡¨ç¤º String valueOf(char ch) å°†å­—ç¬¦chçš„å†…å®¹ç”¨å­—ç¬¦ä¸²è¡¨ç¤º String valueOf(int index) å°†æ•°å­—indexçš„å†…å®¹ç”¨å­—ç¬¦ä¸²è¡¨ç¤º String valueOf(long l) å°†é•¿æ•´æ•°å­—lçš„å†…å®¹ç”¨å­—ç¬¦ä¸²è¡¨ç¤º String substring(int1,int2) å–å‡ºå­—ç¬¦ä¸²å†…ç¬¬int1ä½ç½®åˆ°int2çš„å­—ç¬¦ä¸² 1.æ„é€ æ–¹æ³• 123456//ç›´æ¥åˆå§‹åŒ–String str = \"abc\";//ä½¿ç”¨å¸¦å‚æ„é€ æ–¹æ³•åˆå§‹åŒ–char[] char = &#123;'a','b','c'&#125;;String str1 = new String(\"abc\");String str2 = new String(str);String str3 = new String(char); 2.æ±‚å­—ç¬¦ä¸²é•¿åº¦å’ŒæŸä¸€ä½ç½®å­—ç¬¦ 123String str = new String(\"abcdef\");int strlength = str.length();//strlength = 7char ch = str.charAt(4);//ch = e 3.æå–å­ä¸² ç”¨Stringç±»çš„substringæ–¹æ³•å¯ä»¥æå–å­—ç¬¦ä¸²ä¸­çš„å­ä¸²ï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ç§å¸¸ç”¨å‚æ•°:1)public String substring(int beginIndex)//è¯¥æ–¹æ³•ä»beginIndexä½ç½®èµ·ï¼Œä»å½“å‰å­—ç¬¦ä¸²ä¸­å–å‡ºå‰©ä½™çš„å­—ç¬¦ä½œä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿”å›ã€‚ 2)public String substring(int beginIndex, int endIndex)//è¯¥æ–¹æ³•ä»beginIndexä½ç½®èµ·ï¼Œä»å½“å‰å­—ç¬¦ä¸²ä¸­å–å‡ºåˆ°endIndex-1ä½ç½®çš„å­—ç¬¦ä½œä¸ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿”å›ã€‚ 123String str1 = new String(\"abcdef\");String str2 = str1.substring(2);//str2 = \"cdef\"String str3 = str1.substring(2,5);//str3 = \"cde\" 4.å­—ç¬¦ä¸²æ¯”è¾ƒ 1)public int compareTo(String anotherString)//è¯¥æ–¹æ³•æ˜¯å¯¹å­—ç¬¦ä¸²å†…å®¹æŒ‰å­—å…¸é¡ºåºè¿›è¡Œå¤§å°æ¯”è¾ƒï¼Œé€šè¿‡è¿”å›çš„æ•´æ•°å€¼æŒ‡æ˜å½“å‰å­—ç¬¦ä¸²ä¸å‚æ•°å­—ç¬¦ä¸²çš„å¤§å°å…³ç³»ã€‚è‹¥å½“å‰å¯¹è±¡æ¯”å‚æ•°å¤§åˆ™è¿”å›æ­£æ•´æ•°ï¼Œåä¹‹è¿”å›è´Ÿæ•´æ•°ï¼Œç›¸ç­‰è¿”å›0ã€‚ 2)public int compareToIgnoreCase(String anotherString)//ä¸compareToæ–¹æ³•ç›¸ä¼¼ï¼Œä½†å¿½ç•¥å¤§å°å†™ã€‚ 3)public boolean equals(Object anotherObject)//æ¯”è¾ƒå½“å‰å­—ç¬¦ä¸²å’Œå‚æ•°å­—ç¬¦ä¸²ï¼Œåœ¨ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰çš„æ—¶å€™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ 4)public boolean equalsIgnoreCase(String anotherString)//ä¸equalsæ–¹æ³•ç›¸ä¼¼ï¼Œä½†å¿½ç•¥å¤§å°å†™ã€‚ 123456String str1 = new String(\"abc\");String str2 = new String(\"ABC\");int a = str1.compareTo(str2);//a&gt;0int b = str1.compareToIgnoreCase(str2);//b=0boolean c = str1.equals(str2);//c=falseboolean d = str1.equalsIgnoreCase(str2);//d=true 5.å­—ç¬¦ä¸²é“¾æ¥ public String concat(String str)//å°†å‚æ•°ä¸­çš„å­—ç¬¦ä¸²strè¿æ¥åˆ°å½“å‰å­—ç¬¦ä¸²çš„åé¢ï¼Œæ•ˆæœç­‰ä»·äºâ€+â€ 12String str = \"aa\".concat(\"bb\").concat(\"cc\");//ç›¸å½“äºString str = \"aa\"+\"bb\"+\"cc\"; 6.å­—ç¬¦ä¸²ä¸­å•ä¸ªå­—ç¬¦æŸ¥æ‰¾ 1)public int indexOf(int ch/String str)//ç”¨äºæŸ¥æ‰¾å½“å‰å­—ç¬¦ä¸²ä¸­å­—ç¬¦æˆ–å­ä¸²ï¼Œè¿”å›å­—ç¬¦æˆ–å­ä¸²åœ¨å½“å‰å­—ç¬¦ä¸²ä¸­ä»å·¦è¾¹èµ·é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œè‹¥æ²¡æœ‰å‡ºç°åˆ™è¿”å›-1ã€‚ 2)public int indexOf(int ch/String str, int fromIndex)//æ”¹æ–¹æ³•ä¸ç¬¬ä¸€ç§ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè¯¥æ–¹æ³•ä»fromIndexä½ç½®å‘åæŸ¥æ‰¾ã€‚ 3)public int lastIndexOf(int ch/String str)//è¯¥æ–¹æ³•ä¸ç¬¬ä¸€ç§ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè¯¥æ–¹æ³•ä»å­—ç¬¦ä¸²çš„æœ«å°¾ä½ç½®å‘å‰æŸ¥æ‰¾ã€‚ 4)public int lastIndexOf(int ch/String str, int fromIndex)//è¯¥æ–¹æ³•ä¸ç¬¬äºŒç§æ–¹æ³•ç±»ä¼¼ï¼ŒåŒºåˆ«äºè¯¥æ–¹æ³•ä»fromIndexä½ç½®å‘å‰æŸ¥æ‰¾ã€‚ 123456String str = \"I really miss you !\";int a = str.indexOf('a');//a = 4int b = str.indexOf(\"really\");//b = 2int c = str.indexOf(\"gg\",2);//c = -1int d = str.lastIndexOf('s');//d = 6int e = str.lastIndexOf('s',7);//e = 7 7.å¤§å°å†™è½¬æ¢ 1)public String toLowerCase()//è¿”å›å°†å½“å‰å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦è½¬æ¢æˆå°å†™åçš„æ–°ä¸² 2)public String toUpperCase()//è¿”å›å°†å½“å‰å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å­—ç¬¦è½¬æ¢æˆå¤§å†™åçš„æ–°ä¸² 123String str = new String(\"abCD\");String str1 = str.toLowerCase();//str1 = \"abcd\"String str2 = str.toUpperCase();//str2 = \"ABCD\" 8.å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ›¿æ¢ 1)public String replace(char oldChar, char newChar)//ç”¨å­—ç¬¦newCharæ›¿æ¢å½“å‰å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„oldCharå­—ç¬¦ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚ 2)public String replaceFirst(String regex, String replacement)//è¯¥æ–¹æ³•ç”¨å­—ç¬¦replacementçš„å†…å®¹æ›¿æ¢å½“å‰å­—ç¬¦ä¸²ä¸­é‡åˆ°çš„ç¬¬ä¸€ä¸ªå’Œå­—ç¬¦ä¸²regexç›¸åŒ¹é…çš„å­ä¸²ï¼Œåº”å°†æ–°çš„å­—ç¬¦ä¸²è¿”å›ã€‚ 3)public String replaceAll(String regex, String replacement)//è¯¥æ–¹æ³•ç”¨å­—ç¬¦replacementçš„å†…å®¹æ›¿æ¢å½“å‰å­—ç¬¦ä¸²ä¸­é‡åˆ°çš„æ‰€æœ‰å’Œå­—ç¬¦ä¸²regexç›¸åŒ¹é…çš„å­ä¸²ï¼Œåº”å°†æ–°çš„å­—ç¬¦ä¸²è¿”å›ã€‚ 12345String str = \"asdzxcasd\";String str1 = str.replace('a','g');//str1 = \"gsdzxcgsd\"String str2 = str.replace(\"asd\",\"fgh\");//str2 = \"fghzxcfgh\"String str3 = str.replaceFirst(\"asd\",\"fgh\");//str3 = \"fghzxcasd\"String str4 = str.replaceAll(\"asd\",\"fgh\");//str4 = \"fghzxcfgh\" 9.å…¶ä»–æ–¹æ³• 1)String trim()//æˆªå»å­—ç¬¦ä¸²ä¸¤ç«¯çš„ç©ºæ ¼ï¼Œä½†å¯¹äºä¸­é—´çš„ç©ºæ ¼ä¸å¤„ç†ã€‚ 1234String str = \" a bc \";String str1 = str.trim();int a = str.length();//a = 6int b = str1.length();//b = 4 2)boolean statWith(String prefix)æˆ–boolean endWith(String suffix)//ç”¨æ¥æ¯”è¾ƒå½“å‰å­—ç¬¦ä¸²çš„èµ·å§‹å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²prefixå’Œç»ˆæ­¢å­—ç¬¦æˆ–å­å­—ç¬¦ä¸²suffixæ˜¯å¦å’Œå½“å‰å­—ç¬¦ä¸²ç›¸åŒï¼Œé‡è½½æ–¹æ³•ä¸­åŒæ—¶è¿˜å¯ä»¥æŒ‡å®šæ¯”è¾ƒçš„å¼€å§‹ä½ç½®offsetã€‚ 123String str = \"abcdef\";boolean a = str.statWith(\"ab\");//a = trueboolean b = str.endWith(\"ef\");//b = true 3)contains(String str)//åˆ¤æ–­å‚æ•°sæ˜¯å¦è¢«åŒ…å«åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å€¼ã€‚ 123String str = \"abcdef\";str.contains(\"ab\");//truestr.contains(\"gh\");//false 4)String[] split(String str)//å°†strä½œä¸ºåˆ†éš”ç¬¦è¿›è¡Œå­—ç¬¦ä¸²åˆ†è§£ï¼Œåˆ†è§£åçš„å­—å­—ç¬¦ä¸²åœ¨å­—ç¬¦ä¸²æ•°ç»„ä¸­è¿”å›ã€‚ 12String str = \"abc def ghi\";String[] str1 = str.split(\" \");//str1[0] = \"abc\";str1[1] = \"def\";str1[2] = \"ghi\"; 10.ç±»å‹è½¬æ¢ å­—ç¬¦ä¸²è½¬åŸºæœ¬ç±»å‹:java.langåŒ…ä¸­æœ‰Byteã€Shortã€Integerã€Floatã€Doubleç±»çš„è°ƒç”¨æ–¹æ³•ï¼š 123456789public static byte parseByte(String s)public static short parseShort(String s)public static short parseInt(String s)public static long parseLong(String s)public static float parseFloat(String s)public static double parseDouble(String s)int n = Integer.parseInt(\"12\");float f = Float.parseFloat(\"12.34\");double d = Double.parseDouble(\"1.124\"); åŸºæœ¬ç±»å‹è½¬å­—ç¬¦ä¸²:Stringç±»ä¸­æä¾›äº†String valueOf()æ”¾æ³•ï¼Œç”¨ä½œåŸºæœ¬ç±»å‹è½¬æ¢ä¸ºå­—ç¬¦ä¸²ç±»å‹ 1234567891011static String valueOf(char data[])static String valueOf(char data[], int offset, int count)static String valueOf(boolean b)static String valueOf(char c)static String valueOf(int i)static String valueOf(long l)static String valueOf(float f)static String valueOf(double d)//å°†char '8' è½¬æ¢ä¸ºint 8String str = String.valueOf('8');int num = Integer.parseInt(str); è¿›åˆ¶è½¬æ¢:ä½¿ç”¨Longç±»ä¸­çš„æ–¹æ³•å¾—åˆ°æ•´æ•°ä¹‹é—´çš„å„ç§è¿›åˆ¶è½¬æ¢çš„æ–¹æ³•ï¼š 1234Long.toBinaryString(long l)//äºŒè¿›åˆ¶Long.toOctalString(long l)//å…«è¿›åˆ¶Long.toHexString(long l)//åå…­è¿›åˆ¶Long.toString(long l, int p)//pä½œä¸ºä»»æ„è¿›åˆ¶ String çš„ç‰¹æ€§1ã€Stringæ˜¯ä¸å¯å˜ç±» è¿™å¥è¯å…¶å®å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œé‚£ä¹ˆå…·ä½“ä»€ä¹ˆæ˜¯ä¸å¯å˜ç±»å‘¢ï¼Ÿä¸€èˆ¬è®¤ä¸ºï¼šå½“å¯¹è±¡ä¸€æ—¦åˆ›å»ºå®Œæˆåï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„çŠ¶æ€ä¸ä¼šå› å¤–ç•Œçš„æ”¹å˜è€Œæ”¹å˜ï¼ˆå¯¹è±¡çš„çŠ¶æ€æ˜¯æŒ‡å¯¹è±¡çš„å±æ€§ï¼ŒåŒ…æ‹¬å±æ€§çš„ç±»å‹åŠå±æ€§å€¼ï¼‰ é¦–å…ˆçœ‹ä¸€ä¸ªåŸºæœ¬çš„ä¾‹å­ï¼š 12341 String s = \"abc\";2 System.out.println(\"s:\" + s); // è¾“å‡ºs:abc3 s = \"def\";4 System.out.println(\"s:\" + s); // è¾“å‡ºs:def æ­¤æ—¶ï¼Œåˆçœ‹ä¸Šå»ï¼Œè¾“å‡ºçš„ç»“æœå˜äº†ï¼Œå‘ç°sçš„å€¼å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆè¿™ä¸ä¸Šé¢çš„è¯´æ³•â€”â€”Stringç±»æ˜¯ä¸å¯å˜ç±»æ˜¯å¦çŸ›ç›¾å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºsåªæ˜¯æŒ‡å‘å †å†…å­˜ä¸­çš„å¼•ç”¨ï¼Œå­˜å‚¨çš„æ˜¯å¯¹è±¡åœ¨å †ä¸­çš„åœ°å€ï¼Œè€Œéå¯¹è±¡æœ¬èº«ï¼Œsæœ¬èº«å­˜å‚¨åœ¨æ ˆå†…å­˜ä¸­ã€‚ å®é™…ä¸Šï¼Œæ­¤æ—¶å †å†…å­˜ä¸­ä¾ç„¶å­˜åœ¨ç€&quot;abc&quot;å’Œ&quot;def&quot;å¯¹è±¡ã€‚å¯¹äº&quot;abc&quot;å¯¹è±¡æœ¬èº«è€Œè¨€ï¼Œå¯¹è±¡çš„çŠ¶æ€æ˜¯æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–çš„ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆStringç±»å…·æœ‰ä¸å¯å˜æ€§å‘¢ï¼Œæ˜¾ç„¶ï¼Œæ—¢ç„¶ä¸å¯å˜è¯´æ˜Stringç±»ä¸­è‚¯å®šæ²¡æœ‰æä¾›å¯¹å¤–å¯settersæ–¹æ³•ã€‚æ¥ä¸‹æ¥æ¥å…·ä½“çœ‹ä¸€ä¸‹Stringç±»çš„å®šä¹‰ã€‚ ä¸‹é¢æ˜¯Stringç±»ä¸­ä¸»è¦å±æ€§çš„å®šä¹‰ï¼ˆJava 1.7æºç ï¼‰ï¼š 1234567891 public final class String implements java.io.Serializable, Comparable&lt;String&gt;, CharSequence&#123;2 3 /** The value is used for character storage. */4 private final char value[];5 6 /** Cache the hash code for the string */7 private int hash; // Default to 08 9 &#125; ä¸å¯å˜çš„å¥½å¤„ï¼š 123456789101112131415161. å¯ä»¥ç¼“å­˜ hash å€¼å› ä¸º String çš„ hash å€¼ç»å¸¸è¢«ä½¿ç”¨ï¼Œä¾‹å¦‚ String ç”¨åš HashMap çš„ keyã€‚ä¸å¯å˜çš„ç‰¹æ€§å¯ä»¥ä½¿å¾— hash å€¼ä¹Ÿä¸å¯å˜ï¼Œå› æ­¤åªéœ€è¦è¿›è¡Œä¸€æ¬¡è®¡ç®—2. String Pool çš„éœ€è¦å¦‚æœä¸€ä¸ª String å¯¹è±¡å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¼šä» String Pool ä¸­å–å¾—å¼•ç”¨ã€‚åªæœ‰ String æ˜¯ä¸å¯å˜çš„ï¼Œæ‰å¯èƒ½ä½¿ç”¨ String Pool3. å®‰å…¨æ€§String ç»å¸¸ä½œä¸ºå‚æ•°ï¼ŒString ä¸å¯å˜æ€§å¯ä»¥ä¿è¯å‚æ•°ä¸å¯å˜ã€‚ä¾‹å¦‚åœ¨ä½œä¸ºç½‘ç»œè¿æ¥å‚æ•°çš„æƒ…å†µä¸‹å¦‚æœ String æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œè¿æ¥è¿‡ç¨‹ä¸­ï¼ŒString è¢«æ”¹å˜ï¼Œæ”¹å˜ String å¯¹è±¡çš„é‚£ä¸€æ–¹ä»¥ä¸ºç°åœ¨è¿æ¥çš„æ˜¯å…¶å®ƒä¸»æœºï¼Œè€Œå®é™…æƒ…å†µå´ä¸ä¸€å®šæ˜¯4. çº¿ç¨‹å®‰å…¨String ä¸å¯å˜æ€§å¤©ç”Ÿå…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å®‰å…¨åœ°ä½¿ç”¨ Program Creek : Why String is immutable in Java? 2ã€String, StringBuffer and StringBuilder 12345678910å¯å˜æ€§String ä¸å¯å˜StringBuffer å’Œ StringBuilder å¯å˜çº¿ç¨‹å®‰å…¨String ä¸å¯å˜ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„StringBuilder ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨ä½¿ç”¨ synchronized è¿›è¡ŒåŒæ­¥ StackOverflow : String, StringBuffer, and StringBuilder \bä¸¾å‡ ä¸ªğŸŒ°ğŸŒ°1: 1234567String a = \"Hello World!\"; String b = \"Hello World!\"; String c = new String(\"Hello World!\"); String d = \"Hello\"+\" \"+\"World!\";System.out.println(a == b);//trueSystem.out.println(a == c);//falseSystem.out.println(a == d);//true æˆ‘ä»¬åº”è¯¥æ˜ç™½ï¼š é¦–å…ˆStringä¸å±äº8ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ŒStringæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚ å› ä¸ºå¯¹è±¡çš„é»˜è®¤å€¼æ˜¯nullï¼Œæ‰€ä»¥ String çš„é»˜è®¤å€¼ä¹Ÿæ˜¯nullï¼›ä½†å®ƒåˆæ˜¯ä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ï¼Œæœ‰å…¶å®ƒå¯¹è±¡æ²¡æœ‰çš„ä¸€äº›ç‰¹æ€§ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å…ˆä¸è°ˆå †ï¼Œä¹Ÿä¸è°ˆæ ˆï¼Œåªå…ˆç®€å•å¼•å…¥å¸¸é‡æ± è¿™ä¸ªç®€å•çš„æ¦‚å¿µã€‚ å¸¸é‡æ± (constant pool)æŒ‡çš„æ˜¯åœ¨ç¼–è¯‘æœŸè¢«ç¡®å®šï¼Œå¹¶è¢«ä¿å­˜åœ¨å·²ç¼–è¯‘çš„.classæ–‡ä»¶ä¸­çš„ä¸€äº›æ•°æ®ã€‚å®ƒåŒ…æ‹¬äº†å…³äºç±»ã€æ–¹æ³•ã€æ¥å£ç­‰ä¸­çš„å¸¸é‡ï¼Œä¹ŸåŒ…æ‹¬å­—ç¬¦ä¸²å¸¸é‡ã€‚ Javaä¼šç¡®ä¿ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡åªæœ‰ä¸€ä¸ªæ‹·è´ã€‚ å› ä¸ºä¾‹å­ä¸­çš„aå’Œbéƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œå®ƒä»¬åœ¨ç¼–è¯‘æœŸå°±è¢«ç¡®å®šäº†ï¼Œæ‰€ä»¥a==bä¸ºtrueï¼›è€Œ&quot;Hello&quot;å’Œ&quot; &quot;ä»¥åŠ&quot;World!&quot;ä¹Ÿéƒ½æ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œå½“ä¸€ä¸ªå­—ç¬¦ä¸²ç”±å¤šä¸ªå­—ç¬¦ä¸²å¸¸é‡è¿æ¥è€Œæˆæ—¶ï¼Œå®ƒè‡ªå·±è‚¯å®šä¹Ÿæ˜¯å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥dä¹ŸåŒæ ·åœ¨ç¼–è¯‘æœŸå°±è¢«è§£æä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥dä¹Ÿæ˜¯å¸¸é‡æ± ä¸­&quot;Hello World!&quot;çš„ä¸€ä¸ªå¼•ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬å¾—å‡ºa==b==d ç”¨new String()åˆ›å»ºçš„å­—ç¬¦ä¸²ä¸æ˜¯å¸¸é‡,ä¸èƒ½åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šï¼Œæ‰€ä»¥new String()åˆ›å»ºçš„å­—ç¬¦ä¸²ä¸æ”¾å…¥å¸¸é‡æ± ä¸­ï¼Œå®ƒä»¬æœ‰è‡ªå·±çš„åœ°å€ç©ºé—´ ğŸŒ°2: 123456String a = \"HelloWorld\"; String b = new String(\"HelloWorld\"); String c = \"Hello\"+ new String(\"World\"); System.out.println( a == b );//falseSystem.out.println( a == c );//falseSystem.out.println( b == c );//false aè¿˜æ˜¯å¸¸é‡æ± ä¸­â€HelloWorldâ€çš„å¼•ç”¨ï¼Œbå› ä¸ºæ— æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œæ‰€ä»¥æ˜¯è¿è¡Œæ—¶åˆ›å»ºçš„æ–°å¯¹è±¡â€HelloWorldâ€çš„å¼•ç”¨ï¼Œcå› ä¸ºæœ‰ååŠéƒ¨åˆ†new String(â€œWorldâ€)æ‰€ä»¥ä¹Ÿæ— æ³•åœ¨ç¼–è¯‘æœŸç¡®å®šï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸€ä¸ªæ–°åˆ›å»ºå¯¹è±¡â€HelloWorldâ€çš„å¼•ç”¨ï¼Œæ˜ç™½äº†è¿™äº›ä¹Ÿå°±çŸ¥é“ä¸ºä½•å¾—å‡ºæ­¤ç»“æœäº†ã€‚ 12String.intern()ï¼šå†è¡¥å……ä»‹ç»ä¸€ç‚¹ï¼šå­˜åœ¨äº.classæ–‡ä»¶ä¸­çš„å¸¸é‡æ± ï¼Œåœ¨è¿è¡ŒæœŸè¢«JVMè£…è½½ï¼Œå¹¶ä¸”å¯ä»¥æ‰©å……ã€‚Stringçš„intern()æ–¹æ³•å°±æ˜¯æ‰©å……å¸¸é‡æ± çš„ä¸€ä¸ªæ–¹æ³•ï¼›å½“ä¸€ä¸ªStringå®ä¾‹strè°ƒç”¨intern()æ–¹æ³•æ—¶ï¼ŒJavaæŸ¥æ‰¾å¸¸é‡æ± ä¸­æ˜¯å¦æœ‰ç›¸åŒUnicodeçš„å­—ç¬¦ä¸²å¸¸é‡ï¼Œå¦‚æœæœ‰ï¼Œåˆ™è¿”å›å…¶çš„å¼•ç”¨ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™åœ¨å¸¸é‡æ± ä¸­å¢åŠ ä¸€ä¸ªUnicodeç­‰äºstrçš„å­—ç¬¦ä¸²å¹¶è¿”å›å®ƒçš„å¼•ç”¨ï¼Œçœ‹ä¾‹3å°±æ¸…æ¥šäº†ã€‚ ğŸŒ°3: 12345678910String a = \"Hello\"; String b = new String(\"Hello\"); String c = new String(\"Hello\"); System.out.println( a == b );//falseSystem.out.println( â€œ**********â€ ); b.intern(); c = c.intern(); //æŠŠå¸¸é‡æ± ä¸­\"Hello\"çš„å¼•ç”¨èµ‹ç»™c System.out.println( a == b);//falseè™½ç„¶æ‰§è¡Œäº†b.intern()ä½†æ²¡æœ‰èµ‹å€¼ç»™bSystem.out.println( a == b.intern() );//true System.out.println( a == c ); //true ğŸŒ°4: å…³äºequals()å’Œ==:equals() æ˜¯æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œè¿™ä¸ªå¯¹äº String ç®€å•æ¥è¯´å°±æ˜¯æ¯”è¾ƒä¸¤å­—ç¬¦ä¸²çš„ Unicode åºåˆ—æ˜¯å¦ç›¸å½“ï¼Œå¦‚æœç›¸ç­‰è¿”å› true;è€Œ == æ˜¯æ¯”è¾ƒä¸¤å­—ç¬¦ä¸²çš„åœ°å€æ˜¯å¦ç›¸åŒï¼Œä¹Ÿå°±æ˜¯æ˜¯å¦æ˜¯åŒä¸€ä¸ªå­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚ ğŸŒ°5: Stringæ˜¯ä¸å¯å˜çš„:è¿™ä¸€è¯´åˆè¦è¯´å¾ˆå¤šï¼Œå¤§å®¶åªè¦çŸ¥é“Stringçš„å®ä¾‹ä¸€æ—¦ç”Ÿæˆå°±ä¸ä¼šå†æ”¹å˜äº†ï¼Œæ¯”å¦‚è¯´ï¼š 1String str = â€aaâ€+â€bbâ€+â€ â€œ+â€ccâ€; å°±æ˜¯æœ‰4ä¸ªå­—ç¬¦ä¸²å¸¸é‡ï¼Œé¦–å…ˆâ€aaâ€å’Œâ€bbâ€ç”Ÿæˆäº†â€aabbâ€å­˜åœ¨å†…å­˜ä¸­ï¼Œåâ€aabbâ€åˆå’Œâ€ â€œ ç”Ÿæˆ â€aabb â€œå­˜åœ¨å†…å­˜ä¸­ï¼Œæœ€ååˆå’Œç”Ÿæˆäº†â€aabb ccâ€ï¼Œå¹¶æŠŠè¿™ä¸ªå­—ç¬¦ä¸²çš„åœ°å€èµ‹ç»™äº†str,å°±æ˜¯å› ä¸ºStringçš„â€œä¸å¯å˜â€äº§ç”Ÿäº†å¾ˆå¤šä¸´æ—¶å˜é‡ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆå»ºè®®ç”¨StringBufferçš„åŸå› äº†ã€‚ æ¥ä¸€ä¸ªåå°„æ”¹å˜Stringçš„ğŸŒ°12345678910111213141516171819 1 public static void stringReflection() throws Exception &#123; 2 3 String s = \"Hello World\"; 4 5 System.out.println(\"s = \" + s); //Hello World 6 7 //è·å–Stringç±»ä¸­çš„valueå­—æ®µ 8 Field valueField = String.class.getDeclaredField(\"value\"); 9 10 //æ”¹å˜valueå±æ€§çš„è®¿é—®æƒé™11 valueField.setAccessible(true);12 13 char[] value = (char[]) valueField.get(s);14 15 //æ”¹å˜valueæ‰€å¼•ç”¨çš„æ•°ç»„ä¸­çš„ç¬¬5ä¸ªå­—ç¬¦16 value[5] = '_';17 18 System.out.println(\"s = \" + s); //Hello_World19 &#125;","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Java ç±»å‹è½¬æ¢","slug":"Javaç±»å‹è½¬æ¢","date":"2017-08-20T12:28:23.000Z","updated":"2018-08-24T07:42:07.654Z","comments":true,"path":"Javaç±»å‹è½¬æ¢.html","link":"","permalink":"http://xiaoqinghua.site/Javaç±»å‹è½¬æ¢.html","excerpt":"","text":"ç±»å‹è½¬æ¢Java è¯­è¨€æ˜¯ä¸€ç§å¼ºç±»å‹çš„è¯­è¨€ã€‚å¼ºç±»å‹çš„è¯­è¨€æœ‰ä»¥ä¸‹å‡ ä¸ªè¦æ±‚ï¼š å˜é‡æˆ–å¸¸é‡å¿…é¡»æœ‰ç±»å‹:è¦æ±‚å£°æ˜å˜é‡æˆ–å¸¸é‡æ—¶å¿…é¡»å£°æ˜ç±»å‹ï¼Œè€Œä¸”åªèƒ½åœ¨å£°æ˜ä»¥åæ‰èƒ½ä½¿ç”¨ã€‚ èµ‹å€¼æ—¶ç±»å‹å¿…é¡»ä¸€è‡´:å€¼çš„ç±»å‹å¿…é¡»å’Œå˜é‡æˆ–å¸¸é‡çš„ç±»å‹å®Œå…¨ä¸€è‡´ã€‚ è¿ç®—æ—¶ç±»å‹å¿…é¡»ä¸€è‡´:å‚ä¸è¿ç®—çš„æ•°æ®ç±»å‹å¿…é¡»ä¸€è‡´æ‰èƒ½è¿ç®—ã€‚ ä½†æ˜¯åœ¨å®é™…çš„ä½¿ç”¨ä¸­ï¼Œç»å¸¸éœ€è¦åœ¨ä¸åŒç±»å‹çš„å€¼ä¹‹é—´è¿›è¡Œæ“ä½œï¼Œè¿™å°±éœ€è¦ä¸€ç§æ–°çš„è¯­æ³•æ¥é€‚åº”è¿™ç§éœ€è¦ï¼Œè¿™ä¸ªè¯­æ³•å°±æ˜¯æ•°æ®ç±»å‹è½¬æ¢ã€‚ åœ¨æ•°å€¼å¤„ç†è¿™éƒ¨åˆ†ï¼Œè®¡ç®—æœºå’Œç°å®çš„é€»è¾‘ä¸å¤ªä¸€æ ·ï¼Œå¯¹äºç°å®æ¥è¯´ï¼Œ1å’Œ 1.0 æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†æ˜¯å¯¹äºè®¡ç®—æœºæ¥è¯´ï¼Œ1 æ˜¯æ•´æ•°ç±»å‹ï¼Œè€Œ 1.0 æ˜¯å°æ•°ç±»å‹ï¼Œå…¶åœ¨å†…å­˜ä¸­çš„å­˜å‚¨æ–¹å¼ä»¥åŠå ç”¨çš„ç©ºé—´éƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ç±»å‹è½¬æ¢åœ¨è®¡ç®—æœºå†…éƒ¨æ˜¯å¿…é¡»çš„ã€‚ Java è¯­è¨€ä¸­çš„æ•°æ®ç±»å‹è½¬æ¢æœ‰ä¸¤ç§ï¼š è‡ªåŠ¨ç±»å‹è½¬æ¢:ç¼–è¯‘å™¨è‡ªåŠ¨å®Œæˆç±»å‹è½¬æ¢ï¼Œä¸éœ€è¦åœ¨ç¨‹åºä¸­ç¼–å†™ä»£ç ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢:å¼ºåˆ¶ç¼–è¯‘å™¨è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¿…é¡»åœ¨ç¨‹åºä¸­ç¼–å†™ä»£ç ã€‚ ç”±äºåŸºæœ¬æ•°æ®ç±»å‹ä¸­ boolean ç±»å‹ä¸æ˜¯æ•°å­—å‹ï¼Œæ‰€ä»¥åŸºæœ¬æ•°æ®ç±»å‹çš„è½¬æ¢æ˜¯å‡ºäº† boolean ç±»å‹ä»¥å¤–çš„å…¶å®ƒ 7 ç§ç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚ä¸‹é¢æ¥å…·ä½“ä»‹ç»ä¸¤ç§ç±»å‹è½¬æ¢çš„è§„åˆ™ã€é€‚ç”¨åœºåˆä»¥åŠä½¿ç”¨æ—¶éœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚ è‡ªåŠ¨ç±»å‹è½¬æ¢è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œä¹Ÿç§°éšå¼ç±»å‹è½¬æ¢ï¼Œæ˜¯æŒ‡ä¸éœ€è¦ä¹¦å†™ä»£ç ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆçš„ç±»å‹è½¬æ¢ã€‚ç”±äºå®é™…å¼€å‘ä¸­è¿™æ ·çš„ç±»å‹è½¬æ¢å¾ˆå¤šï¼Œæ‰€ä»¥ Java è¯­è¨€åœ¨è®¾è®¡æ—¶ï¼Œæ²¡æœ‰ä¸ºè¯¥æ“ä½œè®¾è®¡è¯­æ³•ï¼Œè€Œæ˜¯ç”± JVM è‡ªåŠ¨å®Œæˆã€‚ è½¬æ¢è§„åˆ™ï¼šä»å­˜å‚¨èŒƒå›´å°çš„ç±»å‹åˆ°å­˜å‚¨èŒƒå›´å¤§çš„ç±»å‹ã€‚å…·ä½“è§„åˆ™ä¸ºï¼šbyteâ†’short(char)â†’intâ†’longâ†’floatâ†’double ä¹Ÿå°±æ˜¯è¯´ byte ç±»å‹çš„å˜é‡å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸º short ç±»å‹ï¼Œç¤ºä¾‹ä»£ç ï¼š 12byte b = 10;short sh = b;è¿™é‡Œåœ¨èµ‹å€¼æ—¶ï¼ŒJVM é¦–å…ˆå°† b çš„å€¼è½¬æ¢ä¸º short ç±»å‹ï¼Œç„¶åå†èµ‹å€¼ç»™ shã€‚ åœ¨ç±»å‹è½¬æ¢æ—¶å¯ä»¥è·³è·ƒã€‚ç¤ºä¾‹ä»£ç ï¼š 12byte b1 = 100;int n = b1; æ³¨æ„é—®é¢˜:åœ¨æ•´æ•°ä¹‹é—´è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼Œæ•°å€¼ä¸å‘ç”Ÿæ”¹å˜ï¼Œè€Œå°†æ•´æ•°ç±»å‹ï¼Œç‰¹åˆ«æ˜¯æ¯”è¾ƒå¤§çš„æ•´æ•°ç±»å‹è½¬æ¢æˆå°æ•°ç±»å‹æ—¶ï¼Œç”±äºå­˜å‚¨æ–¹å¼ä¸åŒï¼Œæœ‰å¯èƒ½å­˜åœ¨æ•°æ®ç²¾åº¦çš„æŸå¤±ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œä¹Ÿç§°æ˜¾å¼ç±»å‹è½¬æ¢ï¼Œæ˜¯æŒ‡å¿…é¡»ä¹¦å†™ä»£ç æ‰èƒ½å®Œæˆçš„ç±»å‹è½¬æ¢ã€‚è¯¥ç±»ç±»å‹è½¬æ¢å¾ˆå¯èƒ½å­˜åœ¨ç²¾åº¦çš„æŸå¤±ï¼Œæ‰€ä»¥å¿…é¡»ä¹¦å†™ç›¸åº”çš„ä»£ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿå¿å—è¯¥ç§æŸå¤±æ—¶æ‰è¿›è¡Œè¯¥ç±»å‹çš„è½¬æ¢ã€‚ è½¬æ¢è§„åˆ™:ä»å­˜å‚¨èŒƒå›´å¤§çš„ç±»å‹åˆ°å­˜å‚¨èŒƒå›´å°çš„ç±»å‹ã€‚ å…·ä½“è§„åˆ™ä¸ºï¼šdoubleâ†’floatâ†’longâ†’intâ†’short(char)â†’byte è¯­æ³•æ ¼å¼ä¸ºï¼š(è½¬æ¢åˆ°çš„ç±»å‹)éœ€è¦è½¬æ¢çš„å€¼ ç¤ºä¾‹ä»£ç ï¼š 12double d = 3.10;int n = (int)d; è¿™é‡Œå°† double ç±»å‹çš„å˜é‡ d å¼ºåˆ¶è½¬æ¢æˆ int ç±»å‹ï¼Œç„¶åèµ‹å€¼ç»™å˜é‡ nã€‚éœ€è¦è¯´æ˜çš„æ˜¯å°æ•°å¼ºåˆ¶è½¬æ¢ä¸ºæ•´æ•°ï¼Œé‡‡ç”¨çš„æ˜¯å» 1 æ³•ï¼Œä¹Ÿå°±æ˜¯æ— æ¡ä»¶çš„èˆå¼ƒå°æ•°ç‚¹çš„æ‰€æœ‰æ•°å­—ï¼Œåˆ™ä»¥ä¸Šè½¬æ¢å‡ºçš„ç»“æœæ˜¯ 3ã€‚æ•´æ•°å¼ºåˆ¶è½¬æ¢ä¸ºæ•´æ•°æ—¶å–æ•°å­—çš„ä½ä½ï¼Œä¾‹å¦‚ int ç±»å‹çš„å˜é‡è½¬æ¢ä¸º byte ç±»å‹æ—¶ï¼Œåˆ™åªå» int ç±»å‹çš„ä½ 8 ä½(ä¹Ÿå°±æ˜¯æœ€åä¸€ä¸ªå­—èŠ‚)çš„å€¼ã€‚ç¤ºä¾‹ä»£ç ï¼š 1234int n = 123;byte b = (byte)n;int m = 1234;byte b1 = (byte)m; åˆ™ b çš„å€¼è¿˜æ˜¯ 123ï¼Œè€Œ b1 çš„å€¼ä¸º-46ã€‚b1 çš„è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼šm çš„å€¼è½¬æ¢ä¸ºäºŒè¿›åˆ¶æ˜¯10011010010ï¼Œå–è¯¥æ•°å­—ä½8ä½çš„å€¼ä½œä¸ºb1çš„å€¼ï¼Œåˆ™b1çš„äºŒè¿›åˆ¶å€¼æ˜¯11010010ï¼ŒæŒ‰ç…§æœºå™¨æ•°çš„è§„å®šï¼Œæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œ1ä»£è¡¨è´Ÿæ•°ï¼Œåœ¨è®¡ç®—æœºä¸­è´Ÿæ•°å­˜å‚¨çš„æ˜¯è¡¥ç ï¼Œåˆ™è¯¥è´Ÿæ•°çš„åŸç æ˜¯ 10101110ï¼Œè¯¥å€¼å°±æ˜¯åè¿›åˆ¶çš„-46ã€‚æ³¨æ„é—®é¢˜:å¼ºåˆ¶ç±»å‹è½¬æ¢é€šå¸¸éƒ½ä¼šå­˜å‚¨ç²¾åº¦çš„æŸå¤±ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶éœ€è¦è°¨æ…ã€‚","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"Java æ•°æ®ç±»å‹","slug":"JavaåŸºæœ¬æ•°æ®ç±»å‹","date":"2017-08-19T03:58:52.000Z","updated":"2018-08-24T07:40:53.494Z","comments":true,"path":"JavaåŸºæœ¬æ•°æ®ç±»å‹.html","link":"","permalink":"http://xiaoqinghua.site/JavaåŸºæœ¬æ•°æ®ç±»å‹.html","excerpt":"","text":"åŸºæœ¬ç±»å‹ï¼Œæˆ–è€…å«åšå†…ç½®ç±»å‹ï¼Œæ˜¯JAVAä¸­ä¸åŒäºç±»çš„ç‰¹æ®Šç±»å‹ã€‚å®ƒä»¬æ˜¯æˆ‘ä»¬ç¼–ç¨‹ä¸­ä½¿ç”¨æœ€é¢‘ç¹çš„ç±»å‹ã€‚javaæ˜¯ä¸€ç§å¼ºç±»å‹è¯­è¨€ï¼Œç¬¬ä¸€æ¬¡ç”³æ˜å˜é‡å¿…é¡»è¯´æ˜æ•°æ®ç±»å‹ï¼ˆJava 9 ä¹‹åçš„ varç±»å‹æ¨æ–­ï¼Œäº†è§£ä¸€ä¸‹ï¼‰ï¼Œç¬¬ä¸€æ¬¡å˜é‡èµ‹å€¼ç§°ä¸ºå˜é‡çš„åˆå§‹åŒ–ã€‚ 1. Javaçš„ç®€å•ç±»å‹åŠå…¶å°è£…å™¨ç±»JavaåŸºæœ¬ç±»å‹å…±æœ‰å…«ç§ï¼ŒåŸºæœ¬ç±»å‹å¯ä»¥åˆ†ä¸ºä¸‰ç±»ï¼Œå­—ç¬¦ç±»å‹charï¼Œå¸ƒå°”ç±»å‹booleanä»¥åŠæ•°å€¼ç±»å‹byteã€shortã€intã€longã€floatã€doubleã€‚æ•°å€¼ç±»å‹åˆå¯ä»¥åˆ†ä¸ºæ•´æ•°ç±»å‹byteã€shortã€intã€longå’Œæµ®ç‚¹æ•°ç±»å‹floatã€doubleã€‚JAVAä¸­çš„æ•°å€¼ç±»å‹ä¸å­˜åœ¨æ— ç¬¦å·çš„ï¼Œå®ƒä»¬çš„å–å€¼èŒƒå›´æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šéšç€æœºå™¨ç¡¬ä»¶ç¯å¢ƒæˆ–è€…æ“ä½œç³»ç»Ÿçš„æ”¹å˜è€Œæ”¹å˜ã€‚å®é™…ä¸Šï¼ŒJAVAä¸­è¿˜å­˜åœ¨å¦å¤–ä¸€ç§åŸºæœ¬ç±»å‹voidï¼Œå®ƒä¹Ÿæœ‰å¯¹åº”çš„åŒ…è£…ç±» java.lang.Voidï¼Œä¸è¿‡æˆ‘ä»¬æ— æ³•ç›´æ¥å¯¹å®ƒä»¬è¿›è¡Œæ“ä½œã€‚8 ä¸­ç±»å‹è¡¨ç¤ºèŒƒå›´å¦‚ä¸‹ï¼š 123456789101112131415byteï¼š8ä½ï¼Œæœ€å¤§å­˜å‚¨æ•°æ®é‡æ˜¯255ï¼Œå­˜æ”¾çš„æ•°æ®èŒƒå›´æ˜¯-128~127ä¹‹é—´ã€‚charï¼š16ä½ï¼Œå­˜å‚¨Unicodeç ï¼Œç”¨å•å¼•å·èµ‹å€¼ã€‚shortï¼š16ä½ï¼Œæœ€å¤§æ•°æ®å­˜å‚¨é‡æ˜¯65536ï¼Œæ•°æ®èŒƒå›´æ˜¯-32768~32767ä¹‹é—´ã€‚intï¼š32ä½ï¼Œæœ€å¤§æ•°æ®å­˜å‚¨å®¹é‡æ˜¯2çš„32æ¬¡æ–¹å‡1ï¼Œæ•°æ®èŒƒå›´æ˜¯è´Ÿçš„2çš„31æ¬¡æ–¹åˆ°æ­£çš„2çš„31æ¬¡æ–¹å‡1ã€‚longï¼š64ä½ï¼Œæœ€å¤§æ•°æ®å­˜å‚¨å®¹é‡æ˜¯2çš„64æ¬¡æ–¹å‡1ï¼Œæ•°æ®èŒƒå›´ä¸ºè´Ÿçš„2çš„63æ¬¡æ–¹åˆ°æ­£çš„2çš„63æ¬¡æ–¹å‡1ã€‚floatï¼š32ä½ï¼Œæ•°æ®èŒƒå›´åœ¨3.4e-45~1.4e38ï¼Œç›´æ¥èµ‹å€¼æ—¶å¿…é¡»åœ¨æ•°å­—ååŠ ä¸Šfæˆ–Fã€‚doubleï¼š64ä½ï¼Œæ•°æ®èŒƒå›´åœ¨4.9e-324~1.8e308ï¼Œèµ‹å€¼æ—¶å¯ä»¥åŠ dæˆ–Dä¹Ÿå¯ä»¥ä¸åŠ ã€‚booleanï¼šåªæœ‰trueå’Œfalseä¸¤ä¸ªå–å€¼ã€‚ å¯¹äºæ•°å€¼ç±»å‹çš„åŸºæœ¬ç±»å‹çš„å–å€¼èŒƒå›´ï¼Œæˆ‘ä»¬æ— éœ€å¼ºåˆ¶å»è®°å¿†ï¼Œå› ä¸ºå®ƒä»¬çš„å€¼éƒ½å·²ç»ä»¥å¸¸é‡çš„å½¢å¼å®šä¹‰åœ¨å¯¹åº”çš„åŒ…è£…ç±»ä¸­äº†ã€‚å¦‚ï¼š 12345678910111213141516171819åŸºæœ¬ç±»å‹byte äºŒè¿›åˆ¶ä½æ•°ï¼šByte.SIZEæœ€å°å€¼ï¼šByte.MIN_VALUEæœ€å¤§å€¼ï¼šByte.MAX_VALUEåŸºæœ¬ç±»å‹shortäºŒè¿›åˆ¶ä½æ•°ï¼šShort.SIZEæœ€å°å€¼ï¼šShort.MIN_VALUEæœ€å¤§å€¼ï¼šShort.MAX_VALUEåŸºæœ¬ç±»å‹charäºŒè¿›åˆ¶ä½æ•°ï¼šCharacter.SIZEæœ€å°å€¼ï¼šCharacter.MIN_VALUEæœ€å¤§å€¼ï¼šCharacter.MAX_VALUEåŸºæœ¬ç±»å‹double äºŒè¿›åˆ¶ä½æ•°ï¼šDouble.SIZEæœ€å°å€¼ï¼šDouble.MIN_VALUEæœ€å¤§å€¼ï¼šDouble.MAX_VALUE æ³¨æ„ï¼šfloatã€double ä¸¤ç§ç±»å‹çš„æœ€å°å€¼ä¸ Float.MIN_VALUEã€ Double.MIN_VALUE çš„å€¼å¹¶ä¸ç›¸åŒï¼Œå®é™…ä¸Š Float.MIN_VALUE å’Œ Double.MIN_VALUE åˆ†åˆ«æŒ‡çš„æ˜¯ float å’Œ double ç±»å‹æ‰€èƒ½è¡¨ç¤ºçš„æœ€å°æ­£æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´å­˜åœ¨è¿™æ ·ä¸€ç§æƒ…å†µï¼Œ0 åˆ° Â±Float.MIN_VALUE ä¹‹é—´çš„å€¼ float ç±»å‹æ— æ³•è¡¨ç¤ºï¼Œ0 åˆ° Â±Double.MIN_VALUE ä¹‹é—´çš„å€¼ double ç±»å‹æ— æ³•è¡¨ç¤ºã€‚è¿™å¹¶æ²¡æœ‰ä»€ä¹ˆå¥½å¥‡æ€ªçš„ï¼Œå› ä¸ºè¿™äº›èŒƒå›´å†…çš„æ•°å€¼è¶…å‡ºäº†å®ƒä»¬çš„ç²¾åº¦èŒƒå›´ã€‚ Floatå’ŒDoubleçš„æœ€å°å€¼å’Œæœ€å¤§å€¼éƒ½æ˜¯ä»¥ç§‘å­¦è®°æ•°æ³•çš„å½¢å¼è¾“å‡ºçš„ï¼Œç»“å°¾çš„â€E+æ•°å­—â€è¡¨ç¤ºEä¹‹å‰çš„æ•°å­—è¦ä¹˜ä»¥10çš„å¤šå°‘å€ã€‚æ¯”å¦‚3.14E3å°±æ˜¯3.14Ã—1000=3140ï¼Œ3.14E-3å°±æ˜¯3.14/1000=0.00314ã€‚ JavaåŸºæœ¬ç±»å‹å­˜å‚¨åœ¨æ ˆä¸­ï¼Œå› æ­¤å®ƒä»¬çš„å­˜å–é€Ÿåº¦è¦å¿«äºå­˜å‚¨åœ¨å †ä¸­çš„å¯¹åº”åŒ…è£…ç±»çš„å®ä¾‹å¯¹è±¡ã€‚ä»Java5.0ï¼ˆ1.5ï¼‰å¼€å§‹ï¼ŒJAVAè™šæ‹Ÿæœºï¼ˆJava Virtual Machineï¼‰å¯ä»¥å®ŒæˆåŸºæœ¬ç±»å‹å’Œå®ƒä»¬å¯¹åº”åŒ…è£…ç±»ä¹‹é—´çš„è‡ªåŠ¨è½¬æ¢ã€‚å› æ­¤æˆ‘ä»¬åœ¨èµ‹å€¼ã€å‚æ•°ä¼ é€’ä»¥åŠæ•°å­¦è¿ç®—çš„æ—¶å€™åƒä½¿ç”¨åŸºæœ¬ç±»å‹ä¸€æ ·ä½¿ç”¨å®ƒä»¬çš„åŒ…è£…ç±»ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡åŸºæœ¬ç±»å‹è°ƒç”¨å®ƒä»¬çš„åŒ…è£…ç±»æ‰å…·æœ‰çš„æ–¹æ³•ã€‚å¦å¤–ï¼Œæ‰€æœ‰åŸºæœ¬ç±»å‹ï¼ˆåŒ…æ‹¬voidï¼‰çš„åŒ…è£…ç±»éƒ½ä½¿ç”¨äº†finalä¿®é¥°ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•ç»§æ‰¿å®ƒä»¬æ‰©å±•æ–°çš„ç±»ï¼Œä¹Ÿæ— æ³•é‡å†™å®ƒä»¬çš„ä»»ä½•æ–¹æ³•ã€‚ åŸºæœ¬ç±»å‹çš„ä¼˜åŠ¿ï¼šæ•°æ®å­˜å‚¨ç›¸å¯¹ç®€å•ï¼Œè¿ç®—æ•ˆç‡æ¯”è¾ƒé«˜åŒ…è£…ç±»çš„ä¼˜åŠ¿ï¼šæœ‰çš„å®¹æ˜“ï¼Œæ¯”å¦‚é›†åˆçš„å…ƒç´ å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹ï¼Œæ»¡è¶³äº†javaä¸€åˆ‡çš†æ˜¯å¯¹è±¡çš„æ€æƒ³ 2.Javaä¸­çš„å¸¸é‡åå…­è¿›åˆ¶æ•´å‹å¸¸é‡ï¼šä»¥åå…­è¿›åˆ¶è¡¨ç¤ºæ—¶ï¼Œéœ€ä»¥0xæˆ–0Xå¼€å¤´ï¼Œå¦‚0xff,0X9Aã€‚ å…«è¿›åˆ¶æ•´å‹å¸¸é‡ï¼šå…«è¿›åˆ¶å¿…é¡»ä»¥0å¼€å¤´ï¼Œå¦‚0123ï¼Œ034ã€‚ é•¿æ•´å‹ï¼šé•¿æ•´å‹å¿…é¡»ä»¥Lä½œç»“å°¾ï¼Œå¦‚9L,342Lã€‚ æµ®ç‚¹æ•°å¸¸é‡ï¼šç”±äºå°æ•°å¸¸é‡çš„é»˜è®¤ç±»å‹æ˜¯doubleå‹ï¼Œæ‰€ä»¥floatç±»å‹çš„åé¢ä¸€å®šè¦åŠ f(F)ã€‚åŒæ ·å¸¦å°æ•°çš„å˜é‡é»˜è®¤ä¸ºdoubleç±»å‹ã€‚ å¦‚ï¼šfloat f; 12//å¿…é¡»å£°æ˜ff = 1.3f; å­—ç¬¦å¸¸é‡ï¼šå­—ç¬¦å‹å¸¸é‡éœ€ç”¨ä¸¤ä¸ªå•å¼•å·æ‹¬èµ·æ¥ï¼ˆæ³¨æ„å­—ç¬¦ä¸²å¸¸é‡æ˜¯ç”¨ä¸¤ä¸ªåŒå¼•å·æ‹¬èµ·æ¥ï¼‰ã€‚Javaä¸­çš„å­—ç¬¦å ä¸¤ä¸ªå­—èŠ‚(å› ä¸ºå­—ç¬¦æ˜¯charï¼Œä¸€ä¸ª\b char å ä¸¤ä¸ªå­—èŠ‚ï¼Œ16ä½)ã€‚ä¸€äº›å¸¸ç”¨çš„è½¬ä¹‰å­—ç¬¦ï¼š 12345678910111213\\rè¡¨ç¤ºæ¥å—é”®ç›˜è¾“å…¥ï¼Œç›¸å½“äºæŒ‰ä¸‹äº†å›è½¦é”®ï¼›\\nè¡¨ç¤ºæ¢è¡Œï¼›\\tè¡¨ç¤ºåˆ¶è¡¨ç¬¦ï¼Œç›¸å½“äºTableé”®ï¼›\\bè¡¨ç¤ºé€€æ ¼é”®ï¼Œç›¸å½“äºBack Spaceé”®ï¼›\\&apos;è¡¨ç¤ºå•å¼•å·ï¼›\\&apos;&apos;è¡¨ç¤ºåŒå¼•å·ï¼›\\\\è¡¨ç¤ºä¸€ä¸ªæ–œæ \\ã€‚ 3. æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢1ã€ç®€å•ç±»å‹æ•°æ®é—´çš„è½¬æ¢,æœ‰ä¸¤ç§æ–¹å¼:è‡ªåŠ¨è½¬æ¢å’Œå¼ºåˆ¶è½¬æ¢,é€šå¸¸å‘ç”Ÿåœ¨è¡¨è¾¾å¼ä¸­æˆ–æ–¹æ³•çš„å‚æ•°ä¼ é€’æ—¶ã€‚ è‡ªåŠ¨è½¬æ¢: å…·ä½“åœ°è®²,å½“ä¸€ä¸ªè¾ƒâ€å°â€æ•°æ®ä¸ä¸€ä¸ªè¾ƒâ€å¤§â€çš„æ•°æ®ä¸€èµ·è¿ç®—æ—¶,ç³»ç»Ÿå°†è‡ªåŠ¨å°†â€å°â€æ•°æ®è½¬æ¢æˆâ€å¤§â€æ•°æ®,å†è¿›è¡Œè¿ç®—ã€‚è€Œåœ¨æ–¹æ³•è°ƒç”¨æ—¶,å®é™…å‚æ•°è¾ƒâ€å°â€,è€Œè¢«è°ƒç”¨çš„æ–¹æ³•çš„å½¢å¼å‚æ•°æ•°æ®åˆè¾ƒâ€å¤§â€æ—¶(è‹¥æœ‰åŒ¹é…çš„,å½“ç„¶ä¼šç›´æ¥è°ƒç”¨åŒ¹é…çš„æ–¹æ³•),ç³»ç»Ÿä¹Ÿå°†è‡ªåŠ¨å°†â€å°â€æ•°æ®è½¬æ¢æˆâ€å¤§â€æ•°æ®,å†è¿›è¡Œæ–¹æ³•çš„è°ƒç”¨,è‡ªç„¶,å¯¹äºå¤šä¸ªåŒåçš„é‡è½½æ–¹æ³•,ä¼šè½¬æ¢æˆæœ€â€æ¥è¿‘â€çš„â€å¤§â€æ•°æ®å¹¶è¿›è¡Œè°ƒç”¨ã€‚è¿™äº›ç±»å‹ç”±â€å°â€åˆ°â€å¤§â€åˆ†åˆ«ä¸º (byteï¼Œshortï¼Œchar)--int--long--floatâ€”doubleã€‚è¿™é‡Œæˆ‘ä»¬æ‰€è¯´çš„â€å¤§â€ä¸â€å°â€,å¹¶ä¸æ˜¯æŒ‡å ç”¨å­—èŠ‚çš„å¤šå°‘,è€Œæ˜¯æŒ‡è¡¨ç¤ºå€¼çš„èŒƒå›´çš„å¤§å°ã€‚ 12345678910111213â‘ ä¸‹é¢çš„è¯­å¥å¯ä»¥åœ¨Javaä¸­ç›´æ¥é€šè¿‡ï¼šbyte b;int i=b; long l=b; float f=b; double d=b;â‘¡å¦‚æœä½çº§ç±»å‹ä¸ºcharå‹ï¼Œå‘é«˜çº§ç±»å‹ï¼ˆæ•´å‹ï¼‰è½¬æ¢æ—¶ï¼Œä¼šè½¬æ¢ä¸ºå¯¹åº”ASCIIç å€¼ï¼Œä¾‹å¦‚char c=&apos;c&apos;; int i=c;System.out.println(&quot;output:&quot;+i);è¾“å‡ºï¼šoutput:99;â‘¢å¯¹äºbyte,short,charä¸‰ç§ç±»å‹è€Œè¨€ï¼Œä»–ä»¬æ˜¯å¹³çº§çš„ï¼Œå› æ­¤ä¸èƒ½ç›¸äº’è‡ªåŠ¨è½¬æ¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹è¿°çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚short i=99 ; char c=(char)i; System.out.println(&quot;output:&quot;+c);è¾“å‡ºï¼šoutput:c; å¼ºåˆ¶è½¬æ¢: å°†â€å¤§â€æ•°æ®è½¬æ¢ä¸ºâ€å°â€æ•°æ®æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚å³ä½ å¿…é¡»é‡‡ç”¨ä¸‹é¢è¿™ç§è¯­å¥æ ¼å¼ï¼š int n=(int)3.14159/2;å¯ä»¥æƒ³è±¡ï¼Œè¿™ç§è½¬æ¢è‚¯å®šå¯èƒ½ä¼šå¯¼è‡´æº¢å‡ºæˆ–ç²¾åº¦çš„ä¸‹é™ã€‚ 2ã€è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹è‡ªåŠ¨æå‡, å…³äºç±»å‹çš„è‡ªåŠ¨æå‡ï¼Œæ³¨æ„ä¸‹é¢çš„è§„åˆ™ã€‚ 1234567â‘ æ‰€æœ‰çš„byte,short,charå‹çš„å€¼å°†è¢«æå‡ä¸ºintå‹ï¼›â‘¡å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯longå‹ï¼Œè®¡ç®—ç»“æœæ˜¯longå‹ï¼›â‘¢å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯floatå‹ï¼Œè®¡ç®—ç»“æœæ˜¯floatå‹ï¼›â‘£å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯doubleå‹ï¼Œè®¡ç®—ç»“æœæ˜¯doubleå‹ï¼› ä¾‹ï¼Œ byte b; b=3; b=(byte)(b*3);//å¿…é¡»å£°æ˜byteã€‚ps: è¿ç®—æ‰ä¼šæå‡ç±»å‹ï¼Œb=3ä¸ä¼šæŠŠ byte b å˜æˆ int b,è€Œb=b*3ä¼šæå‡ï¼› 3ã€åŒ…è£…ç±»è¿‡æ¸¡ç±»å‹è½¬æ¢ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é¦–å…ˆå£°æ˜ä¸€ä¸ªå˜é‡ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„åŒ…è£…ç±»ï¼Œå°±å¯ä»¥åˆ©ç”¨åŒ…è£…ç±»çš„å„ç§æ–¹æ³•è¿›è¡Œç±»å‹è½¬æ¢äº†ã€‚ä¾‹å¦‚ï¼š 123456789101112131415â‘ å½“å¸Œæœ›æŠŠfloatå‹è½¬æ¢ä¸ºdoubleå‹æ—¶ï¼šfloat f1 = 100.00f;Float F1 = new Float(f1);double d1 = F1.doubleValue(); //F1.doubleValue()ä¸ºFloatç±»çš„è¿”å›doubleå€¼å‹çš„æ–¹æ³•â‘¡å½“å¸Œæœ›æŠŠdoubleå‹è½¬æ¢ä¸ºintå‹æ—¶ï¼šdouble d1 = 100.00;Double D1 = new Double(d1);int i1 = D1.intValue(); ç®€å•ç±»å‹çš„å˜é‡è½¬æ¢ä¸ºç›¸åº”çš„åŒ…è£…ç±»ï¼Œå¯ä»¥åˆ©ç”¨åŒ…è£…ç±»çš„æ„é€ å‡½æ•°ã€‚å³ï¼šBoolean(boolean value)ã€Character(char value)ã€Integer(int value)ã€Long(long value)ã€Float(float value)ã€Double(double value) è€Œåœ¨å„ä¸ªåŒ…è£…ç±»ä¸­ï¼Œæ€»æœ‰å½¢ä¸ºÃ—Ã—Value()çš„æ–¹æ³•ï¼Œæ¥å¾—åˆ°å…¶å¯¹åº”çš„ç®€å•ç±»å‹æ•°æ®ã€‚åˆ©ç”¨è¿™ç§æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®ç°ä¸åŒæ•°å€¼å‹å˜é‡é—´çš„è½¬æ¢ï¼Œä¾‹å¦‚ï¼Œå¯¹äºä¸€ä¸ªåŒç²¾åº¦å®å‹ç±»ï¼ŒintValue()å¯ä»¥å¾—åˆ°å…¶å¯¹åº”çš„æ•´å‹å˜é‡ï¼Œè€ŒdoubleValue()å¯ä»¥å¾—åˆ°å…¶å¯¹åº”çš„åŒç²¾åº¦å®å‹å˜é‡ã€‚ 4ã€å­—ç¬¦ä¸²ä¸å…¶å®ƒç±»å‹é—´çš„è½¬æ¢ å…¶å®ƒç±»å‹å‘å­—ç¬¦ä¸²çš„è½¬æ¢ 12345â‘ è°ƒç”¨ç±»çš„ä¸²è½¬æ¢æ–¹æ³•: X.toString();â‘¡è‡ªåŠ¨è½¬æ¢: X + &quot;&quot;;â‘¢ä½¿ç”¨ String çš„æ–¹æ³•: String.volueOf(X); å­—ç¬¦ä¸²ä½œä¸ºå€¼,å‘å…¶å®ƒç±»å‹çš„è½¬æ¢ 123456789101112131415161718192021â‘ å…ˆè½¬æ¢æˆç›¸åº”çš„å°è£…å™¨å®ä¾‹,å†è°ƒç”¨å¯¹åº”çš„æ–¹æ³•è½¬æ¢æˆå…¶å®ƒç±»å‹ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸­&quot;32.1&quot;è½¬æ¢`double`å‹çš„å€¼çš„æ ¼å¼ä¸º:`new Float(&quot;32.1&quot;).doubleValue()`ã€‚ä¹Ÿå¯ä»¥ç”¨:`Double.valueOf(&quot;32.1&quot;).doubleValue()`â‘¡é™æ€ parseXXX æ–¹æ³•String s = &quot;1&quot;;byte b = Byte.parseByte( s );short t = Short.parseShort( s );int i = Integer.parseInt( s );long l = Long.parseLong( s );Float f = Float.parseFloat( s );Double d = Double.parseDouble( s );â‘¢Character çš„ getNumericValue(char ch)æ–¹æ³• 5ã€Dateç±»ä¸å…¶å®ƒæ•°æ®ç±»å‹çš„ç›¸äº’è½¬æ¢ æ•´å‹å’ŒDateç±»ä¹‹é—´å¹¶ä¸å­˜åœ¨ç›´æ¥çš„å¯¹åº”å…³ç³»ï¼Œåªæ˜¯ä½ å¯ä»¥ä½¿ç”¨intå‹ä¸ºåˆ†åˆ«è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ï¼Œè¿™æ ·å°±åœ¨ä¸¤è€…ä¹‹é—´å»ºç«‹äº†ä¸€ä¸ªå¯¹åº”å…³ç³»ï¼Œåœ¨ä½œè¿™ç§è½¬æ¢æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨Dateç±»æ„é€ å‡½æ•°çš„ä¸‰ç§å½¢å¼ï¼š 12345â‘ Date(int year, int month, int date)ï¼šä»¥intå‹è¡¨ç¤ºå¹´ã€æœˆã€æ—¥â‘¡Date(int year, int month, int date, int hrs, int min)ï¼šä»¥intå‹è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†â‘¢Date(int year, int month, int date, int hrs, int min, int sec)ï¼šä»¥intå‹è¡¨ç¤ºå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ åœ¨é•¿æ•´å‹å’ŒDateç±»ä¹‹é—´æœ‰ä¸€ä¸ªå¾ˆæœ‰è¶£çš„å¯¹åº”å…³ç³»ï¼Œå°±æ˜¯å°†ä¸€ä¸ªæ—¶é—´è¡¨ç¤ºä¸ºè·ç¦»æ ¼æ—å°¼æ²»æ ‡å‡†æ—¶é—´1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’çš„æ¯«ç§’æ•°ã€‚å¯¹äºè¿™ç§å¯¹åº”å…³ç³»ï¼ŒDateç±»ä¹Ÿæœ‰å…¶ç›¸åº”çš„æ„é€ å‡½æ•°ï¼šDate(long date)ã€‚ è·å–Dateç±»ä¸­çš„å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ä»¥åŠæ˜ŸæœŸä½ å¯ä»¥ä½¿ç”¨Dateç±»çš„getYear()ã€getMonth()ã€getDate()ã€getHours()ã€getMinutes()ã€getSeconds()ã€getDay()æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶ç†è§£ä¸ºå°†Dateç±»è½¬æ¢æˆintã€‚ è€ŒDateç±»çš„getTime()æ–¹æ³•å¯ä»¥å¾—åˆ°æˆ‘ä»¬å‰é¢æ‰€è¯´çš„ä¸€ä¸ªæ—¶é—´å¯¹åº”çš„é•¿æ•´å‹æ•°ï¼Œä¸åŒ…è£…ç±»ä¸€æ ·ï¼ŒDateç±»ä¹Ÿæœ‰ä¸€ä¸ªtoString()æ–¹æ³•å¯ä»¥å°†å…¶è½¬æ¢ä¸ºStringç±»ã€‚ æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å¾—åˆ°Dateçš„ç‰¹å®šæ ¼å¼ï¼Œä¾‹å¦‚20020324ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•: 1234567891011121314151617181920212223242526272829import java.text.SimpleDateFormat;import java.util.*;java.util.Date date = new java.util.Date(); //å¦‚æœå¸Œæœ›å¾—åˆ°YYYYMMDDçš„æ ¼å¼SimpleDateFormat sy1 = new SimpleDateFormat(&quot;yyyyMMDD&quot;);String dateFormat = sy1.format(date);//å¦‚æœå¸Œæœ›åˆ†å¼€å¾—åˆ°å¹´ï¼Œæœˆï¼Œæ—¥SimpleDateFormat sy = new SimpleDateFormat(&quot;yyyy&quot;);SimpleDateFormat sm = new SimpleDateFormat(&quot;MM&quot;);SimpleDateFormat sd = new SimpleDateFormat(&quot;dd&quot;);String syear = sy.format(date);String smon = sm.format(date);String sday = sd.format(date); æ€»ç»“ï¼šåªæœ‰booleanä¸å‚ä¸æ•°æ®ç±»å‹çš„è½¬æ¢ 123456789101112131.è‡ªåŠ¨ç±»å‹çš„è½¬æ¢ï¼ša.å¸¸æ•°åœ¨è¡¨æ•°èŒƒå›´å†…æ˜¯èƒ½å¤Ÿè‡ªåŠ¨ç±»å‹è½¬æ¢çš„b.æ•°æ®èŒƒå›´å°çš„èƒ½å¤Ÿè‡ªåŠ¨å‘æ•°æ®ç±»å‹å¤§çš„è½¬æ¢ï¼ˆæ³¨æ„ç‰¹ä¾‹ï¼‰int åˆ° floatï¼Œlong åˆ° floatï¼Œlong åˆ° double åŒæ ·å¯ä»¥è‡ªåŠ¨è½¬æ¢çš„ï¼Œåªä¸è¿‡ä¼šä¸¢å¤±ç²¾åº¦ï¼Œå› ä¸ºå­˜å‚¨ç»“æ„ä¸åŒc.å¼•ç”¨ç±»å‹èƒ½å¤Ÿè‡ªåŠ¨è½¬æ¢ä¸ºçˆ¶ç±»d.åŸºæœ¬ç±»å‹å’Œå®ƒä»¬åŒ…è£…ç±»å‹æ˜¯èƒ½å¤Ÿäº’ç›¸è½¬æ¢çš„2.å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šç”¨åœ†æ‹¬å·æ‹¬èµ·æ¥ç›®æ ‡ç±»å‹ï¼Œç½®äºå˜é‡å‰ 4.Javaå¼•ç”¨ç±»å‹Javaæœ‰ 5 ç§å¼•ç”¨ç±»å‹ï¼ˆå¯¹è±¡ç±»å‹ï¼‰ï¼šç±» æ¥å£ æ•°ç»„ æšä¸¾ æ ‡æ³¨ å¼•ç”¨ç±»å‹ï¼šåº•å±‚ç»“æ„å’ŒåŸºæœ¬ç±»å‹å·®åˆ«è¾ƒå¤§ JVMçš„å†…å­˜ç©ºé—´ï¼š 1234567891011121314151617ï¼ˆ1ï¼‰Heap å †ç©ºé—´ï¼šåˆ†é…å¯¹è±¡ `new Studentï¼ˆï¼‰`ï¼ˆ2ï¼‰Stack æ ˆç©ºé—´ï¼šä¸´æ—¶å˜é‡ `Student stu`ï¼ˆ3ï¼‰Code ä»£ç åŒº ï¼šç±»çš„å®šä¹‰ï¼Œé™æ€èµ„æº `Student.class`egï¼šStudent stu = new Studentï¼ˆï¼‰ï¼› //new åœ¨å†…å­˜çš„å †ç©ºé—´åˆ›å»ºå¯¹è±¡stu.study(); //æŠŠå¯¹è±¡çš„åœ°å€èµ‹ç»™stuå¼•ç”¨å˜é‡ä¸Šä¾‹å®ç°æ­¥éª¤ï¼ša.JVM åŠ è½½ `Student.class` åˆ°CodeåŒºb.`new Student()`åœ¨å †ç©ºé—´åˆ†é…ç©ºé—´å¹¶åˆ›å»ºä¸€ä¸ªStudentå®ä¾‹c.å°†æ­¤å®ä¾‹çš„åœ°å€èµ‹å€¼ç»™å¼•ç”¨`stu`æ ˆç©ºé—´","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Java-Fundamental","slug":"Code/Java-Fundamental","permalink":"http://xiaoqinghua.site/categories/Code/Java-Fundamental/"}],"tags":[{"name":"Java-Fundamental","slug":"Java-Fundamental","permalink":"http://xiaoqinghua.site/tags/Java-Fundamental/"}]},{"title":"RedisåŸºç¡€åŠé«˜çº§ç‰¹æ€§ä¸æ€§èƒ½è°ƒä¼˜","slug":"RedisåŸºç¡€åŠé«˜çº§ç‰¹æ€§ä¸æ€§èƒ½è°ƒä¼˜","date":"2017-07-23T14:35:52.000Z","updated":"2018-08-24T07:45:04.148Z","comments":true,"path":"RedisåŸºç¡€åŠé«˜çº§ç‰¹æ€§ä¸æ€§èƒ½è°ƒä¼˜.html","link":"","permalink":"http://xiaoqinghua.site/RedisåŸºç¡€åŠé«˜çº§ç‰¹æ€§ä¸æ€§èƒ½è°ƒä¼˜.html","excerpt":"","text":"æœ¬æ–‡å°†ä» Redis çš„åŸºæœ¬ç‰¹æ€§å…¥æ‰‹ï¼Œé€šè¿‡è®²è¿° Redis çš„æ•°æ®ç»“æ„å’Œä¸»è¦å‘½ä»¤å¯¹ Redis çš„åŸºæœ¬æ€§èƒ½è¿›è¡Œç›´è§‚çš„ä»‹ç»ã€‚ä¹‹åæ¦‚è§ˆ Redis æä¾›çš„é«˜çº§èƒ½åŠ›ï¼Œå¹¶åœ¨éƒ¨ç½²ã€ç»´æŠ¤ã€æ€§èƒ½è°ƒä¼˜ç­‰å¤šä¸ªæ–¹é¢è¿›è¡Œæ›´æ·±å…¥çš„ä»‹ç»å’ŒæŒ‡å¯¼ã€‚ æœ¬æ–‡é€‚åˆä½¿ç”¨ Redis çš„æ™®é€šå¼€å‘äººå‘˜ï¼Œä»¥åŠå¯¹ Redis è¿›è¡Œé€‰å‹ã€æ¶æ„è®¾è®¡å’Œæ€§èƒ½è°ƒä¼˜çš„æ¶æ„è®¾è®¡äººå‘˜ã€‚ ç›®å½• æ¦‚è¿° Redis çš„æ•°æ®ç»“æ„å’Œç›¸å…³å¸¸ç”¨å‘½ä»¤ æ•°æ®æŒä¹…åŒ– å†…å­˜ç®¡ç†å’Œæ•°æ®æ·˜æ±°æœºåˆ¶ Pipelining äº‹åŠ¡ä¸ Scripting Redis æ€§èƒ½è°ƒä¼˜ ä¸»ä»å¤åˆ¶ä¸é›†ç¾¤åˆ†ç‰‡ Redis Java å®¢æˆ·ç«¯çš„é€‰æ‹© æ¦‚è¿°Redis æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäºå†…å­˜çš„ç»“æ„åŒ–æ•°æ®å­˜å‚¨åª’ä»‹ï¼Œå¯ä»¥ä½œä¸ºæ•°æ®åº“ã€ç¼“å­˜æœåŠ¡æˆ–æ¶ˆæ¯æœåŠ¡ä½¿ç”¨ã€‚Redis æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬å­—ç¬¦ä¸²ã€å“ˆå¸Œè¡¨ã€é“¾è¡¨ã€é›†åˆã€æœ‰åºé›†åˆã€ä½å›¾(Bitmap)ã€HyperLogLogsç­‰ã€‚Redis å…·å¤‡ LRU(Least Recently Use)æ·˜æ±°ã€äº‹åŠ¡å®ç°ã€ä»¥åŠä¸åŒçº§åˆ«çš„ç¡¬ç›˜æŒä¹…åŒ–ç­‰èƒ½åŠ›ï¼Œå¹¶ä¸”æ”¯æŒå‰¯æœ¬é›†å’Œé€šè¿‡ Redis Sentinel å®ç°çš„é«˜å¯ç”¨æ–¹æ¡ˆï¼ŒåŒæ—¶è¿˜æ”¯æŒé€šè¿‡ Redis Cluster å®ç°çš„æ•°æ®è‡ªåŠ¨åˆ†ç‰‡èƒ½åŠ›ã€‚ Redis çš„ä¸»è¦åŠŸèƒ½éƒ½æ˜¯åŸºäº\bå•çº¿ç¨‹æ¨¡å‹\bå®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´ Redis ä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹æ¥æœåŠ¡æ‰€æœ‰çš„å®¢æˆ·ç«¯è¯·æ±‚ï¼ŒåŒæ—¶ Redis é‡‡ç”¨äº†\béé˜»å¡å¼IOï¼Œå¹¶ç²¾ç»†åœ°ä¼˜åŒ–å„ç§å‘½ä»¤\bçš„ç®—æ³•æ—¶é—´å¤æ‚åº¦ï¼Œè¿™äº›ä¿¡æ¯æ„å‘³ç€ï¼š Redis æ˜¯çº¿ç¨‹å®‰å…¨çš„ (å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹)ï¼Œå…¶æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œä¸ä¼šå› ä¸º\bå¹¶å‘äº§ç”Ÿæ•°æ®å¼‚å¸¸ Redis çš„é€Ÿåº¦éå¸¸å¿«ï¼ˆå› ä¸ºä½¿ç”¨çš„æ˜¯éé˜»å¡å¼IOï¼Œä¸”å¤§éƒ¨åˆ†å‘½ä»¤çš„ç®—æ³•æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯O(1)ï¼‰ ä½¿ç”¨é«˜\bè€—æ—¶çš„ \bRedis å‘½ä»¤æ˜¯å¾ˆå±é™©çš„ï¼Œä¼šå ç”¨å”¯ä¸€çš„çº¿ç¨‹çš„å¤§é‡å¤„ç†æ—¶é—´ï¼Œå¯¼è‡´æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹–æ…¢ã€‚ï¼ˆä¾‹å¦‚æ—¶é—´å¤æ‚åº¦ä¸ºO(N)çš„KEYSå‘½ä»¤ï¼Œä¸¥æ ¼ç¦æ­¢åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼‰ Redis çš„æ•°æ®ç»“æ„å’Œç›¸å…³å¸¸ç”¨å‘½ä»¤KeyRedis é‡‡ç”¨Key-Valueå‹çš„åŸºæœ¬æ•°æ®ç»“æ„ï¼Œä»»ä½•äºŒè¿›åˆ¶åºåˆ—éƒ½å¯ä»¥ä½œä¸º Redis çš„ Key ä½¿ç”¨ï¼ˆä¾‹å¦‚æ™®é€šçš„å­—ç¬¦ä¸²æˆ–ä¸€å¼ \b JPEG å›¾ç‰‡ï¼‰å…³äº Key çš„ä¸€äº›æ³¨æ„äº‹é¡¹\b: ä¸è¦ä½¿ç”¨è¿‡é•¿çš„ Keyã€‚\bä¾‹å¦‚ä½¿ç”¨ä¸€ä¸ª1024å­—èŠ‚çš„ key \bå°±ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä¸ä»…ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜ï¼Œè¿˜ä¼šå¯¼è‡´æŸ¥è¯¢çš„æ•ˆç‡é™ä½ Key çŸ­åˆ°ç¼ºå¤±äº†å¯è¯»æ€§ä¹Ÿæ˜¯ä¸å¥½çš„ï¼Œä¾‹å¦‚&quot;u1000flw&quot;æ¯”èµ·&quot;user:1000:followers&quot;æ¥è¯´ï¼ŒèŠ‚çœäº†å¯¥å¯¥çš„å­˜å‚¨ç©ºé—´ï¼Œå´å¼•å‘äº†å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ä¸Šçš„éº»çƒ¦ æœ€å¥½ä½¿ç”¨ç»Ÿä¸€è§„èŒƒæ¥è®¾è®¡ Key ï¼Œæ¯”å¦‚&quot;object-type:id:attr&quot;ï¼Œä»¥\bè¿™ä¸€è§„èŒƒè®¾è®¡å‡ºçš„ Key å¯èƒ½æ˜¯&quot;user:1000&quot;æˆ–è€…&quot;comment:1234:reply-to&quot; Redis å…è®¸çš„æœ€å¤§ Key é•¿åº¦æ˜¯ 512MB (å¯¹ Value çš„é•¿åº¦é™åˆ¶ä¹Ÿæ˜¯ 512MB) StringString æ˜¯ Redis çš„åŸºç¡€æ•°æ®ç±»å‹ï¼ŒRedis æ²¡æœ‰ Intã€Floatã€Booleanç­‰æ•°æ®ç±»å‹çš„æ¦‚å¿µï¼Œæ‰€æœ‰çš„åŸºæœ¬ç±»å‹åœ¨ Redis ä¸­éƒ½ä»¥ \bString ä½“ç° ä¸\b String ç›¸å…³çš„å¸¸ç”¨å‘½ä»¤ï¼š \bSETï¼š ä¸ºä¸€ä¸ª key è®¾ç½® \bvalueï¼Œå¯ä»¥é…åˆEX/PXå‚æ•°æŒ‡å®š key çš„æœ‰æ•ˆæœŸï¼Œ\bé€šè¿‡NX/XXå‚æ•°é’ˆå¯¹ key æ˜¯å¦å­˜åœ¨çš„æƒ…å†µè¿›è¡Œåˆ†åŒºæ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(1) GETï¼š è·å–æŸä¸ª key å¯¹ç”¨çš„ valueï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1) GETSETï¼š ä¸ºä¸€ä¸ª key è®¾ç½® valueï¼Œå¹¶è¿”å›è¯¥ key çš„åŸ valueï¼Œæ—¶é—´å¤æ‚åº¦O(1) MSETï¼š ä¸ºå¤šä¸ª key è®¾ç½® valueï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(N) MSETNXï¼š åŒ MSETï¼Œ\b\bå¦‚æœæŒ‡å®šçš„ key ä¸­æœ‰ä»»æ„ä¸€ä¸ªå·²å­˜åœ¨ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(N) MGETï¼š è·å–\b\b\bå¤šä¸ª key å¯¹åº”çš„ value ï¼Œæ—¶é—´å¤æ‚åº¦O(N) ä¸Šæ–‡æåˆ°è¿‡ï¼ŒRedis çš„åŸºæœ¬æ•°æ®ç±»å‹åªæœ‰ Stringï¼Œä½† Rediså¯ä»¥æŠŠ String ä½œä¸ºæ•´å½¢æˆ–è€…æµ®ç‚¹å‹æ•°å­—æ¥ä½¿ç”¨ï¼Œä¸»è¦ä½“ç°åœ¨INCRã€DECRç±»çš„å‘½ä»¤ä¸Šï¼š INCRï¼šå°† key å¯¹åº”çš„ value å€¼è‡ªå¢1ï¼Œå¹¶è¿”å›è‡ªå¢åçš„å€¼ã€‚åªå¯¹å¯ä»¥è½¬æ¢ä¸ºæ•´å½¢çš„ String æ•°æ®èµ·ä½œç”¨ã€‚æ—¶é—´å¤æ‚åº¦O(1) INCRBYï¼š \bå°† key å¯¹åº”çš„ value å€¼è‡ªå¢æŒ‡å®šçš„æ•´å½¢æ•°å€¼ï¼Œå¹¶è¿”å›è‡ªå¢ä¹‹åçš„å€¼ã€‚åªå¯¹å¯ä»¥è½¬æ¢ä¸ºæ•´å½¢çš„ String æ•°æ®èµ·ä½œç”¨ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºO(1) DECR/DECRBYï¼šåŒINCR/INCRBYï¼Œè‡ªå¢æ”¹ä¸ºè‡ªå‡ INCR/DECRç³»åˆ—å‘½ä»¤è¦æ±‚æ“ä½œçš„ value ç±»å‹ä¸º Stringï¼Œå¹¶å¯ä»¥è½¬æ¢ä¸º64ä½å¸¦ç¬¦å·çš„æ•´å½¢æ•°å­—ï¼Œå¦åˆ™ä¼šè¿”å›é”™è¯¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿›è¡ŒINCR/DECRç³»åˆ—å‘½ä»¤çš„ valueï¼Œ\bå¿…é¡»åœ¨[-2^63~2^63-1]èŒƒå›´å†… å‰æ–‡æåˆ°è¿‡ï¼ŒRedis é‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Œå¤©ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™ä½¿å¾—INCR/DECRå‘½ä»¤å¯ä»¥éå¸¸ä¾¿åˆ©çš„å®ç°é«˜å¹¶å‘åœºæ™¯\bä¸‹çš„ç²¾ç¡®æ§åˆ¶ã€‚ ä¾‹1ï¼šåº“å­˜æ§åˆ¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å®ç°\båº“å­˜ä½™é‡çš„ç²¾å‡†æ ¡éªŒï¼Œç¡®ä¿ä¸å‡ºç°è¶…å–çš„æƒ…å†µ\bè®¾ç½®åº“å­˜æ€»é‡ï¼š 1SET inv:remain &quot;100&quot; åº“å­˜æ‰£å‡ + ä½™é‡æ ¡éªŒ 1DECR inv:remain å½“DECR\bå‘½ä»¤è¿”å›å€¼å¤§äºç­‰äº0æ—¶ï¼Œè¯´æ˜åº“å­˜ä½™é‡é€šè¿‡æ ¡éªŒï¼Œå¦‚æœè¿”å›å°äº0çš„å€¼ï¼Œåˆ™è¯´æ˜åº“å­˜å·²ç»è€—å°½ã€‚ å‡è®¾åŒæ—¶æœ‰300ä¸ªå¹¶å‘è¯·æ±‚è¿›è¡Œåº“å­˜æ‰£å‡ï¼ŒRedis èƒ½å¤Ÿç¡®ä¿è¿™300ä¸ªè¯·æ±‚åˆ†åˆ«å¾—åˆ°99 ~ -200çš„è¿”å›å€¼ï¼Œæ¯ä¸ªè¯·æ±‚å¾—åˆ°çš„è¿”å›å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œç»å¯¹ä¸ä¼šå‡ºç°ä¸¤ä¸ªè¯·æ±‚å¾—åˆ°ä¸€æ ·çš„è¿”å›çš„æƒ…å†µã€‚ ä¾‹2ï¼šè‡ªå¢åºåˆ—ç”Ÿæˆå®ç°ç±»ä¼¼äºRDBMSçš„SequenceåŠŸèƒ½ï¼Œç”Ÿæˆä¸€ç³»åˆ—å”¯ä¸€åºåˆ—å· è®¾ç½®åºåˆ—èµ·å§‹å€¼ï¼š 1SET sequence &quot;10000&quot; è·å–ä¸€ä¸ªåºåˆ—å€¼ï¼š 1INCR sequence ç›´æ¥å°†è¿”å›å€¼ä½œä¸ºåºåˆ—ä½¿ç”¨å³å¯ã€‚ è·å–ä¸€æ‰¹ï¼ˆå¦‚100ä¸ªï¼‰åºåˆ—å€¼ï¼š 1INCRBY sequence 100 å‡è®¾è¿”å›å€¼ä¸ºNï¼Œé‚£ä¹ˆ[N - 99 ~ N]çš„æ•°å€¼éƒ½æ˜¯å¯ä»¥ç”¨çš„åºåˆ—å€¼ã€‚ å½“å¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶å‘ Redis ç”³è¯·è‡ªå¢åºåˆ—æ—¶ï¼ŒRedis èƒ½å¤Ÿç¡®ä¿æ¯ä¸ªå®¢æˆ·ç«¯å¾—åˆ°çš„åºåˆ—å€¼æˆ–åºåˆ—èŒƒå›´éƒ½æ˜¯å…¨å±€å”¯ä¸€çš„ã€‚ç»å¯¹ä¸ä¼šå‡ºç°ä¸åŒå®¢æˆ·ç«¯å¾—åˆ°äº†é‡å¤çš„åºåˆ—å€¼çš„æƒ…å†µã€‚ ListRedis çš„ list æ˜¯é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ä½¿ç”¨LPUSH/RPUSH/LPOP/RPOPç­‰å‘½ä»¤åœ¨ List çš„è¿æ®µæ‰§è¡Œæ’å…¥å…ƒç´ å’Œå¼¹å‡ºå…ƒç´ çš„æ“ä½œã€‚è™½ç„¶ List ä¹Ÿæ”¯æŒåœ¨ç‰¹å®šindexä¸Šæ’å…¥å’Œè¯»å–å…ƒç´ çš„åŠŸèƒ½ï¼Œä½†å…¶æ—¶é—´å¤æ‚åº¦è¾ƒé«˜(O(N))ï¼Œåº”å°å¿ƒä½¿ç”¨ã€‚ ä¸ List ç›¸å…³çš„å¸¸ç”¨å‘½ä»¤ï¼š LPUSHï¼š å‘æŒ‡å®šçš„ List çš„å·¦ä¾§ï¼ˆå³å¤´éƒ¨ï¼‰æ’å…¥1ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œè¿”å›æ’å…¥åçš„ List é•¿åº¦ã€‚æ—¶é—´å¤æ‚åº¦O(N), N ä¸ºæ’å…¥å…ƒç´ çš„æ•°é‡ RPUSHï¼šåŒ LPUSHï¼Œå‘ List çš„å³ä¾§ï¼ˆå³å°¾éƒ¨ï¼‰æ’å…¥ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´  LPOPï¼šä»æŒ‡å®šçš„ List çš„å·¦ä¾§ï¼ˆå³å¤´éƒ¨ï¼‰ç§»é™¤ä¸€ä¸ªå…ƒç´ å¹¶è¿”å›ï¼Œæ—¶é—´å¤æ‚åº¦O(1) RPOPï¼šåŒ LPOP ï¼Œä»æŒ‡å®šçš„ List çš„å³ä¾§ï¼ˆå³å°¾éƒ¨ï¼‰ç§»é™¤ä¸€ä¸ªå…ƒç´ å¹¶è¿”å› LPUSHX/RPUSHXï¼šä¸ LPUSH/RPUSH ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºï¼ŒLPUSHX/RPUSHX æ“ä½œçš„ key å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œ LLENï¼šè¿”å›æŒ‡å®šçš„ List é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦O(1) LRANGEï¼šè¿”å›æŒ‡å®š List ä¸­æŒ‡å®šèŒƒå›´çš„å…ƒç´  ï¼ˆåŒç«¯åŒ…å«ï¼Œå³ LRANGE key 0 10 ä¼šè¿”å›10ä¸ªå…ƒç´ ï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ã€‚åº”å°½å¯èƒ½æ§åˆ¶ä»¥æ­¤è·å–çš„å…ƒç´ æ•°é‡ï¼Œä¸€æ¬¡è·å–è¿‡å¤§èŒƒå›´çš„ List å…ƒç´ ä¼šå¯¼è‡´å»¶è¿Ÿï¼ŒåŒæ—¶å¯¹é•¿åº¦ä¸å¯é¢„çŸ¥çš„ List ï¼Œé¿å…ä½¿ç”¨ LRANGE key 0 -1è¿™æ ·çš„å®Œæ•´ä¾¿åˆ©æ“ä½œ åº”è°¨æ…ä½¿ç”¨çš„ List ç›¸å…³å‘½ä»¤ï¼š LINDEXï¼šè¿”å›æŒ‡å®š List æŒ‡å®š index ä¸Šçš„å…ƒç´ ï¼Œå¦‚æœ index è¶Šç•Œï¼Œè¿”å› nilã€‚index æ•°å€¼æ˜¯å›ç¯çš„ï¼Œå³ -1 ä»£è¡¨ List æœ€åä¸€ä¸ªä½ç½®ï¼Œ-2 ä»£è¡¨ List å€’æ•°ç¬¬äºŒä¸ªä½ç½®ã€‚æ—¶é—´å¤æ‚åº¦O(N) LSETï¼šå°†æŒ‡å®š List æŒ‡å®š index ä¸Šçš„å…ƒç´ è®¾ç½®ä¸º valueï¼Œå¦‚æœ index è¶Šç•Œåˆ™è¿”å›é”™è¯¯ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼Œå¦‚æœæ“ä½œçš„æ˜¯å¤´/å°¾éƒ¨çš„å…ƒç´ ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ä¸ºO(1) LINSERTï¼šå‘æŒ‡å®š List ä¸­æŒ‡å®šå…ƒç´ ä¹‹å‰/ä¹‹åæ’å…¥ä¸€ä¸ªæ–°å…ƒç´ ï¼Œå¹¶è¿”å›æ“ä½œåçš„ List é•¿åº¦ã€‚å¦‚æœæŒ‡å®šçš„å…ƒç´ ä¸å­˜åœ¨ï¼Œè¿”å› -1ã€‚å¦‚æœæŒ‡å®š key ä¸å­˜åœ¨ï¼Œä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(N) ç”±äº Redis çš„ List æ˜¯é“¾è¡¨ç»“æ„çš„ï¼Œä¸Šè¿°çš„ä¸‰ä¸ªå‘½ä»¤çš„ç®—æ³•æ•ˆç‡è¾ƒä½ï¼Œéœ€è¦å¯¹Listè¿›è¡Œéå†ï¼Œå‘½ä»¤çš„è€—æ—¶æ— æ³•é¢„ä¼°ï¼Œåœ¨Listé•¿åº¦å¤§çš„æƒ…å†µä¸‹è€—æ—¶ä¼šæ˜æ˜¾å¢åŠ ï¼Œåº”è°¨æ…ä½¿ç”¨ã€‚ æ¢å¥è¯è¯´ï¼ŒRedis çš„ List å®é™…æ˜¯è®¾è®¡æ¥ç”¨äºå®ç°é˜Ÿåˆ—ï¼Œè€Œä¸æ˜¯ç”¨äºå®ç°ç±»ä¼¼ArrayListè¿™æ ·çš„åˆ—è¡¨çš„ã€‚å¦‚æœä½ ä¸æ˜¯æƒ³è¦å®ç°ä¸€ä¸ªåŒç«¯å‡ºå…¥çš„é˜Ÿåˆ—ï¼Œé‚£ä¹ˆè¯·å°½é‡ä¸è¦ä½¿ç”¨ Redis çš„ List æ•°æ®ç»“æ„ã€‚ ä¸ºäº†æ›´å¥½æ”¯æŒé˜Ÿåˆ—çš„ç‰¹æ€§ï¼ŒRedis è¿˜æä¾›äº†ä¸€ç³»åˆ—é˜»å¡å¼çš„æ“ä½œå‘½ä»¤ï¼Œå¦‚BLPOP/BRPOPç­‰ï¼Œèƒ½å¤Ÿå®ç°ç±»ä¼¼äºBlockingQueueçš„èƒ½åŠ›ï¼Œå³åœ¨ List ä¸ºç©ºæ—¶ï¼Œé˜»å¡è¯¥è¿æ¥ï¼Œç›´åˆ° List ä¸­æœ‰å¯¹è±¡å¯ä»¥å‡ºé˜Ÿæ—¶å†è¿”å›ã€‚ HashHashå³å“ˆå¸Œè¡¨ï¼ŒRedisçš„Hashå’Œä¼ ç»Ÿçš„å“ˆå¸Œè¡¨ä¸€æ ·ï¼Œæ˜¯ä¸€ç§field-valueå‹çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç†è§£æˆå°†HashMapæ¬å…¥Redisã€‚Hashéå¸¸é€‚åˆç”¨äºè¡¨ç°å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œç”¨Hashä¸­çš„fieldå¯¹åº”å¯¹è±¡çš„fieldå³å¯ã€‚Hashçš„ä¼˜ç‚¹åŒ…æ‹¬ï¼š å¯ä»¥å®ç°äºŒå…ƒæŸ¥æ‰¾ï¼Œå¦‚â€æŸ¥æ‰¾IDä¸º1000çš„ç”¨æˆ·çš„å¹´é¾„â€ æ¯”èµ·å°†æ•´ä¸ªå¯¹è±¡åºåˆ—åŒ–åä½œä¸ºStringå­˜å‚¨çš„æ–¹æ³•ï¼ŒHashèƒ½å¤Ÿæœ‰æ•ˆåœ°å‡å°‘ç½‘ç»œä¼ è¾“çš„æ¶ˆè€— å½“ä½¿ç”¨Hashç»´æŠ¤ä¸€ä¸ªé›†åˆæ—¶ï¼Œæä¾›äº†æ¯”Listæ•ˆç‡é«˜å¾—å¤šçš„éšæœºè®¿é—®å‘½ä»¤ ä¸Hashç›¸å…³çš„å¸¸ç”¨å‘½ä»¤ï¼š HSETï¼šå°†keyå¯¹åº”çš„Hashä¸­çš„fieldè®¾ç½®ä¸ºvalueã€‚å¦‚æœè¯¥Hashä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚æ—¶é—´å¤æ‚åº¦O(1) HGETï¼šè¿”å›æŒ‡å®šHashä¸­fieldå­—æ®µçš„å€¼ï¼Œæ—¶é—´å¤æ‚åº¦O(1) HMSET/HMGETï¼šåŒHSETå’ŒHGETï¼Œå¯ä»¥æ‰¹é‡æ“ä½œåŒä¸€ä¸ªkeyä¸‹çš„å¤šä¸ªfieldï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼ŒNä¸ºä¸€æ¬¡æ“ä½œçš„fieldæ•°é‡ HSETNXï¼šåŒHSETï¼Œä½†å¦‚fieldå·²ç»å­˜åœ¨ï¼ŒHSETNXä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(1) HEXISTSï¼šåˆ¤æ–­æŒ‡å®šHashä¸­fieldæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨è¿”å›1ï¼Œä¸å­˜åœ¨è¿”å›0ï¼Œæ—¶é—´å¤æ‚åº¦O(1) HDELï¼šåˆ é™¤æŒ‡å®šHashä¸­çš„fieldï¼ˆ1ä¸ªæˆ–å¤šä¸ªï¼‰ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼ŒNä¸ºæ“ä½œçš„fieldæ•°é‡ HINCRBYï¼šåŒINCRBYå‘½ä»¤ï¼Œå¯¹æŒ‡å®šHashä¸­çš„ä¸€ä¸ªfieldè¿›è¡ŒINCRBYï¼Œæ—¶é—´å¤æ‚åº¦O(1) åº”è°¨æ…ä½¿ç”¨çš„Hashç›¸å…³å‘½ä»¤ï¼š HGETALLï¼šè¿”å›æŒ‡å®šHashä¸­æ‰€æœ‰çš„field-valueå¯¹ã€‚è¿”å›ç»“æœä¸ºæ•°ç»„ï¼Œæ•°ç»„ä¸­fieldå’Œvalueäº¤æ›¿å‡ºç°ã€‚æ—¶é—´å¤æ‚åº¦O(N) HKEYS/HVALSï¼šè¿”å›æŒ‡å®šHashä¸­æ‰€æœ‰çš„field/valueï¼Œæ—¶é—´å¤æ‚åº¦O(N) ä¸Šè¿°ä¸‰ä¸ªå‘½ä»¤éƒ½ä¼šå¯¹Hashè¿›è¡Œå®Œæ•´éå†ï¼ŒHashä¸­çš„fieldæ•°é‡ä¸å‘½ä»¤çš„è€—æ—¶çº¿æ€§ç›¸å…³ï¼Œå¯¹äºå°ºå¯¸ä¸å¯é¢„çŸ¥çš„Hashï¼Œåº”ä¸¥æ ¼é¿å…ä½¿ç”¨ä¸Šé¢ä¸‰ä¸ªå‘½ä»¤ï¼Œè€Œæ”¹ä¸ºä½¿ç”¨HSCANå‘½ä»¤è¿›è¡Œæ¸¸æ ‡å¼çš„éå†ï¼› SetRedis Setæ˜¯æ— åºçš„ï¼Œä¸å¯é‡å¤çš„Stringé›†åˆã€‚ ä¸Setç›¸å…³çš„å¸¸ç”¨å‘½ä»¤ï¼š SADDï¼šå‘æŒ‡å®šSetä¸­æ·»åŠ 1ä¸ªæˆ–å¤šä¸ªmemberï¼Œå¦‚æœæŒ‡å®šSetä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªã€‚æ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºæ·»åŠ çš„memberä¸ªæ•° SREMï¼šä»æŒ‡å®šSetä¸­ç§»é™¤1ä¸ªæˆ–å¤šä¸ªmemberï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºç§»é™¤çš„memberä¸ªæ•° SRANDMEMBERï¼šä»æŒ‡å®šSetä¸­éšæœºè¿”å›1ä¸ªæˆ–å¤šä¸ªmemberï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºè¿”å›çš„memberä¸ªæ•° SPOPï¼šä»æŒ‡å®šSetä¸­éšæœºç§»é™¤å¹¶è¿”å›countä¸ªmemberï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºç§»é™¤çš„memberä¸ªæ•° SCARDï¼šè¿”å›æŒ‡å®šSetä¸­çš„memberä¸ªæ•°ï¼Œæ—¶é—´å¤æ‚åº¦O(1) SISMEMBERï¼šåˆ¤æ–­æŒ‡å®šçš„valueæ˜¯å¦å­˜åœ¨äºæŒ‡å®šSetä¸­ï¼Œæ—¶é—´å¤æ‚åº¦O(1) SMOVEï¼šå°†æŒ‡å®šmemberä»ä¸€ä¸ªSetç§»è‡³å¦ä¸€ä¸ªSet æ…ç”¨çš„Setç›¸å…³å‘½ä»¤ï¼š SMEMBERSï¼šè¿”å›æŒ‡å®šHashä¸­æ‰€æœ‰çš„memberï¼Œæ—¶é—´å¤æ‚åº¦O(N) SUNION/SUNIONSTOREï¼šè®¡ç®—å¤šä¸ªSetçš„å¹¶é›†å¹¶è¿”å›/å­˜å‚¨è‡³å¦ä¸€ä¸ªSetä¸­ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºå‚ä¸è®¡ç®—çš„æ‰€æœ‰é›†åˆçš„æ€»memberæ•° SINTER/SINTERSTOREï¼šè®¡ç®—å¤šä¸ªSetçš„äº¤é›†å¹¶è¿”å›/å­˜å‚¨è‡³å¦ä¸€ä¸ªSetä¸­ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºå‚ä¸è®¡ç®—çš„æ‰€æœ‰é›†åˆçš„æ€»memberæ•° SDIFF/SDIFFSTOREï¼šè®¡ç®—1ä¸ªSetä¸1æˆ–å¤šä¸ªSetçš„å·®é›†å¹¶è¿”å›/å­˜å‚¨è‡³å¦ä¸€ä¸ªSetä¸­ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºå‚ä¸è®¡ç®—çš„æ‰€æœ‰é›†åˆçš„æ€»memberæ•° ä¸Šè¿°å‡ ä¸ªå‘½ä»¤æ¶‰åŠçš„è®¡ç®—é‡å¤§ï¼Œåº”è°¨æ…ä½¿ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨å‚ä¸è®¡ç®—çš„Setå°ºå¯¸ä¸å¯çŸ¥çš„æƒ…å†µä¸‹ï¼Œåº”ä¸¥æ ¼é¿å…ä½¿ç”¨ã€‚å¯ä»¥è€ƒè™‘é€šè¿‡SSCANå‘½ä»¤éå†è·å–ç›¸å…³Setçš„å…¨éƒ¨memberï¼Œå¦‚æœéœ€è¦åšå¹¶é›†/äº¤é›†/å·®é›†è®¡ç®—ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œï¼Œæˆ–åœ¨ä¸æœåŠ¡å®æ—¶æŸ¥è¯¢è¯·æ±‚çš„Slaveä¸Šè¿›è¡Œã€‚ Sorted SetRedis Sorted Setæ˜¯æœ‰åºçš„ã€ä¸å¯é‡å¤çš„Stringé›†åˆã€‚Sorted Setä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½éœ€è¦æŒ‡æ´¾ä¸€ä¸ªåˆ†æ•°(score)ï¼ŒSorted Setä¼šæ ¹æ®scoreå¯¹å…ƒç´ è¿›è¡Œå‡åºæ’åºã€‚å¦‚æœå¤šä¸ªmemberæ‹¥æœ‰ç›¸åŒçš„scoreï¼Œåˆ™ä»¥å­—å…¸åºè¿›è¡Œå‡åºæ’åºã€‚ Sorted Setéå¸¸é€‚åˆç”¨äºå®ç°æ’åã€‚ Sorted Setçš„ä¸»è¦å‘½ä»¤ï¼š ZADDï¼šå‘æŒ‡å®šSorted Setä¸­æ·»åŠ 1ä¸ªæˆ–å¤šä¸ªmemberï¼Œæ—¶é—´å¤æ‚åº¦O(Mlog(N))ï¼ŒMä¸ºæ·»åŠ çš„memberæ•°é‡ï¼ŒNä¸ºSorted Setä¸­çš„memberæ•°é‡ ZREMï¼šä»æŒ‡å®šSorted Setä¸­åˆ é™¤1ä¸ªæˆ–å¤šä¸ªmemberï¼Œæ—¶é—´å¤æ‚åº¦O(Mlog(N))ï¼ŒMä¸ºåˆ é™¤çš„memberæ•°é‡ï¼ŒNä¸ºSorted Setä¸­çš„memberæ•°é‡ ZCOUNTï¼šè¿”å›æŒ‡å®šSorted Setä¸­æŒ‡å®šscoreèŒƒå›´å†…çš„memberæ•°é‡ï¼Œæ—¶é—´å¤æ‚åº¦ï¼šO(log(N)) ZCARDï¼šè¿”å›æŒ‡å®šSorted Setä¸­çš„memberæ•°é‡ï¼Œæ—¶é—´å¤æ‚åº¦O(1) ZSCOREï¼šè¿”å›æŒ‡å®šSorted Setä¸­æŒ‡å®šmemberçš„scoreï¼Œæ—¶é—´å¤æ‚åº¦O(1) ZRANK/ZREVRANKï¼šè¿”å›æŒ‡å®šmemberåœ¨Sorted Setä¸­çš„æ’åï¼ŒZRANKè¿”å›æŒ‰å‡åºæ’åºçš„æ’åï¼ŒZREVRANKåˆ™è¿”å›æŒ‰é™åºæ’åºçš„æ’åã€‚æ—¶é—´å¤æ‚åº¦O(log(N)) ZINCRBYï¼šåŒINCRBYï¼Œå¯¹æŒ‡å®šSorted Setä¸­çš„æŒ‡å®šmemberçš„scoreè¿›è¡Œè‡ªå¢ï¼Œæ—¶é—´å¤æ‚åº¦O(log(N)) æ…ç”¨çš„Sorted Setç›¸å…³å‘½ä»¤ï¼š ZRANGE/ZREVRANGEï¼šè¿”å›æŒ‡å®šSorted Setä¸­æŒ‡å®šæ’åèŒƒå›´å†…çš„æ‰€æœ‰memberï¼ŒZRANGEä¸ºæŒ‰scoreå‡åºæ’åºï¼ŒZREVRANGEä¸ºæŒ‰scoreé™åºæ’åºï¼Œæ—¶é—´å¤æ‚åº¦O(log(N)+M)ï¼ŒMä¸ºæœ¬æ¬¡è¿”å›çš„memberæ•° ZRANGEBYSCORE/ZREVRANGEBYSCOREï¼šè¿”å›æŒ‡å®šSorted Setä¸­æŒ‡å®šscoreèŒƒå›´å†…çš„æ‰€æœ‰memberï¼Œè¿”å›ç»“æœä»¥å‡åº/é™åºæ’åºï¼Œminå’Œmaxå¯ä»¥æŒ‡å®šä¸º-infå’Œ+infï¼Œä»£è¡¨è¿”å›æ‰€æœ‰çš„memberã€‚æ—¶é—´å¤æ‚åº¦O(log(N)+M) ZREMRANGEBYRANK/ZREMRANGEBYSCOREï¼šç§»é™¤Sorted Setä¸­æŒ‡å®šæ’åèŒƒå›´/æŒ‡å®šscoreèŒƒå›´å†…çš„æ‰€æœ‰memberã€‚æ—¶é—´å¤æ‚åº¦O(log(N)+M) ä¸Šè¿°å‡ ä¸ªå‘½ä»¤ï¼Œåº”å°½é‡é¿å…ä¼ é€’[0 -1]æˆ–[-inf +inf]è¿™æ ·çš„å‚æ•°ï¼Œæ¥å¯¹Sorted Setåšä¸€æ¬¡æ€§çš„å®Œæ•´éå†ï¼Œç‰¹åˆ«æ˜¯åœ¨Sorted Setçš„å°ºå¯¸ä¸å¯é¢„çŸ¥çš„æƒ…å†µä¸‹ã€‚å¯ä»¥é€šè¿‡ZSCANå‘½ä»¤æ¥è¿›è¡Œæ¸¸æ ‡å¼çš„éå†ï¼Œæˆ–é€šè¿‡LIMITå‚æ•°æ¥é™åˆ¶è¿”å›memberçš„æ•°é‡ï¼ˆé€‚ç”¨äºZRANGEBYSCOREå’ŒZREVRANGEBYSCOREå‘½ä»¤ï¼‰ï¼Œä»¥å®ç°æ¸¸æ ‡å¼çš„éå†ã€‚ Bitmapå’ŒHyperLogLogRedisçš„è¿™ä¸¤ç§æ•°æ®ç»“æ„ç›¸è¾ƒä¹‹å‰çš„å¹¶ä¸å¸¸ç”¨ï¼Œåœ¨æœ¬æ–‡ä¸­åªåšç®€è¦ä»‹ç»ï¼Œå¦‚æƒ³è¦è¯¦ç»†äº†è§£è¿™ä¸¤ç§æ•°æ®ç»“æ„ä¸å…¶ç›¸å…³çš„å‘½ä»¤ï¼› Bitmapåœ¨Redisä¸­ä¸æ˜¯ä¸€ç§å®é™…çš„æ•°æ®ç±»å‹ï¼Œè€Œæ˜¯ä¸€ç§å°†Stringä½œä¸ºBitmapä½¿ç”¨çš„æ–¹æ³•ã€‚å¯ä»¥ç†è§£ä¸ºå°†Stringè½¬æ¢ä¸ºbitæ•°ç»„ã€‚ä½¿ç”¨Bitmapæ¥å­˜å‚¨true/falseç±»å‹çš„ç®€å•æ•°æ®æä¸ºèŠ‚çœç©ºé—´ã€‚ HyperLogLogsæ˜¯ä¸€ç§ä¸»è¦ç”¨äºæ•°é‡ç»Ÿè®¡çš„æ•°æ®ç»“æ„ï¼Œå®ƒå’ŒSetç±»ä¼¼ï¼Œç»´æŠ¤ä¸€ä¸ªä¸å¯é‡å¤çš„Stringé›†åˆï¼Œä½†æ˜¯HyperLogLogså¹¶ä¸ç»´æŠ¤å…·ä½“çš„memberå†…å®¹ï¼Œåªç»´æŠ¤memberçš„ä¸ªæ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒHyperLogLogsåªèƒ½ç”¨äºè®¡ç®—ä¸€ä¸ªé›†åˆä¸­ä¸é‡å¤çš„å…ƒç´ æ•°é‡ï¼Œæ‰€ä»¥å®ƒæ¯”Setè¦èŠ‚çœå¾ˆå¤šå†…å­˜ç©ºé—´ã€‚ å…¶ä»–å¸¸ç”¨å‘½ä»¤ EXISTSï¼šåˆ¤æ–­æŒ‡å®šçš„keyæ˜¯å¦å­˜åœ¨ï¼Œè¿”å›1ä»£è¡¨å­˜åœ¨ï¼Œ0ä»£è¡¨ä¸å­˜åœ¨ï¼Œæ—¶é—´å¤æ‚åº¦O(1) DELï¼šåˆ é™¤æŒ‡å®šçš„keyåŠå…¶å¯¹åº”çš„valueï¼Œæ—¶é—´å¤æ‚åº¦O(N)ï¼ŒNä¸ºåˆ é™¤çš„keyæ•°é‡ EXPIRE/PEXPIREï¼šä¸ºä¸€ä¸ªkeyè®¾ç½®æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’æˆ–æ¯«ç§’ï¼Œæ—¶é—´å¤æ‚åº¦O(1) TTL/PTTLï¼šè¿”å›ä¸€ä¸ªkeyå‰©ä½™çš„æœ‰æ•ˆæ—¶é—´ï¼Œå•ä½ä¸ºç§’æˆ–æ¯«ç§’ï¼Œæ—¶é—´å¤æ‚åº¦O(1) RENAME/RENAMENXï¼šå°†keyé‡å‘½åä¸ºnewkeyã€‚ä½¿ç”¨RENAMEæ—¶ï¼Œå¦‚æœnewkeyå·²ç»å­˜åœ¨ï¼Œå…¶å€¼ä¼šè¢«è¦†ç›–ï¼›ä½¿ç”¨RENAMENXæ—¶ï¼Œå¦‚æœnewkeyå·²ç»å­˜åœ¨ï¼Œåˆ™ä¸ä¼šè¿›è¡Œä»»ä½•æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦O(1) TYPEï¼šè¿”å›æŒ‡å®škeyçš„ç±»å‹ï¼Œstring, list, set, zset, hashã€‚æ—¶é—´å¤æ‚åº¦O(1) CONFIG GETï¼šè·å¾—RedisæŸé…ç½®é¡¹çš„å½“å‰å€¼ï¼Œå¯ä»¥ä½¿ç”¨*é€šé…ç¬¦ï¼Œæ—¶é—´å¤æ‚åº¦O(1) CONFIG SETï¼šä¸ºRedisæŸä¸ªé…ç½®é¡¹è®¾ç½®æ–°å€¼ï¼Œæ—¶é—´å¤æ‚åº¦O(1) CONFIG REWRITEï¼šè®©Redisé‡æ–°åŠ è½½redis.confä¸­çš„é…ç½® æ•°æ®æŒä¹…åŒ–Redisæä¾›äº†å°†æ•°æ®å®šæœŸè‡ªåŠ¨æŒä¹…åŒ–è‡³ç¡¬ç›˜çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬RDBå’ŒAOFä¸¤ç§æ–¹æ¡ˆï¼Œä¸¤ç§æ–¹æ¡ˆåˆ†åˆ«æœ‰å…¶é•¿å¤„å’ŒçŸ­æ¿ï¼Œå¯ä»¥é…åˆèµ·æ¥åŒæ—¶è¿è¡Œï¼Œç¡®ä¿æ•°æ®çš„ç¨³å®šæ€§ã€‚ å¿…é¡»ä½¿ç”¨æ•°æ®æŒä¹…åŒ–å—ï¼ŸRedisçš„æ•°æ®æŒä¹…åŒ–æœºåˆ¶æ˜¯å¯ä»¥å…³é—­çš„ã€‚å¦‚æœä½ åªæŠŠRedisä½œä¸ºç¼“å­˜æœåŠ¡ä½¿ç”¨ï¼ŒRedisä¸­å­˜å‚¨çš„æ‰€æœ‰æ•°æ®éƒ½ä¸æ˜¯è¯¥æ•°æ®çš„ä¸»ä½“è€Œä»…ä»…æ˜¯åŒæ­¥è¿‡æ¥çš„å¤‡ä»½ï¼Œé‚£ä¹ˆå¯ä»¥å…³é—­Redisçš„æ•°æ®æŒä¹…åŒ–æœºåˆ¶ã€‚ä½†é€šå¸¸æ¥è¯´ï¼Œä»ç„¶å»ºè®®è‡³å°‘å¼€å¯RDBæ–¹å¼çš„æ•°æ®æŒä¹…åŒ–ï¼Œå› ä¸ºï¼š RDBæ–¹å¼çš„æŒä¹…åŒ–å‡ ä¹ä¸æŸè€—Redisæœ¬èº«çš„æ€§èƒ½ï¼Œåœ¨è¿›è¡ŒRDBæŒä¹…åŒ–æ—¶ï¼ŒRedisä¸»è¿›ç¨‹å”¯ä¸€éœ€è¦åšçš„äº‹æƒ…å°±æ˜¯forkå‡ºä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ‰€æœ‰æŒä¹…åŒ–å·¥ä½œéƒ½ç”±å­è¿›ç¨‹å®Œæˆ Redisæ— è®ºå› ä¸ºä»€ä¹ˆåŸå› crashæ‰ä¹‹åï¼Œé‡å¯æ—¶èƒ½å¤Ÿè‡ªåŠ¨æ¢å¤åˆ°ä¸Šä¸€æ¬¡RDBå¿«ç…§ä¸­è®°å½•çš„æ•°æ®ã€‚è¿™çœå»äº†æ‰‹å·¥ä»å…¶ä»–æ•°æ®æºï¼ˆå¦‚DBï¼‰åŒæ­¥æ•°æ®çš„è¿‡ç¨‹ï¼Œè€Œä¸”è¦æ¯”å…¶ä»–ä»»ä½•çš„æ•°æ®æ¢å¤æ–¹å¼éƒ½è¦å¿« ç°åœ¨ç¡¬ç›˜é‚£ä¹ˆå¤§ï¼ŒçœŸçš„ä¸ç¼ºé‚£ä¸€ç‚¹åœ°æ–¹ RDBé‡‡ç”¨RDBæŒä¹…æ–¹å¼ï¼ŒRedisä¼šå®šæœŸä¿å­˜æ•°æ®å¿«ç…§è‡³ä¸€ä¸ªrbdæ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½rdbæ–‡ä»¶ï¼Œæ¢å¤ä¹‹å‰ä¿å­˜çš„æ•°æ®ã€‚å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®Redisè¿›è¡Œå¿«ç…§ä¿å­˜çš„æ—¶æœºï¼š 1save [secends] [changes] æ„ä¸ºåœ¨[seconds]ç§’å†…å¦‚æœå‘ç”Ÿäº†[changes]æ¬¡æ•°æ®ä¿®æ”¹ï¼Œåˆ™è¿›è¡Œä¸€æ¬¡RDBå¿«ç…§ä¿å­˜ï¼Œä¾‹å¦‚ï¼š 1save 60 100 ä¼šè®©Redisæ¯60ç§’æ£€æŸ¥ä¸€æ¬¡æ•°æ®å˜æ›´æƒ…å†µï¼Œå¦‚æœå‘ç”Ÿäº†100æ¬¡æˆ–ä»¥ä¸Šçš„æ•°æ®å˜æ›´ï¼Œåˆ™è¿›è¡ŒRDBå¿«ç…§ä¿å­˜ã€‚å¯ä»¥é…ç½®å¤šæ¡saveæŒ‡ä»¤ï¼Œè®©Redisæ‰§è¡Œå¤šçº§çš„å¿«ç…§ä¿å­˜ç­–ç•¥ã€‚Redisé»˜è®¤å¼€å¯RDBå¿«ç…§ï¼Œé»˜è®¤çš„RDBç­–ç•¥å¦‚ä¸‹ï¼š 123save 900 1save 300 10save 60 10000 ä¹Ÿå¯ä»¥é€šè¿‡BGSAVEå‘½ä»¤æ‰‹å·¥è§¦å‘RDBå¿«ç…§ä¿å­˜ã€‚ RDBçš„ä¼˜ç‚¹ï¼š å¯¹æ€§èƒ½å½±å“æœ€å°ã€‚å¦‚å‰æ–‡æ‰€è¿°ï¼ŒRedisåœ¨ä¿å­˜RDBå¿«ç…§æ—¶ä¼šforkå‡ºå­è¿›ç¨‹è¿›è¡Œï¼Œå‡ ä¹ä¸å½±å“Rediså¤„ç†å®¢æˆ·ç«¯è¯·æ±‚çš„æ•ˆç‡ã€‚ æ¯æ¬¡å¿«ç…§ä¼šç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®å¿«ç…§æ–‡ä»¶ï¼Œæ‰€ä»¥å¯ä»¥è¾…ä»¥å…¶ä»–æ‰‹æ®µä¿å­˜å¤šä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§ï¼ˆä¾‹å¦‚æŠŠæ¯å¤©0ç‚¹çš„å¿«ç…§å¤‡ä»½è‡³å…¶ä»–å­˜å‚¨åª’ä»‹ä¸­ï¼‰ï¼Œä½œä¸ºéå¸¸å¯é çš„ç¾éš¾æ¢å¤æ‰‹æ®µã€‚ ä½¿ç”¨RDBæ–‡ä»¶è¿›è¡Œæ•°æ®æ¢å¤æ¯”ä½¿ç”¨AOFè¦å¿«å¾ˆå¤šã€‚ RDBçš„ç¼ºç‚¹ï¼š å¿«ç…§æ˜¯å®šæœŸç”Ÿæˆçš„ï¼Œæ‰€ä»¥åœ¨Redis crashæ—¶æˆ–å¤šæˆ–å°‘ä¼šä¸¢å¤±ä¸€éƒ¨åˆ†æ•°æ®ã€‚ å¦‚æœæ•°æ®é›†éå¸¸å¤§ä¸”CPUä¸å¤Ÿå¼ºï¼ˆæ¯”å¦‚å•æ ¸CPUï¼‰ï¼ŒRedisåœ¨forkå­è¿›ç¨‹æ—¶å¯èƒ½ä¼šæ¶ˆè€—ç›¸å¯¹è¾ƒé•¿çš„æ—¶é—´ï¼ˆé•¿è‡³1ç§’ï¼‰ï¼Œå½±å“è¿™æœŸé—´çš„å®¢æˆ·ç«¯è¯·æ±‚ã€‚ AOFé‡‡ç”¨AOFæŒä¹…æ–¹å¼æ—¶ï¼ŒRedisä¼šæŠŠæ¯ä¸€ä¸ªå†™è¯·æ±‚éƒ½è®°å½•åœ¨ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶é‡Œã€‚åœ¨Redisé‡å¯æ—¶ï¼Œä¼šæŠŠAOFæ–‡ä»¶ä¸­è®°å½•çš„æ‰€æœ‰å†™æ“ä½œé¡ºåºæ‰§è¡Œä¸€éï¼Œç¡®ä¿æ•°æ®æ¢å¤åˆ°æœ€æ–°ã€‚ AOFé»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¦‚è¦å¼€å¯ï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š 1appendonly yes AOFæä¾›äº†ä¸‰ç§fsyncé…ç½®ï¼Œalways/everysec/noï¼Œé€šè¿‡é…ç½®é¡¹[appendfsync]æŒ‡å®šï¼š appendfsync noï¼šä¸è¿›è¡Œfsyncï¼Œå°†flushæ–‡ä»¶çš„æ—¶æœºäº¤ç»™OSå†³å®šï¼Œé€Ÿåº¦æœ€å¿« appendfsync alwaysï¼šæ¯å†™å…¥ä¸€æ¡æ—¥å¿—å°±è¿›è¡Œä¸€æ¬¡fsyncæ“ä½œï¼Œæ•°æ®å®‰å…¨æ€§æœ€é«˜ï¼Œä½†é€Ÿåº¦æœ€æ…¢ appendfsync everysecï¼šæŠ˜ä¸­çš„åšæ³•ï¼Œäº¤ç”±åå°çº¿ç¨‹æ¯ç§’fsyncä¸€æ¬¡ éšç€AOFä¸æ–­åœ°è®°å½•å†™æ“ä½œæ—¥å¿—ï¼Œå¿…å®šä¼šå‡ºç°ä¸€äº›æ— ç”¨çš„æ—¥å¿—ï¼Œä¾‹å¦‚æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œäº†å‘½ä»¤SET key1 â€œabcâ€ï¼Œåœ¨ä¹‹åæŸä¸ªæ—¶é—´ç‚¹åˆæ‰§è¡Œäº†SET key1 â€œbcdâ€ï¼Œé‚£ä¹ˆç¬¬ä¸€æ¡å‘½ä»¤å¾ˆæ˜¾ç„¶æ˜¯æ²¡æœ‰ç”¨çš„ã€‚å¤§é‡çš„æ— ç”¨æ—¥å¿—ä¼šè®©AOFæ–‡ä»¶è¿‡å¤§ï¼Œä¹Ÿä¼šè®©æ•°æ®æ¢å¤çš„æ—¶é—´è¿‡é•¿ã€‚æ‰€ä»¥Redisæä¾›äº†AOF rewriteåŠŸèƒ½ï¼Œå¯ä»¥é‡å†™AOFæ–‡ä»¶ï¼Œåªä¿ç•™èƒ½å¤ŸæŠŠæ•°æ®æ¢å¤åˆ°æœ€æ–°çŠ¶æ€çš„æœ€å°å†™æ“ä½œé›†ã€‚AOF rewriteå¯ä»¥é€šè¿‡BGREWRITEAOFå‘½ä»¤è§¦å‘ï¼Œä¹Ÿå¯ä»¥é…ç½®Rediså®šæœŸè‡ªåŠ¨è¿›è¡Œï¼š 12auto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb ä¸Šé¢ä¸¤è¡Œé…ç½®çš„å«ä¹‰æ˜¯ï¼ŒRedisåœ¨æ¯æ¬¡AOF rewriteæ—¶ï¼Œä¼šè®°å½•å®Œæˆrewriteåçš„AOFæ—¥å¿—å¤§å°ï¼Œå½“AOFæ—¥å¿—å¤§å°åœ¨è¯¥åŸºç¡€ä¸Šå¢é•¿äº†100%åï¼Œè‡ªåŠ¨è¿›è¡ŒAOF rewriteã€‚åŒæ—¶å¦‚æœå¢é•¿çš„å¤§å°æ²¡æœ‰è¾¾åˆ°64mbï¼Œåˆ™ä¸ä¼šè¿›è¡Œrewriteã€‚ AOFçš„ä¼˜ç‚¹ï¼š æœ€å®‰å…¨ï¼Œåœ¨å¯ç”¨appendfsync alwaysæ—¶ï¼Œä»»ä½•å·²å†™å…¥çš„æ•°æ®éƒ½ä¸ä¼šä¸¢å¤±ï¼Œä½¿ç”¨åœ¨å¯ç”¨appendfsync everysecä¹Ÿè‡³å¤šåªä¼šä¸¢å¤±1ç§’çš„æ•°æ®ã€‚ AOFæ–‡ä»¶åœ¨å‘ç”Ÿæ–­ç”µç­‰é—®é¢˜æ—¶ä¹Ÿä¸ä¼šæŸåï¼Œå³ä½¿å‡ºç°äº†æŸæ¡æ—¥å¿—åªå†™å…¥äº†ä¸€åŠçš„æƒ…å†µï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨redis-check-aofå·¥å…·è½»æ¾ä¿®å¤ã€‚ AOFæ–‡ä»¶æ˜“è¯»ï¼Œå¯ä¿®æ”¹ï¼Œåœ¨è¿›è¡Œäº†æŸäº›é”™è¯¯çš„æ•°æ®æ¸…é™¤æ“ä½œåï¼Œåªè¦AOFæ–‡ä»¶æ²¡æœ‰rewriteï¼Œå°±å¯ä»¥æŠŠAOFæ–‡ä»¶å¤‡ä»½å‡ºæ¥ï¼ŒæŠŠé”™è¯¯çš„å‘½ä»¤åˆ é™¤ï¼Œç„¶åæ¢å¤æ•°æ®ã€‚ AOFçš„ç¼ºç‚¹ï¼š AOFæ–‡ä»¶é€šå¸¸æ¯”RDBæ–‡ä»¶æ›´å¤§ æ€§èƒ½æ¶ˆè€—æ¯”RDBé«˜ æ•°æ®æ¢å¤é€Ÿåº¦æ¯”RDBæ…¢ å†…å­˜ç®¡ç†ä¸æ•°æ®æ·˜æ±°æœºåˆ¶æœ€å¤§å†…å­˜è®¾ç½®é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨32ä½OSä¸­ï¼ŒRedisæœ€å¤§ä½¿ç”¨3GBçš„å†…å­˜ï¼Œåœ¨64ä½OSä¸­åˆ™æ²¡æœ‰é™åˆ¶ã€‚ åœ¨ä½¿ç”¨Redisæ—¶ï¼Œåº”è¯¥å¯¹æ•°æ®å ç”¨çš„æœ€å¤§ç©ºé—´æœ‰ä¸€ä¸ªåŸºæœ¬å‡†ç¡®çš„é¢„ä¼°ï¼Œå¹¶ä¸ºRedisè®¾å®šæœ€å¤§ä½¿ç”¨çš„å†…å­˜ã€‚å¦åˆ™åœ¨64ä½OSä¸­Redisä¼šæ— é™åˆ¶åœ°å ç”¨å†…å­˜ï¼ˆå½“ç‰©ç†å†…å­˜è¢«å æ»¡åä¼šä½¿ç”¨swapç©ºé—´ï¼‰ï¼Œå®¹æ˜“å¼•å‘å„ç§å„æ ·çš„é—®é¢˜ã€‚ é€šè¿‡å¦‚ä¸‹é…ç½®æ§åˆ¶Redisä½¿ç”¨çš„æœ€å¤§å†…å­˜ï¼š 1maxmemory 100mb åœ¨å†…å­˜å ç”¨è¾¾åˆ°maxmemoryåï¼Œå†å‘Rediså†™å…¥æ•°æ®æ—¶ï¼ŒRedisä¼šï¼š æ ¹æ®é…ç½®çš„æ•°æ®æ·˜æ±°ç­–ç•¥å°è¯•æ·˜æ±°æ•°æ®ï¼Œé‡Šæ”¾ç©ºé—´ å¦‚æœæ²¡æœ‰æ•°æ®å¯ä»¥æ·˜æ±°ï¼Œæˆ–è€…æ²¡æœ‰é…ç½®æ•°æ®æ·˜æ±°ç­–ç•¥ï¼Œé‚£ä¹ˆRedisä¼šå¯¹æ‰€æœ‰å†™è¯·æ±‚è¿”å›é”™è¯¯ï¼Œä½†è¯»è¯·æ±‚ä»ç„¶å¯ä»¥æ­£å¸¸æ‰§è¡Œ åœ¨ä¸ºRedisè®¾ç½®maxmemoryæ—¶ï¼Œéœ€è¦æ³¨æ„ï¼š å¦‚æœé‡‡ç”¨äº†Redisçš„ä¸»ä»åŒæ­¥ï¼Œä¸»èŠ‚ç‚¹å‘ä»èŠ‚ç‚¹åŒæ­¥æ•°æ®æ—¶ï¼Œä¼šå ç”¨æ‰ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´ï¼Œå¦‚æœmaxmemoryè¿‡äºæ¥è¿‘ä¸»æœºçš„å¯ç”¨å†…å­˜ï¼Œå¯¼è‡´æ•°æ®åŒæ­¥æ—¶å†…å­˜ä¸è¶³ã€‚æ‰€ä»¥è®¾ç½®çš„maxmemoryä¸è¦è¿‡äºæ¥è¿‘ä¸»æœºå¯ç”¨çš„å†…å­˜ï¼Œç•™å‡ºä¸€éƒ¨åˆ†é¢„ç•™ç”¨ä½œä¸»ä»åŒæ­¥ã€‚ æ•°æ®æ·˜æ±°æœºåˆ¶Redisæä¾›äº†5ç§æ•°æ®æ·˜æ±°ç­–ç•¥ï¼š volatile-lruï¼šä½¿ç”¨LRUç®—æ³•è¿›è¡Œæ•°æ®æ·˜æ±°ï¼ˆæ·˜æ±°ä¸Šæ¬¡ä½¿ç”¨æ—¶é—´æœ€æ—©çš„ï¼Œä¸”ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„keyï¼‰ï¼Œåªæ·˜æ±°è®¾å®šäº†æœ‰æ•ˆæœŸçš„key allkeys-lruï¼šä½¿ç”¨LRUç®—æ³•è¿›è¡Œæ•°æ®æ·˜æ±°ï¼Œæ‰€æœ‰çš„keyéƒ½å¯ä»¥è¢«æ·˜æ±° volatile-randomï¼šéšæœºæ·˜æ±°æ•°æ®ï¼Œåªæ·˜æ±°è®¾å®šäº†æœ‰æ•ˆæœŸçš„key allkeys-randomï¼šéšæœºæ·˜æ±°æ•°æ®ï¼Œæ‰€æœ‰çš„keyéƒ½å¯ä»¥è¢«æ·˜æ±° volatile-ttlï¼šæ·˜æ±°å‰©ä½™æœ‰æ•ˆæœŸæœ€çŸ­çš„key æœ€å¥½ä¸ºRedisæŒ‡å®šä¸€ç§æœ‰æ•ˆçš„æ•°æ®æ·˜æ±°ç­–ç•¥ä»¥é…åˆmaxmemoryè®¾ç½®ï¼Œé¿å…åœ¨å†…å­˜ä½¿ç”¨æ»¡åå‘ç”Ÿå†™å…¥å¤±è´¥çš„æƒ…å†µã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ¨èä½¿ç”¨çš„ç­–ç•¥æ˜¯volatile-lruï¼Œå¹¶è¾¨è¯†Redisä¸­ä¿å­˜çš„æ•°æ®çš„é‡è¦æ€§ã€‚å¯¹äºé‚£äº›é‡è¦çš„ï¼Œç»å¯¹ä¸èƒ½ä¸¢å¼ƒçš„æ•°æ®ï¼ˆå¦‚é…ç½®ç±»æ•°æ®ç­‰ï¼‰ï¼Œåº”ä¸è®¾ç½®æœ‰æ•ˆæœŸï¼Œè¿™æ ·Rediså°±æ°¸è¿œä¸ä¼šæ·˜æ±°è¿™äº›æ•°æ®ã€‚å¯¹äºé‚£äº›ç›¸å¯¹ä¸æ˜¯é‚£ä¹ˆé‡è¦çš„ï¼Œå¹¶ä¸”èƒ½å¤Ÿçƒ­åŠ è½½çš„æ•°æ®ï¼ˆæ¯”å¦‚ç¼“å­˜æœ€è¿‘ç™»å½•çš„ç”¨æˆ·ä¿¡æ¯ï¼Œå½“åœ¨Redisä¸­æ‰¾ä¸åˆ°æ—¶ï¼Œç¨‹åºä¼šå»DBä¸­è¯»å–ï¼‰ï¼Œå¯ä»¥è®¾ç½®ä¸Šæœ‰æ•ˆæœŸï¼Œè¿™æ ·åœ¨å†…å­˜ä¸å¤Ÿæ—¶Rediså°±ä¼šæ·˜æ±°è¿™éƒ¨åˆ†æ•°æ®ã€‚ é…ç½®æ–¹æ³•ï¼š 1maxmemory-policy volatile-lru #é»˜è®¤æ˜¯noevictionï¼Œå³ä¸è¿›è¡Œæ•°æ®æ·˜æ±° PipelinlingPipelinlingRedisæä¾›è®¸å¤šæ‰¹é‡æ“ä½œçš„å‘½ä»¤ï¼Œå¦‚MSET/MGET/HMSET/HMGETç­‰ç­‰ï¼Œè¿™äº›å‘½ä»¤å­˜åœ¨çš„æ„ä¹‰æ˜¯å‡å°‘ç»´æŠ¤ç½‘ç»œè¿æ¥å’Œä¼ è¾“æ•°æ®æ‰€æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´ã€‚ä¾‹å¦‚è¿ç»­ä½¿ç”¨5æ¬¡SETå‘½ä»¤è®¾ç½®5ä¸ªä¸åŒçš„keyï¼Œæ¯”èµ·ä½¿ç”¨ä¸€æ¬¡MSETå‘½ä»¤è®¾ç½®5ä¸ªä¸åŒçš„keyï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œä½†å‰è€…ä¼šæ¶ˆè€—æ›´å¤šçš„RTT(Round Trip Time)æ—¶é•¿ï¼Œæ°¸è¿œåº”ä¼˜å…ˆä½¿ç”¨åè€…ã€‚ ç„¶è€Œï¼Œå¦‚æœå®¢æˆ·ç«¯è¦è¿ç»­æ‰§è¡Œçš„å¤šæ¬¡æ“ä½œæ— æ³•é€šè¿‡Rediså‘½ä»¤ç»„åˆåœ¨ä¸€èµ·ï¼Œä¾‹å¦‚ï¼š 123SET a &quot;abc&quot;INCR bHSET c name &quot;hi&quot; æ­¤æ—¶ä¾¿å¯ä»¥ä½¿ç”¨Redisæä¾›çš„pipeliningåŠŸèƒ½æ¥å®ç°åœ¨ä¸€æ¬¡äº¤äº’ä¸­æ‰§è¡Œå¤šæ¡å‘½ä»¤ã€‚ä½¿ç”¨pipeliningæ—¶ï¼Œåªéœ€è¦ä»å®¢æˆ·ç«¯ä¸€æ¬¡å‘Rediså‘é€å¤šæ¡å‘½ä»¤ï¼ˆä»¥\\r\\nï¼‰åˆ†éš”ï¼ŒRediså°±ä¼šä¾æ¬¡æ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œå¹¶ä¸”æŠŠæ¯ä¸ªå‘½ä»¤çš„è¿”å›æŒ‰é¡ºåºç»„è£…åœ¨ä¸€èµ·ä¸€æ¬¡è¿”å›ï¼Œæ¯”å¦‚ï¼š 1234$ (printf &quot;PING\\r\\nPING\\r\\nPING\\r\\n&quot;; sleep 1) | nc localhost 6379+PONG+PONG+PONG å¤§éƒ¨åˆ†çš„Rediså®¢æˆ·ç«¯éƒ½å¯¹Pipeliningæä¾›æ”¯æŒï¼Œæ‰€ä»¥å¼€å‘è€…é€šå¸¸å¹¶ä¸éœ€è¦è‡ªå·±æ‰‹å·¥æ‹¼è£…å‘½ä»¤åˆ—è¡¨ã€‚ Pipeliningçš„å±€é™æ€§Pipeliningåªèƒ½ç”¨äºæ‰§è¡Œè¿ç»­ä¸”æ— ç›¸å…³æ€§çš„å‘½ä»¤ï¼Œå½“æŸä¸ªå‘½ä»¤çš„ç”Ÿæˆéœ€è¦ä¾èµ–äºå‰ä¸€ä¸ªå‘½ä»¤çš„è¿”å›æ—¶ï¼Œå°±æ— æ³•ä½¿ç”¨Pipeliningäº†ã€‚ é€šè¿‡ScriptingåŠŸèƒ½ï¼Œå¯ä»¥è§„é¿è¿™ä¸€å±€é™æ€§ äº‹åŠ¡ä¸ScriptingPipeliningèƒ½å¤Ÿè®©Redisåœ¨ä¸€æ¬¡äº¤äº’ä¸­å¤„ç†å¤šæ¡å‘½ä»¤ï¼Œç„¶è€Œåœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨æ­¤åŸºç¡€ä¸Šç¡®ä¿è¿™ä¸€ç»„å‘½ä»¤æ˜¯è¿ç»­æ‰§è¡Œçš„ã€‚ æ¯”å¦‚è·å–å½“å‰ç´¯è®¡çš„PVæ•°å¹¶å°†å…¶æ¸…0 1234&gt; GET vCount12384&gt; SET vCount 0OK å¦‚æœåœ¨GETå’ŒSETå‘½ä»¤ä¹‹é—´æ’è¿›æ¥ä¸€ä¸ªINCR vCountï¼Œå°±ä¼šä½¿å®¢æˆ·ç«¯æ‹¿åˆ°çš„vCountä¸å‡†ç¡®ã€‚ Redisçš„äº‹åŠ¡å¯ä»¥ç¡®ä¿å¤æ•°å‘½ä»¤æ‰§è¡Œæ—¶çš„åŸå­æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´Redisèƒ½å¤Ÿä¿è¯ï¼šä¸€ä¸ªäº‹åŠ¡ä¸­çš„ä¸€ç»„å‘½ä»¤æ˜¯ç»å¯¹è¿ç»­æ‰§è¡Œçš„ï¼Œåœ¨è¿™äº›å‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹å‰ï¼Œç»å¯¹ä¸ä¼šæœ‰æ¥è‡ªäºå…¶ä»–è¿æ¥çš„å…¶ä»–å‘½ä»¤æ’è¿›å»æ‰§è¡Œã€‚ é€šè¿‡MULTIå’ŒEXECå‘½ä»¤æ¥æŠŠè¿™ä¸¤ä¸ªå‘½ä»¤åŠ å…¥ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼š 123456789&gt; MULTIOK&gt; GET vCountQUEUED&gt; SET vCount 0QUEUED&gt; EXEC1) 123842) OK Redisåœ¨æ¥æ”¶åˆ°MULTIå‘½ä»¤åä¾¿ä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œè¿™ä¹‹åçš„æ‰€æœ‰è¯»å†™å‘½ä»¤éƒ½ä¼šä¿å­˜åœ¨é˜Ÿåˆ—ä¸­ä½†å¹¶ä¸æ‰§è¡Œï¼Œç›´åˆ°æ¥æ”¶åˆ°EXECå‘½ä»¤åï¼ŒRedisä¼šæŠŠé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å‘½ä»¤è¿ç»­é¡ºåºæ‰§è¡Œï¼Œå¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›æ¯ä¸ªå‘½ä»¤çš„è¿”å›ç»“æœã€‚ å¯ä»¥ä½¿ç”¨DISCARDå‘½ä»¤æ”¾å¼ƒå½“å‰çš„äº‹åŠ¡ï¼Œå°†ä¿å­˜çš„å‘½ä»¤é˜Ÿåˆ—æ¸…ç©ºã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRedisäº‹åŠ¡ä¸æ”¯æŒå›æ»šï¼šå¦‚æœä¸€ä¸ªäº‹åŠ¡ä¸­çš„å‘½ä»¤å‡ºç°äº†è¯­æ³•é”™è¯¯ï¼Œå¤§éƒ¨åˆ†å®¢æˆ·ç«¯é©±åŠ¨ä¼šè¿”å›é”™è¯¯ï¼Œ2.6.5ç‰ˆæœ¬ä»¥ä¸Šçš„Redisä¹Ÿä¼šåœ¨æ‰§è¡ŒEXECæ—¶æ£€æŸ¥é˜Ÿåˆ—ä¸­çš„å‘½ä»¤æ˜¯å¦å­˜åœ¨è¯­æ³•é”™è¯¯ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™ä¼šè‡ªåŠ¨æ”¾å¼ƒäº‹åŠ¡å¹¶è¿”å›é”™è¯¯ã€‚ä½†å¦‚æœä¸€ä¸ªäº‹åŠ¡ä¸­çš„å‘½ä»¤æœ‰éè¯­æ³•ç±»çš„é”™è¯¯ï¼ˆæ¯”å¦‚å¯¹Stringæ‰§è¡ŒHSETæ“ä½œï¼‰ï¼Œæ— è®ºå®¢æˆ·ç«¯é©±åŠ¨è¿˜æ˜¯Rediséƒ½æ— æ³•åœ¨çœŸæ­£æ‰§è¡Œè¿™æ¡å‘½ä»¤ä¹‹å‰å‘ç°ï¼Œæ‰€ä»¥äº‹åŠ¡ä¸­çš„æ‰€æœ‰å‘½ä»¤ä»ç„¶ä¼šè¢«ä¾æ¬¡æ‰§è¡Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°ä¸€ä¸ªäº‹åŠ¡ä¸­éƒ¨åˆ†å‘½ä»¤æˆåŠŸéƒ¨åˆ†å‘½ä»¤å¤±è´¥çš„æƒ…å†µï¼Œç„¶è€Œä¸RDBMSä¸åŒï¼ŒRedisä¸æä¾›äº‹åŠ¡å›æ»šçš„åŠŸèƒ½ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡å…¶ä»–æ–¹æ³•è¿›è¡Œæ•°æ®çš„å›æ»šã€‚ é€šè¿‡äº‹åŠ¡å®ç°CASRedisæä¾›äº†WATCHå‘½ä»¤ä¸äº‹åŠ¡æ­é…ä½¿ç”¨ï¼Œå®ç°CASä¹è§‚é”çš„æœºåˆ¶ã€‚ å‡è®¾è¦å®ç°å°†æŸä¸ªå•†å“çš„çŠ¶æ€æ”¹ä¸ºå·²å”®ï¼š 12if(exec(HGET stock:1001 state) == &quot;in stock&quot;) exec(HSET stock:1001 state &quot;sold&quot;); è¿™ä¸€ä¼ªä»£ç æ‰§è¡Œæ—¶ï¼Œæ— æ³•ç¡®ä¿å¹¶å‘å®‰å…¨æ€§ï¼Œæœ‰å¯èƒ½å¤šä¸ªå®¢æˆ·ç«¯éƒ½è·å–åˆ°äº†â€in stockâ€çš„çŠ¶æ€ï¼Œå¯¼è‡´ä¸€ä¸ªåº“å­˜è¢«å”®å–å¤šæ¬¡ã€‚ ä½¿ç”¨WATCHå‘½ä»¤å’Œäº‹åŠ¡å¯ä»¥è§£å†³è¿™ä¸€é—®é¢˜ï¼š 123456exec(WATCH stock:1001);if(exec(HGET stock:1001 state) == &quot;in stock&quot;) &#123; exec(MULTI); exec(HSET stock:1001 state &quot;sold&quot;); exec(EXEC);&#125; WATCHçš„æœºåˆ¶æ˜¯ï¼šåœ¨äº‹åŠ¡EXECå‘½ä»¤æ‰§è¡Œæ—¶ï¼ŒRedisä¼šæ£€æŸ¥è¢«WATCHçš„keyï¼Œåªæœ‰è¢«WATCHçš„keyä»WATCHèµ·å§‹æ—¶è‡³ä»Šæ²¡æœ‰å‘ç”Ÿè¿‡å˜æ›´ï¼ŒEXECæ‰ä¼šè¢«æ‰§è¡Œã€‚å¦‚æœWATCHçš„keyåœ¨WATCHå‘½ä»¤åˆ°EXECå‘½ä»¤ä¹‹é—´å‘ç”Ÿè¿‡å˜åŒ–ï¼Œåˆ™EXECå‘½ä»¤ä¼šè¿”å›å¤±è´¥ã€‚ Scriptingé€šè¿‡EVALä¸EVALSHAå‘½ä»¤ï¼Œå¯ä»¥è®©Redisæ‰§è¡ŒLUAè„šæœ¬ã€‚è¿™å°±ç±»ä¼¼äºRDBMSçš„å­˜å‚¨è¿‡ç¨‹ä¸€æ ·ï¼Œå¯ä»¥æŠŠå®¢æˆ·ç«¯ä¸Redisä¹‹é—´å¯†é›†çš„è¯»/å†™äº¤äº’æ”¾åœ¨æœåŠ¡ç«¯è¿›è¡Œï¼Œé¿å…è¿‡å¤šçš„æ•°æ®äº¤äº’ï¼Œæå‡æ€§èƒ½ã€‚ ScriptingåŠŸèƒ½æ˜¯ä½œä¸ºäº‹åŠ¡åŠŸèƒ½çš„æ›¿ä»£è€…è¯ç”Ÿçš„ï¼Œäº‹åŠ¡æä¾›çš„æ‰€æœ‰èƒ½åŠ›Scriptingéƒ½å¯ä»¥åšåˆ°ã€‚Rediså®˜æ–¹æ¨èä½¿ç”¨LUA Scriptæ¥ä»£æ›¿äº‹åŠ¡ï¼Œå‰è€…çš„æ•ˆç‡å’Œä¾¿åˆ©æ€§éƒ½è¶…è¿‡äº†äº‹åŠ¡ã€‚ Redisæ€§èƒ½è°ƒä¼˜å°½ç®¡Redisæ˜¯ä¸€ä¸ªéå¸¸å¿«é€Ÿçš„å†…å­˜æ•°æ®å­˜å‚¨åª’ä»‹ï¼Œä¹Ÿå¹¶ä¸ä»£è¡¨Redisä¸ä¼šäº§ç”Ÿæ€§èƒ½é—®é¢˜ã€‚å‰æ–‡ä¸­æåˆ°è¿‡ï¼ŒRedisé‡‡ç”¨å•çº¿ç¨‹æ¨¡å‹ï¼Œæ‰€æœ‰çš„å‘½ä»¤éƒ½æ˜¯ç”±ä¸€ä¸ªçº¿ç¨‹ä¸²è¡Œæ‰§è¡Œçš„ï¼Œæ‰€ä»¥å½“æŸä¸ªå‘½ä»¤æ‰§è¡Œè€—æ—¶è¾ƒé•¿æ—¶ï¼Œä¼šæ‹–æ…¢å…¶åçš„æ‰€æœ‰å‘½ä»¤ï¼Œè¿™ä½¿å¾—Rediså¯¹æ¯ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡æ›´åŠ æ•æ„Ÿã€‚ é’ˆå¯¹Redisçš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸»è¦ä»ä¸‹é¢å‡ ä¸ªå±‚é¢å…¥æ‰‹ï¼š æœ€åˆçš„ä¹Ÿæ˜¯æœ€é‡è¦çš„ï¼Œç¡®ä¿æ²¡æœ‰è®©Redisæ‰§è¡Œè€—æ—¶é•¿çš„å‘½ä»¤ ä½¿ç”¨pipeliningå°†è¿ç»­æ‰§è¡Œçš„å‘½ä»¤ç»„åˆæ‰§è¡Œ æ“ä½œç³»ç»Ÿçš„Transparent huge pagesåŠŸèƒ½å¿…é¡»å…³é—­ï¼š 1echo never &gt; /sys/kernel/mm/transparent_hugepage/enable å¦‚æœåœ¨è™šæ‹Ÿæœºä¸­è¿è¡ŒRedisï¼Œå¯èƒ½å¤©ç„¶å°±æœ‰è™šæ‹Ÿæœºç¯å¢ƒå¸¦æ¥çš„å›ºæœ‰å»¶è¿Ÿã€‚å¯ä»¥é€šè¿‡./redis-cli â€“intrinsic-latency 100å‘½ä»¤æŸ¥çœ‹å›ºæœ‰å»¶è¿Ÿã€‚åŒæ—¶å¦‚æœå¯¹Redisçš„æ€§èƒ½æœ‰è¾ƒé«˜è¦æ±‚çš„è¯ï¼Œåº”å°½å¯èƒ½åœ¨ç‰©ç†æœºä¸Šç›´æ¥éƒ¨ç½²Redisã€‚ æ£€æŸ¥æ•°æ®æŒä¹…åŒ–ç­–ç•¥ è€ƒè™‘å¼•å…¥è¯»å†™åˆ†ç¦»æœºåˆ¶ é•¿è€—æ—¶å‘½ä»¤Redisç»å¤§å¤šæ•°è¯»å†™å‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦éƒ½åœ¨O(1)åˆ°O(N)ä¹‹é—´ï¼Œåœ¨æ–‡æœ¬å’Œå®˜æ–¹æ–‡æ¡£ä¸­å‡å¯¹æ¯ä¸ªå‘½ä»¤çš„æ—¶é—´å¤æ‚åº¦æœ‰è¯´æ˜ã€‚ é€šå¸¸æ¥è¯´ï¼ŒO(1)çš„å‘½ä»¤æ˜¯å®‰å…¨çš„ï¼ŒO(N)å‘½ä»¤åœ¨ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœNçš„æ•°é‡çº§ä¸å¯é¢„çŸ¥ï¼Œåˆ™åº”é¿å…ä½¿ç”¨ã€‚ä¾‹å¦‚å¯¹ä¸€ä¸ªfieldæ•°æœªçŸ¥çš„Hashæ•°æ®æ‰§è¡ŒHGETALL/HKEYS/HVALSå‘½ä»¤ï¼Œé€šå¸¸æ¥è¯´è¿™äº›å‘½ä»¤æ‰§è¡Œçš„å¾ˆå¿«ï¼Œä½†å¦‚æœè¿™ä¸ªHashä¸­çš„fieldæ•°é‡æå¤šï¼Œè€—æ—¶å°±ä¼šæˆå€å¢é•¿ã€‚åˆå¦‚ä½¿ç”¨SUNIONå¯¹ä¸¤ä¸ªSetæ‰§è¡ŒUnionæ“ä½œï¼Œæˆ–ä½¿ç”¨SORTå¯¹List/Setæ‰§è¡Œæ’åºæ“ä½œç­‰æ—¶ï¼Œéƒ½åº”è¯¥ä¸¥åŠ æ³¨æ„ã€‚ é¿å…åœ¨ä½¿ç”¨è¿™äº›O(N)å‘½ä»¤æ—¶å‘ç”Ÿé—®é¢˜ä¸»è¦æœ‰å‡ ä¸ªåŠæ³•ï¼š ä¸è¦æŠŠListå½“åšåˆ—è¡¨ä½¿ç”¨ï¼Œä»…å½“åšé˜Ÿåˆ—æ¥ä½¿ç”¨ é€šè¿‡æœºåˆ¶ä¸¥æ ¼æ§åˆ¶Hashã€Setã€Sorted Setçš„å¤§å° å¯èƒ½çš„è¯ï¼Œå°†æ’åºã€å¹¶é›†ã€äº¤é›†ç­‰æ“ä½œæ”¾åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ ç»å¯¹ç¦æ­¢ä½¿ç”¨KEYSå‘½ä»¤ é¿å…ä¸€æ¬¡æ€§éå†é›†åˆç±»å‹çš„æ‰€æœ‰æˆå‘˜ï¼Œè€Œåº”ä½¿ç”¨SCANç±»çš„å‘½ä»¤è¿›è¡Œåˆ†æ‰¹çš„ï¼Œæ¸¸æ ‡å¼çš„éå† Redisæä¾›äº†SCANå‘½ä»¤ï¼Œå¯ä»¥å¯¹Redisä¸­å­˜å‚¨çš„æ‰€æœ‰keyè¿›è¡Œæ¸¸æ ‡å¼çš„éå†ï¼Œé¿å…ä½¿ç”¨KEYSå‘½ä»¤å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ã€‚åŒæ—¶è¿˜æœ‰SSCAN/HSCAN/ZSCANç­‰å‘½ä»¤ï¼Œåˆ†åˆ«ç”¨äºå¯¹Set/Hash/Sorted Setä¸­çš„å…ƒç´ è¿›è¡Œæ¸¸æ ‡å¼éå†ã€‚ Redisæä¾›äº†Slow LogåŠŸèƒ½ï¼Œå¯ä»¥è‡ªåŠ¨è®°å½•è€—æ—¶è¾ƒé•¿çš„å‘½ä»¤ã€‚ç›¸å…³çš„é…ç½®å‚æ•°æœ‰ä¸¤ä¸ªï¼š 12slowlog-log-slower-than xxxms #æ‰§è¡Œæ—¶é—´æ…¢äºxxxæ¯«ç§’çš„å‘½ä»¤è®¡å…¥Slow Logslowlog-max-len xxx #Slow Logçš„é•¿åº¦ï¼Œå³æœ€å¤§çºªå½•å¤šå°‘æ¡Slow Log ä½¿ç”¨SLOWLOG GET [number]å‘½ä»¤ï¼Œå¯ä»¥è¾“å‡ºæœ€è¿‘è¿›å…¥Slow Logçš„numberæ¡å‘½ä»¤ã€‚ä½¿ç”¨SLOWLOG RESETå‘½ä»¤ï¼Œå¯ä»¥é‡ç½®Slow Log ç½‘ç»œå¼•å‘çš„å»¶è¿Ÿ å°½å¯èƒ½ä½¿ç”¨é•¿è¿æ¥æˆ–è¿æ¥æ± ï¼Œé¿å…é¢‘ç¹åˆ›å»ºé”€æ¯è¿æ¥ å®¢æˆ·ç«¯è¿›è¡Œçš„æ‰¹é‡æ•°æ®æ“ä½œï¼Œåº”ä½¿ç”¨Pipelineç‰¹æ€§åœ¨ä¸€æ¬¡äº¤äº’ä¸­å®Œæˆã€‚å…·ä½“è¯·å‚ç…§æœ¬æ–‡çš„Pipeliningç« èŠ‚ æ•°æ®æŒä¹…åŒ–å¼•å‘çš„å»¶è¿ŸRedisçš„æ•°æ®æŒä¹…åŒ–å·¥ä½œæœ¬èº«å°±ä¼šå¸¦æ¥å»¶è¿Ÿï¼Œéœ€è¦æ ¹æ®æ•°æ®çš„å®‰å…¨çº§åˆ«å’Œæ€§èƒ½è¦æ±‚åˆ¶å®šåˆç†çš„æŒä¹…åŒ–ç­–ç•¥ï¼š AOF + fsync alwaysçš„è®¾ç½®è™½ç„¶èƒ½å¤Ÿç»å¯¹ç¡®ä¿æ•°æ®å®‰å…¨ï¼Œä½†æ¯ä¸ªæ“ä½œéƒ½ä¼šè§¦å‘ä¸€æ¬¡fsyncï¼Œä¼šå¯¹Redisçš„æ€§èƒ½æœ‰æ¯”è¾ƒæ˜æ˜¾çš„å½±å“ AOF + fsync every secondæ˜¯æ¯”è¾ƒå¥½çš„æŠ˜ä¸­æ–¹æ¡ˆï¼Œæ¯ç§’fsyncä¸€æ¬¡ AOF + fsync neverä¼šæä¾›AOFæŒä¹…åŒ–æ–¹æ¡ˆä¸‹çš„æœ€ä¼˜æ€§èƒ½ ä½¿ç”¨RDBæŒä¹…åŒ–é€šå¸¸ä¼šæä¾›æ¯”ä½¿ç”¨AOFæ›´é«˜çš„æ€§èƒ½ï¼Œä½†éœ€è¦æ³¨æ„RDBçš„ç­–ç•¥é…ç½® æ¯ä¸€æ¬¡RDBå¿«ç…§å’ŒAOF Rewriteéƒ½éœ€è¦Redisä¸»è¿›ç¨‹è¿›è¡Œforkæ“ä½œã€‚forkæ“ä½œæœ¬èº«å¯èƒ½ä¼šäº§ç”Ÿè¾ƒé«˜çš„è€—æ—¶ï¼Œä¸CPUå’ŒRediså ç”¨çš„å†…å­˜å¤§å°æœ‰å…³ã€‚æ ¹æ®å…·ä½“çš„æƒ…å†µåˆç†é…ç½®RDBå¿«ç…§å’ŒAOF Rewriteæ—¶æœºï¼Œé¿å…è¿‡äºé¢‘ç¹çš„forkå¸¦æ¥çš„å»¶è¿Ÿ 1Redisåœ¨forkå­è¿›ç¨‹æ—¶éœ€è¦å°†å†…å­˜åˆ†é¡µè¡¨æ‹·è´è‡³å­è¿›ç¨‹ï¼Œä»¥å ç”¨äº†24GBå†…å­˜çš„Rediså®ä¾‹ä¸ºä¾‹ï¼Œå…±éœ€è¦æ‹·è´24GB / 4kB * 8 = 48MBçš„æ•°æ®ã€‚åœ¨ä½¿ç”¨å•Xeon 2.27Ghzçš„ç‰©ç†æœºä¸Šï¼Œè¿™ä¸€forkæ“ä½œè€—æ—¶216msã€‚ 1å¯ä»¥é€šè¿‡INFOå‘½ä»¤è¿”å›çš„latest_fork_usecå­—æ®µæŸ¥çœ‹ä¸Šä¸€æ¬¡forkæ“ä½œçš„è€—æ—¶ï¼ˆå¾®ç§’ï¼‰ Swapå¼•å‘çš„å»¶è¿Ÿå½“Linuxå°†Redisæ‰€ç”¨çš„å†…å­˜åˆ†é¡µç§»è‡³swapç©ºé—´æ—¶ï¼Œå°†ä¼šé˜»å¡Redisè¿›ç¨‹ï¼Œå¯¼è‡´Rediså‡ºç°ä¸æ­£å¸¸çš„å»¶è¿Ÿã€‚Swapé€šå¸¸åœ¨ç‰©ç†å†…å­˜ä¸è¶³æˆ–ä¸€äº›è¿›ç¨‹åœ¨è¿›è¡Œå¤§é‡I/Oæ“ä½œæ—¶å‘ç”Ÿï¼Œåº”å°½å¯èƒ½é¿å…ä¸Šè¿°ä¸¤ç§æƒ…å†µçš„å‡ºç°ã€‚ /proc//smapsæ–‡ä»¶ä¸­ä¼šä¿å­˜è¿›ç¨‹çš„swapè®°å½•ï¼Œé€šè¿‡æŸ¥çœ‹è¿™ä¸ªæ–‡ä»¶ï¼Œèƒ½å¤Ÿåˆ¤æ–­Redisçš„å»¶è¿Ÿæ˜¯å¦ç”±Swapäº§ç”Ÿã€‚å¦‚æœè¿™ä¸ªæ–‡ä»¶ä¸­è®°å½•äº†è¾ƒå¤§çš„Swap sizeï¼Œåˆ™è¯´æ˜å»¶è¿Ÿå¾ˆæœ‰å¯èƒ½æ˜¯Swapé€ æˆçš„ã€‚ æ•°æ®æ·˜æ±°å¼•å‘çš„å»¶è¿Ÿå½“åŒä¸€ç§’å†…æœ‰å¤§é‡keyè¿‡æœŸæ—¶ï¼Œä¹Ÿä¼šå¼•å‘Redisçš„å»¶è¿Ÿã€‚åœ¨ä½¿ç”¨æ—¶åº”å°½é‡å°†keyçš„å¤±æ•ˆæ—¶é—´é”™å¼€ã€‚ å¼•å…¥è¯»å†™åˆ†ç¦»æœºåˆ¶Redisçš„ä¸»ä»å¤åˆ¶èƒ½åŠ›å¯ä»¥å®ç°ä¸€ä¸»å¤šä»çš„å¤šèŠ‚ç‚¹æ¶æ„ï¼Œåœ¨è¿™ä¸€æ¶æ„ä¸‹ï¼Œä¸»èŠ‚ç‚¹æ¥æ”¶æ‰€æœ‰å†™è¯·æ±‚ï¼Œå¹¶å°†æ•°æ®åŒæ­¥ç»™å¤šä¸ªä»èŠ‚ç‚¹ã€‚åœ¨è¿™ä¸€åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥è®©ä»èŠ‚ç‚¹æä¾›å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„è¯»è¯·æ±‚æœåŠ¡ï¼Œä»¥å‡å°ä¸»èŠ‚ç‚¹çš„å‹åŠ›ã€‚å°¤å…¶æ˜¯é’ˆå¯¹ä¸€äº›ä½¿ç”¨äº†é•¿è€—æ—¶å‘½ä»¤çš„ç»Ÿè®¡ç±»ä»»åŠ¡ï¼Œå®Œå…¨å¯ä»¥æŒ‡å®šåœ¨ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ä¸Šæ‰§è¡Œï¼Œé¿å…è¿™äº›é•¿è€—æ—¶å‘½ä»¤å½±å“å…¶ä»–è¯·æ±‚çš„å“åº”ã€‚ ä¸»ä»å¤åˆ¶ä¸é›†ç¾¤åˆ†ç‰‡ä¸»ä»å¤åˆ¶Redisæ”¯æŒä¸€ä¸»å¤šä»çš„ä¸»ä»å¤åˆ¶æ¶æ„ã€‚ä¸€ä¸ªMasterå®ä¾‹è´Ÿè´£å¤„ç†æ‰€æœ‰çš„å†™è¯·æ±‚ï¼ŒMasterå°†å†™æ“ä½œåŒæ­¥è‡³æ‰€æœ‰Slaveã€‚å€ŸåŠ©Redisçš„ä¸»ä»å¤åˆ¶ï¼Œå¯ä»¥å®ç°è¯»å†™åˆ†ç¦»å’Œé«˜å¯ç”¨ï¼š å®æ—¶æ€§è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜çš„è¯»è¯·æ±‚ï¼Œå¯ä»¥åœ¨Slaveä¸Šå®Œæˆï¼Œæå‡æ•ˆç‡ã€‚ç‰¹åˆ«æ˜¯ä¸€äº›å‘¨æœŸæ€§æ‰§è¡Œçš„ç»Ÿè®¡ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å¯èƒ½éœ€è¦æ‰§è¡Œä¸€äº›é•¿è€—æ—¶çš„Rediså‘½ä»¤ï¼Œå¯ä»¥ä¸“é—¨è§„åˆ’å‡º1ä¸ªæˆ–å‡ ä¸ªSlaveç”¨äºæœåŠ¡è¿™äº›ç»Ÿè®¡ä»»åŠ¡ å€ŸåŠ©Redis Sentinelå¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œå½“Master crashåï¼ŒRedis Sentinelèƒ½å¤Ÿè‡ªåŠ¨å°†ä¸€ä¸ªSlaveæ™‹å‡ä¸ºMasterï¼Œç»§ç»­æä¾›æœåŠ¡ å¯ç”¨ä¸»ä»å¤åˆ¶éå¸¸ç®€å•ï¼Œåªéœ€è¦é…ç½®å¤šä¸ªRediså®ä¾‹ï¼Œåœ¨ä½œä¸ºSlaveçš„Rediså®ä¾‹ä¸­é…ç½®ï¼š 1slaveof 192.168.1.1 6379 #æŒ‡å®šMasterçš„IPå’Œç«¯å£ å½“Slaveå¯åŠ¨åï¼Œä¼šä»Masterè¿›è¡Œä¸€æ¬¡å†·å¯åŠ¨æ•°æ®åŒæ­¥ï¼Œç”±Masterè§¦å‘BGSAVEç”ŸæˆRDBæ–‡ä»¶æ¨é€ç»™Slaveè¿›è¡Œå¯¼å…¥ï¼Œå¯¼å…¥å®ŒæˆåMasterå†å°†å¢é‡æ•°æ®é€šè¿‡Redis ProtocolåŒæ­¥ç»™Slaveã€‚ä¹‹åä¸»ä»ä¹‹é—´çš„æ•°æ®ä¾¿ä¸€ç›´ä»¥Redis Protocolè¿›è¡ŒåŒæ­¥ ä½¿ç”¨Sentinelåšè‡ªåŠ¨failoverRedisçš„ä¸»ä»å¤åˆ¶åŠŸèƒ½æœ¬èº«åªæ˜¯åšæ•°æ®åŒæ­¥ï¼Œå¹¶ä¸æä¾›ç›‘æ§å’Œè‡ªåŠ¨failoverèƒ½åŠ›ï¼Œè¦é€šè¿‡ä¸»ä»å¤åˆ¶åŠŸèƒ½æ¥å®ç°Redisçš„é«˜å¯ç”¨ï¼Œè¿˜éœ€è¦å¼•å…¥ä¸€ä¸ªç»„ä»¶ï¼šRedis Sentinel Redis Sentinelæ˜¯Rediså®˜æ–¹å¼€å‘çš„ç›‘æ§ç»„ä»¶ï¼Œå¯ä»¥ç›‘æ§Rediså®ä¾‹çš„çŠ¶æ€ï¼Œé€šè¿‡MasterèŠ‚ç‚¹è‡ªåŠ¨å‘ç°SlaveèŠ‚ç‚¹ï¼Œå¹¶åœ¨ç›‘æµ‹åˆ°MasterèŠ‚ç‚¹å¤±æ•ˆæ—¶é€‰ä¸¾å‡ºä¸€ä¸ªæ–°çš„Masterï¼Œå¹¶å‘æ‰€æœ‰Rediså®ä¾‹æ¨é€æ–°çš„ä¸»ä»é…ç½®ã€‚ Redis Sentineléœ€è¦è‡³å°‘éƒ¨ç½²3ä¸ªå®ä¾‹æ‰èƒ½å½¢æˆé€‰ä¸¾å…³ç³»ã€‚ å…³é”®é…ç½®ï¼š 1234sentinel monitor mymaster 127.0.0.1 6379 2 #Masterå®ä¾‹çš„IPã€ç«¯å£ï¼Œä»¥åŠé€‰ä¸¾éœ€è¦çš„èµæˆç¥¨æ•°sentinel down-after-milliseconds mymaster 60000 #å¤šé•¿æ—¶é—´æ²¡æœ‰å“åº”è§†ä¸ºMasterå¤±æ•ˆsentinel failover-timeout mymaster 180000 #ä¸¤æ¬¡failoverå°è¯•é—´çš„é—´éš”æ—¶é•¿sentinel parallel-syncs mymaster 1 #å¦‚æœæœ‰å¤šä¸ªSlaveï¼Œå¯ä»¥é€šè¿‡æ­¤é…ç½®æŒ‡å®šåŒæ—¶ä»æ–°Masterè¿›è¡Œæ•°æ®åŒæ­¥çš„Slaveæ•°ï¼Œé¿å…æ‰€æœ‰SlaveåŒæ—¶è¿›è¡Œæ•°æ®åŒæ­¥å¯¼è‡´æŸ¥è¯¢æœåŠ¡ä¹Ÿä¸å¯ç”¨ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRedis Sentinelå®ç°çš„è‡ªåŠ¨failoverä¸æ˜¯åœ¨åŒä¸€ä¸ªIPå’Œç«¯å£ä¸Šå®Œæˆçš„ï¼Œä¹Ÿå°±æ˜¯è¯´è‡ªåŠ¨failoveräº§ç”Ÿçš„æ–°Masteræä¾›æœåŠ¡çš„IPå’Œç«¯å£ä¸ä¹‹å‰çš„Masteræ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¦å®ç°HAï¼Œè¿˜è¦æ±‚å®¢æˆ·ç«¯å¿…é¡»æ”¯æŒSentinelï¼Œèƒ½å¤Ÿä¸Sentineläº¤äº’è·å¾—æ–°Masterçš„ä¿¡æ¯æ‰è¡Œã€‚ é›†ç¾¤åˆ†ç‰‡ä¸ºä½•è¦åšé›†ç¾¤åˆ†ç‰‡ï¼š Redisä¸­å­˜å‚¨çš„æ•°æ®é‡å¤§ï¼Œä¸€å°ä¸»æœºçš„ç‰©ç†å†…å­˜å·²ç»æ— æ³•å®¹çº³ Redisçš„å†™è¯·æ±‚å¹¶å‘é‡å¤§ï¼Œä¸€ä¸ªRediså®ä¾‹ä»¥æ— æ³•æ‰¿è½½ å½“ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜å‡ºç°æ—¶ï¼Œå°±å¿…é¡»è¦å¯¹Redisè¿›è¡Œåˆ†ç‰‡äº†ã€‚Redisçš„åˆ†ç‰‡æ–¹æ¡ˆæœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚å¾ˆå¤šRedisçš„å®¢æˆ·ç«¯éƒ½è‡ªè¡Œå®ç°äº†åˆ†ç‰‡åŠŸèƒ½ï¼Œä¹Ÿæœ‰å‘Twemproxyè¿™æ ·çš„ä»¥ä»£ç†æ–¹å¼å®ç°çš„Redisåˆ†ç‰‡æ–¹æ¡ˆã€‚ç„¶è€Œé¦–é€‰çš„æ–¹æ¡ˆè¿˜åº”è¯¥æ˜¯Rediså®˜æ–¹åœ¨3.0ç‰ˆæœ¬ä¸­æ¨å‡ºçš„Redis Clusteråˆ†ç‰‡æ–¹æ¡ˆã€‚ æœ¬æ–‡ä¸ä¼šå¯¹Redis Clusterçš„å…·ä½“å®‰è£…å’Œéƒ¨ç½²ç»†èŠ‚è¿›è¡Œä»‹ç»ï¼Œé‡ç‚¹ä»‹ç»Redis Clusterå¸¦æ¥çš„å¥½å¤„ä¸å¼Šç«¯ã€‚ Redis Clusterçš„èƒ½åŠ› èƒ½å¤Ÿè‡ªåŠ¨å°†æ•°æ®åˆ†æ•£åœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Š å½“è®¿é—®çš„keyä¸åœ¨å½“å‰åˆ†ç‰‡ä¸Šæ—¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å°†è¯·æ±‚è½¬å‘è‡³æ­£ç¡®çš„åˆ†ç‰‡ å½“é›†ç¾¤ä¸­éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæ—¶ä»èƒ½æä¾›æœåŠ¡ å…¶ä¸­ç¬¬ä¸‰ç‚¹æ˜¯åŸºäºä¸»ä»å¤åˆ¶æ¥å®ç°çš„ï¼ŒRedis Clusterçš„æ¯ä¸ªæ•°æ®åˆ†ç‰‡éƒ½é‡‡ç”¨äº†ä¸»ä»å¤åˆ¶çš„ç»“æ„ï¼ŒåŸç†å’Œå‰æ–‡æ‰€è¿°çš„ä¸»ä»å¤åˆ¶å®Œå…¨ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯çœå»äº†Redis Sentinelè¿™ä¸€é¢å¤–çš„ç»„ä»¶ï¼Œç”±Redis Clusterè´Ÿè´£è¿›è¡Œä¸€ä¸ªåˆ†ç‰‡å†…éƒ¨çš„èŠ‚ç‚¹ç›‘æ§å’Œè‡ªåŠ¨failoverã€‚ Redis Clusteråˆ†ç‰‡åŸç†Redis Clusterä¸­å…±æœ‰16384ä¸ªhash slotï¼ŒRedisä¼šè®¡ç®—æ¯ä¸ªkeyçš„CRC16ï¼Œå°†ç»“æœä¸16384å–æ¨¡ï¼Œæ¥å†³å®šè¯¥keyå­˜å‚¨åœ¨å“ªä¸€ä¸ªhash slotä¸­ï¼ŒåŒæ—¶éœ€è¦æŒ‡å®šRedis Clusterä¸­æ¯ä¸ªæ•°æ®åˆ†ç‰‡è´Ÿè´£çš„Slotæ•°ã€‚Slotçš„åˆ†é…åœ¨ä»»ä½•æ—¶é—´ç‚¹éƒ½å¯ä»¥è¿›è¡Œé‡æ–°åˆ†é…ã€‚ å®¢æˆ·ç«¯åœ¨å¯¹keyè¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œå¯ä»¥è¿æ¥Clusterä¸­çš„ä»»æ„ä¸€ä¸ªåˆ†ç‰‡ï¼Œå¦‚æœæ“ä½œçš„keyä¸åœ¨æ­¤åˆ†ç‰‡è´Ÿè´£çš„SlotèŒƒå›´å†…ï¼ŒRedis Clusterä¼šè‡ªåŠ¨å°†è¯·æ±‚é‡å®šå‘åˆ°æ­£ç¡®çš„åˆ†ç‰‡ä¸Šã€‚ hash tagsåœ¨åŸºç¡€çš„åˆ†ç‰‡åŸåˆ™ä¸Šï¼ŒRedisè¿˜æ”¯æŒhash tagsåŠŸèƒ½ï¼Œä»¥hash tagsè¦æ±‚çš„æ ¼å¼æ˜æ˜çš„keyï¼Œå°†ä¼šç¡®ä¿è¿›å…¥åŒä¸€ä¸ªSlotä¸­ã€‚ä¾‹å¦‚ï¼š{uiv}user:1000å’Œ{uiv}user:1001æ‹¥æœ‰åŒæ ·çš„hash tag {uiv}ï¼Œä¼šä¿å­˜åœ¨åŒä¸€ä¸ªSlotä¸­ã€‚ ä½¿ç”¨Redis Clusteræ—¶ï¼Œpipeliningã€äº‹åŠ¡å’ŒLUA ScriptåŠŸèƒ½æ¶‰åŠçš„keyå¿…é¡»åœ¨åŒä¸€ä¸ªæ•°æ®åˆ†ç‰‡ä¸Šï¼Œå¦åˆ™å°†ä¼šè¿”å›é”™è¯¯ã€‚å¦‚è¦åœ¨Redis Clusterä¸­ä½¿ç”¨ä¸Šè¿°åŠŸèƒ½ï¼Œå°±å¿…é¡»é€šè¿‡hash tagsæ¥ç¡®ä¿ä¸€ä¸ªpipelineæˆ–ä¸€ä¸ªäº‹åŠ¡ä¸­æ“ä½œçš„æ‰€æœ‰keyéƒ½ä½äºåŒä¸€ä¸ªSlotä¸­ã€‚ 1æœ‰ä¸€äº›å®¢æˆ·ç«¯ï¼ˆå¦‚Redissonï¼‰å®ç°äº†é›†ç¾¤åŒ–çš„pipeliningæ“ä½œï¼Œå¯ä»¥è‡ªåŠ¨å°†ä¸€ä¸ªpipelineé‡Œçš„å‘½ä»¤æŒ‰keyæ‰€åœ¨çš„åˆ†ç‰‡è¿›è¡Œåˆ†ç»„ï¼Œåˆ†åˆ«å‘åˆ°ä¸åŒçš„åˆ†ç‰‡ä¸Šæ‰§è¡Œã€‚ä½†æ˜¯Redisä¸æ”¯æŒè·¨åˆ†ç‰‡çš„äº‹åŠ¡ï¼Œäº‹åŠ¡å’ŒLUA Scriptè¿˜æ˜¯å¿…é¡»éµå¾ªæ‰€æœ‰keyåœ¨ä¸€ä¸ªåˆ†ç‰‡ä¸Šçš„è§„åˆ™è¦æ±‚ã€‚ ä¸»ä»å¤åˆ¶ vs é›†ç¾¤åˆ†ç‰‡åœ¨è®¾è®¡è½¯ä»¶æ¶æ„æ—¶ï¼Œè¦å¦‚ä½•åœ¨ä¸»ä»å¤åˆ¶å’Œé›†ç¾¤åˆ†ç‰‡ä¸¤ç§éƒ¨ç½²æ–¹æ¡ˆä¸­å–èˆå‘¢ï¼Ÿ ä»å„ä¸ªæ–¹é¢çœ‹ï¼ŒRedis Clusteréƒ½æ˜¯ä¼˜äºä¸»ä»å¤åˆ¶çš„æ–¹æ¡ˆ Redis Clusterèƒ½å¤Ÿè§£å†³å•èŠ‚ç‚¹ä¸Šæ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ Redis Clusterèƒ½å¤Ÿè§£å†³å•èŠ‚ç‚¹è®¿é—®å‹åŠ›è¿‡å¤§çš„é—®é¢˜ Redis ClusteråŒ…å«äº†ä¸»ä»å¤åˆ¶çš„èƒ½åŠ› é‚£æ˜¯ä¸æ˜¯ä»£è¡¨Redis Clusteræ°¸è¿œæ˜¯ä¼˜äºä¸»ä»å¤åˆ¶çš„é€‰æ‹©å‘¢ï¼Ÿ å¹¶ä¸æ˜¯ã€‚ è½¯ä»¶æ¶æ„æ°¸è¿œä¸æ˜¯è¶Šå¤æ‚è¶Šå¥½ï¼Œå¤æ‚çš„æ¶æ„åœ¨å¸¦æ¥æ˜¾è‘—å¥½å¤„çš„åŒæ—¶ï¼Œä¸€å®šä¹Ÿä¼šå¸¦æ¥ç›¸åº”çš„å¼Šç«¯ã€‚é‡‡ç”¨Redis Clusterçš„å¼Šç«¯åŒ…æ‹¬ï¼š ç»´æŠ¤éš¾åº¦å¢åŠ ã€‚åœ¨ä½¿ç”¨Redis Clusteræ—¶ï¼Œéœ€è¦ç»´æŠ¤çš„Rediså®ä¾‹æ•°å€å¢ï¼Œéœ€è¦ç›‘æ§çš„ä¸»æœºæ•°é‡ä¹Ÿç›¸åº”å¢åŠ ï¼Œæ•°æ®å¤‡ä»½/æŒä¹…åŒ–çš„å¤æ‚åº¦ä¹Ÿä¼šå¢åŠ ã€‚åŒæ—¶åœ¨è¿›è¡Œåˆ†ç‰‡çš„å¢å‡æ“ä½œæ—¶ï¼Œè¿˜éœ€è¦è¿›è¡Œreshardæ“ä½œï¼Œè¿œæ¯”ä¸»ä»æ¨¡å¼ä¸‹å¢åŠ ä¸€ä¸ªSlaveçš„å¤æ‚åº¦è¦é«˜ã€‚ å®¢æˆ·ç«¯èµ„æºæ¶ˆè€—å¢åŠ ã€‚å½“å®¢æˆ·ç«¯ä½¿ç”¨è¿æ¥æ± æ—¶ï¼Œéœ€è¦ä¸ºæ¯ä¸€ä¸ªæ•°æ®åˆ†ç‰‡ç»´æŠ¤ä¸€ä¸ªè¿æ¥æ± ï¼Œå®¢æˆ·ç«¯åŒæ—¶éœ€è¦ä¿æŒçš„è¿æ¥æ•°æˆå€å¢å¤šï¼ŒåŠ å¤§äº†å®¢æˆ·ç«¯æœ¬èº«å’Œæ“ä½œç³»ç»Ÿèµ„æºçš„æ¶ˆè€—ã€‚ æ€§èƒ½ä¼˜åŒ–éš¾åº¦å¢åŠ ã€‚ä½ å¯èƒ½éœ€è¦åœ¨å¤šä¸ªåˆ†ç‰‡ä¸ŠæŸ¥çœ‹Slow Logå’ŒSwapæ—¥å¿—æ‰èƒ½å®šä½æ€§èƒ½é—®é¢˜ã€‚ äº‹åŠ¡å’ŒLUA Scriptçš„ä½¿ç”¨æˆæœ¬å¢åŠ ã€‚åœ¨Redis Clusterä¸­ä½¿ç”¨äº‹åŠ¡å’ŒLUA Scriptç‰¹æ€§æœ‰ä¸¥æ ¼çš„é™åˆ¶æ¡ä»¶ï¼Œäº‹åŠ¡å’ŒScriptä¸­æ“ä½œçš„keyå¿…é¡»ä½äºåŒä¸€ä¸ªåˆ†ç‰‡ä¸Šï¼Œè¿™å°±ä½¿å¾—åœ¨å¼€å‘æ—¶å¿…é¡»å¯¹ç›¸åº”åœºæ™¯ä¸‹æ¶‰åŠçš„keyè¿›è¡Œé¢å¤–çš„è§„åˆ’å’Œè§„èŒƒè¦æ±‚ã€‚å¦‚æœåº”ç”¨çš„åœºæ™¯ä¸­å¤§é‡æ¶‰åŠäº‹åŠ¡å’ŒScriptçš„ä½¿ç”¨ï¼Œå¦‚ä½•åœ¨ä¿è¯è¿™ä¸¤ä¸ªåŠŸèƒ½çš„æ­£å¸¸è¿ä½œå‰æä¸‹æŠŠæ•°æ®å¹³å‡åˆ†åˆ°å¤šä¸ªæ•°æ®åˆ†ç‰‡ä¸­å°±ä¼šæˆä¸ºéš¾ç‚¹ã€‚ æ‰€ä»¥è¯´ï¼Œåœ¨ä¸»ä»å¤åˆ¶å’Œé›†ç¾¤åˆ†ç‰‡ä¸¤ä¸ªæ–¹æ¡ˆä¸­åšå‡ºé€‰æ‹©æ—¶ï¼Œåº”è¯¥ä»åº”ç”¨è½¯ä»¶çš„åŠŸèƒ½ç‰¹æ€§ã€æ•°æ®å’Œè®¿é—®é‡çº§ã€æœªæ¥å‘å±•è§„åˆ’ç­‰æ–¹é¢ç»¼åˆè€ƒè™‘ï¼Œåªåœ¨ç¡®å®æœ‰å¿…è¦å¼•å…¥æ•°æ®åˆ†ç‰‡æ—¶å†ä½¿ç”¨Redis Clusterã€‚ä¸‹é¢æ˜¯ä¸€äº›å»ºè®®ï¼š éœ€è¦åœ¨Redisä¸­å­˜å‚¨çš„æ•°æ®æœ‰å¤šå¤§ï¼Ÿæœªæ¥2å¹´å†…å¯èƒ½å‘å±•ä¸ºå¤šå¤§ï¼Ÿè¿™äº›æ•°æ®æ˜¯å¦éƒ½éœ€è¦é•¿æœŸä¿å­˜ï¼Ÿæ˜¯å¦å¯ä»¥ä½¿ç”¨LRUç®—æ³•è¿›è¡Œéçƒ­ç‚¹æ•°æ®çš„æ·˜æ±°ï¼Ÿç»¼åˆè€ƒè™‘å‰é¢å‡ ä¸ªå› ç´ ï¼Œè¯„ä¼°å‡ºRediséœ€è¦ä½¿ç”¨çš„ç‰©ç†å†…å­˜ã€‚ ç”¨äºéƒ¨ç½²Redisçš„ä¸»æœºç‰©ç†å†…å­˜æœ‰å¤šå¤§ï¼Ÿæœ‰å¤šå°‘å¯ä»¥åˆ†é…ç»™Redisä½¿ç”¨ï¼Ÿå¯¹æ¯”(1)ä¸­çš„å†…å­˜éœ€æ±‚è¯„ä¼°ï¼Œæ˜¯å¦è¶³å¤Ÿç”¨ï¼Ÿ Redisé¢ä¸´çš„å¹¶å‘å†™å‹åŠ›ä¼šæœ‰å¤šå¤§ï¼Ÿåœ¨ä¸ä½¿ç”¨pipeliningæ—¶ï¼ŒRedisçš„å†™æ€§èƒ½å¯ä»¥è¶…è¿‡10ä¸‡æ¬¡/ç§’åœ¨ä½¿ç”¨Redisæ—¶ï¼Œæ˜¯å¦ä¼šä½¿ç”¨åˆ°pipeliningå’Œäº‹åŠ¡åŠŸèƒ½ï¼Ÿä½¿ç”¨çš„åœºæ™¯å¤šä¸å¤šï¼Ÿ ç»¼åˆä¸Šé¢å‡ ç‚¹è€ƒè™‘ï¼Œå¦‚æœå•å°ä¸»æœºçš„å¯ç”¨ç‰©ç†å†…å­˜å®Œå…¨è¶³ä»¥æ”¯æ’‘å¯¹Redisçš„å®¹é‡éœ€æ±‚ï¼Œä¸”Redisé¢ä¸´çš„å¹¶å‘å†™å‹åŠ›è·ç¦»Benchmarkå€¼è¿˜å°šæœ‰è·ç¦»ï¼Œå»ºè®®é‡‡ç”¨ä¸»ä»å¤åˆ¶çš„æ¶æ„ï¼Œå¯ä»¥çœå»å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ã€‚åŒæ—¶ï¼Œå¦‚æœåº”ç”¨ä¸­å¤§é‡ä½¿ç”¨pipeliningå’Œäº‹åŠ¡ï¼Œä¹Ÿå»ºè®®å°½å¯èƒ½é€‰æ‹©ä¸»ä»å¤åˆ¶æ¶æ„ï¼Œå¯ä»¥å‡å°‘è®¾è®¡å’Œå¼€å‘æ—¶çš„å¤æ‚åº¦ã€‚ Redis Javaå®¢æˆ·ç«¯çš„é€‰æ‹©Redisçš„Javaå®¢æˆ·ç«¯å¾ˆå¤šï¼Œå®˜æ–¹æ¨èçš„æœ‰ä¸‰ç§ï¼šJedisã€Redissonå’Œlettuceã€‚ åœ¨è¿™é‡Œå¯¹Jediså’ŒRedissonè¿›è¡Œå¯¹æ¯”ä»‹ç» Jedisï¼š è½»é‡ï¼Œç®€æ´ï¼Œä¾¿äºé›†æˆå’Œæ”¹é€  æ”¯æŒè¿æ¥æ±  æ”¯æŒpipeliningã€äº‹åŠ¡ã€LUA Scriptingã€Redis Sentinelã€Redis Cluster ä¸æ”¯æŒè¯»å†™åˆ†ç¦»ï¼Œéœ€è¦è‡ªå·±å®ç° æ–‡æ¡£å·®ï¼ˆçœŸçš„å¾ˆå·®ï¼Œå‡ ä¹æ²¡æœ‰â€¦â€¦ï¼‰ Redissonï¼š åŸºäºNettyå®ç°ï¼Œé‡‡ç”¨éé˜»å¡IOï¼Œæ€§èƒ½é«˜ æ”¯æŒå¼‚æ­¥è¯·æ±‚ æ”¯æŒè¿æ¥æ±  æ”¯æŒpipeliningã€LUA Scriptingã€Redis Sentinelã€Redis Cluster ä¸æ”¯æŒäº‹åŠ¡ï¼Œå®˜æ–¹å»ºè®®ä»¥LUA Scriptingä»£æ›¿äº‹åŠ¡ æ”¯æŒåœ¨Redis Clusteræ¶æ„ä¸‹ä½¿ç”¨pipelining æ”¯æŒè¯»å†™åˆ†ç¦»ï¼Œæ”¯æŒè¯»è´Ÿè½½å‡è¡¡ï¼Œåœ¨ä¸»ä»å¤åˆ¶å’ŒRedis Clusteræ¶æ„ä¸‹éƒ½å¯ä»¥ä½¿ç”¨ å†…å»ºTomcat Session Managerï¼Œä¸ºTomcat 6/7/8æä¾›äº†ä¼šè¯å…±äº«åŠŸèƒ½ å¯ä»¥ä¸Spring Sessioné›†æˆï¼Œå®ç°åŸºäºRedisçš„ä¼šè¯å…±äº« æ–‡æ¡£è¾ƒä¸°å¯Œï¼Œæœ‰ä¸­æ–‡æ–‡æ¡£ å¯¹äºJediså’ŒRedissonçš„é€‰æ‹©ï¼ŒåŒæ ·åº”éµå¾ªå‰è¿°çš„åŸç†ï¼Œå°½ç®¡Jedisæ¯”èµ·Redissonæœ‰å„ç§å„æ ·çš„ä¸è¶³ï¼Œä½†ä¹Ÿåº”è¯¥åœ¨éœ€è¦ä½¿ç”¨Redissonçš„é«˜çº§ç‰¹æ€§æ—¶å†é€‰ç”¨Redissonï¼Œé¿å…é€ æˆä¸å¿…è¦çš„ç¨‹åºå¤æ‚åº¦æå‡ã€‚ Jedisï¼šgithubï¼šhttps://github.com/xetorthio/jedisæ–‡æ¡£ï¼šhttps://github.com/xetorthio/jedis/wiki Redissonï¼šgithubï¼šhttps://github.com/redisson/redissonæ–‡æ¡£ï¼šhttps://github.com/redisson/redisson/wiki","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Redis","slug":"Code/Redis","permalink":"http://xiaoqinghua.site/categories/Code/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://xiaoqinghua.site/tags/Redis/"}]},{"title":"Redisç¬”è®°","slug":"Redisç¬”è®°","date":"2017-07-01T15:04:49.000Z","updated":"2018-08-24T07:45:12.677Z","comments":true,"path":"Redisç¬”è®°.html","link":"","permalink":"http://xiaoqinghua.site/Redisç¬”è®°.html","excerpt":"","text":"Redis é‡ç‚¹ç¬”è®°1ã€ä¸ºä»€ä¹ˆä½¿ç”¨ redis2ã€ä½¿ç”¨ redis å®¹æ˜“é€ æˆä»€ä¹ˆé—®é¢˜3ã€å•çº¿ç¨‹çš„ redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«4ã€redis çš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯5ã€redis çš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶6ã€redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜7ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜8ã€å¦‚ä½•è§£å†³ redis çš„å¹¶å‘ç«äº‰é—®é¢˜ ç¬”è®°è§£æ1ã€ä¸ºä»€ä¹ˆä½¿ç”¨ redisåˆ†æï¼šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ redis ä¸»è¦è€ƒè™‘ä¸¤ç‚¹æ€§èƒ½å’Œå¹¶å‘ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œredis è¿˜å…·å¤‡åšåˆ†å¸ƒå¼é”ç­‰å…¶ä»–åŠŸèƒ½ï¼ˆ// TODO ä»€ä¹ˆå…¶ä»–åŠŸèƒ½ï¼‰ï¼Œä½†æ˜¯å¦‚æœåªæ˜¯ä¸ºäº†åˆ†å¸ƒå¼é”è¿™äº›å…¶ä»–åŠŸèƒ½ï¼Œå®Œå…¨è¿˜æœ‰å…¶ä»–ä¸­é—´ä»¶ï¼ˆå¦‚ zookeeper ç­‰ï¼‰ä»£æ›¿ï¼Œå¹¶ä¸æ˜¯éè¦ç”¨ redisã€‚ æ€§èƒ½ å’Œ å¹¶å‘ æ€§èƒ½ï¼š \bå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åœ¨ç¢°åˆ°éœ€è¦æ‰§è¡Œè€—æ—¶ç‰¹åˆ«ä¹…ï¼Œä¸”æ‰§è¡Œç»“æœä¸é¢‘ç¹å˜åŠ¨çš„ SQLï¼Œå°±ç‰¹åˆ«é€‚åˆå°†è¿è¡Œç»“æœæ”¾å…¥ç¼“å­˜ã€‚è¿™æ ·ï¼Œåé¢çš„è¯·æ±‚å°±å»ç¼“å­˜ä¸­è¯»å–ï¼Œä½¿å¾—è¯·æ±‚èƒ½å¤Ÿè¿…é€Ÿå“åº”ï¼Œå› æ­¤æé«˜äº†æ€§èƒ½ã€‚ å¹¶å‘ï¼š å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„è¯·æ±‚ç›´æ¥è®¿é—®æ•°æ®åº“ï¼Œæ•°æ®åº“ä¼šå‡ºç°è¿æ¥å¼‚å¸¸ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå°±éœ€è¦ä½¿ç”¨ redis åšä¸€ä¸ªç¼“å†²æ“ä½œï¼Œè®©è¯·æ±‚å…ˆè®¿é—®åˆ° redisï¼Œè€Œä¸æ˜¯ç›´æ¥è®¿é—®æ•°æ®åº“ã€‚ 2ã€ä½¿ç”¨ redis å®¹æ˜“é€ æˆä»€ä¹ˆé—®é¢˜åˆ†æï¼šè¯šç„¶ redis è§£å†³äº†å¾ˆå¤šé—®é¢˜ï¼Œæé«˜äº†ç³»ç»Ÿæ€§èƒ½ï¼Œä¼˜åŒ–äº†ç³»ç»Ÿå¤„ç†å¹¶å‘çš„èƒ½åŠ›ï¼Œä½†æ˜¯ä½¿ç”¨ redis ä¹Ÿä¼šé‡åˆ°è§£å†³ä¸Šè¿°é—®é¢˜è¿›è€Œæ‰€äº§ç”Ÿçš„è¡ç”Ÿé—®é¢˜ã€‚ ä¸»è¦æ˜¯å››ä¸ªé—®é¢˜ ç¼“å­˜å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜ ç¼“å­˜é›ªå´©ï¼ˆå¤§é¢ç§¯çš„æ•°æ®å´©æºƒï¼‰ ç¼“å­˜å‡»ç©¿ ç¼“å­˜å¹¶å‘ç«äº‰é—®é¢˜ ä¸‹æ–‡ä¸­ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚ 3ã€å•çº¿ç¨‹çš„ redis ä¸ºä»€ä¹ˆè¿™ä¹ˆå¿«åˆ†æï¼šè¿™ä¸ªé—®é¢˜å…¶å®æ˜¯å¯¹ redis å†…éƒ¨æœºåˆ¶çš„ä¸€ä¸ªè€ƒå¯Ÿã€‚redis æ˜¯å•çº¿ç¨‹çš„ï¼ï¼ï¼ï¼ ä¸ºä»€ä¹ˆå¿«ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹ä¸‰ç‚¹ çº¯å†…å­˜æ“ä½œ å•çº¿ç¨‹æ“ä½œï¼Œé¿å…é¢‘ç¹åˆ‡æ¢ä¸Šä¸‹æ–‡ é‡‡ç”¨éé˜»å¡ I/O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼ˆæƒ³åˆ°äº† netty ï¼‰ I/O å¤šè·¯å¤ç”¨ï¼šå•ä¸ªçº¿ç¨‹ï¼Œé€šè¿‡è·Ÿè¸ªæ¯ä¸ªI/Oæµçš„çŠ¶æ€ï¼Œæ¥ç®¡ç†å¤šä¸ªI/Oæµã€‚ä¸‹å›¾æ˜¯ç±»æ¯”åˆ°çœŸå®çš„ redis çº¿ç¨‹æ¨¡å‹ï¼šæˆ‘ä»¬ä½¿ç”¨redis-clientåœ¨æ“ä½œçš„æ—¶å€™ï¼Œä¼šäº§ç”Ÿå…·æœ‰ä¸åŒäº‹ä»¶ç±»å‹çš„socketã€‚åœ¨æœåŠ¡ç«¯ï¼Œæœ‰ä¸€æ®µI/O å¤šè·¯å¤ç”¨çš„ç¨‹åºï¼Œå°†å…¶ç½®å…¥é˜Ÿåˆ—ä¹‹ä¸­ï¼ˆ//TODO å¯ç†è§£ä¸ºä¸€ä¸ªçº¿ç¨‹æ¨¡å‹ï¼Œå•çº¿ç¨‹å¤„ç†ï¼‰ï¼Œç„¶åå‘é€åˆ°æ–‡ä»¶äº‹ä»¶åˆ†æ´¾å™¨ï¼Œä¾æ¬¡å»é˜Ÿåˆ—ä¸­å–ï¼Œè½¬å‘åˆ°ä¸åŒçš„äº‹ä»¶å¤„ç†å™¨ä¸­ã€‚redisçš„è¿™ä¸ªI/O å¤šè·¯å¤ç”¨æœºåˆ¶ï¼Œè¿˜ä½“ç°åœ¨redisæä¾›äº†selectï¼Œepollï¼Œevportï¼Œkqueue`ç­‰å¤šè·¯å¤ç”¨å‡½æ•°åº“ã€‚ 4ã€redisçš„æ•°æ®ç±»å‹ï¼Œä»¥åŠæ¯ç§æ•°æ®ç±»å‹çš„ä½¿ç”¨åœºæ™¯åˆ†æï¼šè¿™æ˜¯ä¸€ä¸ªåŸºç¡€é—®é¢˜ï¼Œé…åˆç†Ÿè®°é£Ÿç”¨æ›´ä½³ã€‚ æœ‰äº”ç§æ•°æ®ç±»å‹ String å¸¸è§„set/getæ“ä½œï¼Œvalueå¯ä»¥æ˜¯Stringä¹Ÿå¯ä»¥æ˜¯æ•°å­—ã€‚ä¸€èˆ¬åšä¸€äº›å¤æ‚è®¡ç®—åŠŸèƒ½çš„ç¼“å­˜ã€‚ hash hashæ•°æ®ç±»å‹çš„valueå­˜æ”¾çš„æ˜¯ç»“æ„åŒ–çš„å¯¹è±¡ï¼Œæ¯”è¾ƒæ–¹ä¾¿çš„å°±æ˜¯æ“ä½œå…¶ä¸­çš„æŸä¸ªå­—æ®µã€‚åœ¨åšå•ç‚¹ç™»å½•çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç”¨è¿™ç§ç»“æ„å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä»¥cookieIdä½œä¸ºkeyï¼Œè®¾ç½®30åˆ†é’Ÿä¸ºç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œèƒ½å¾ˆå¥½çš„æ¨¡æ‹Ÿå‡ºç±»ä¼¼sessionçš„æ•ˆæœã€‚ list listæ•°æ®ç»“æ„ï¼Œå¯ä»¥åšç®€å•çš„æ¶ˆæ¯é˜Ÿåˆ—çš„åŠŸèƒ½ã€‚å¦å¤–ä¸€ä¸ªæ˜¯ï¼Œå¯ä»¥åˆ©ç”¨lrangeå‘½ä»¤ï¼ŒåšåŸºäºredisçš„åˆ†é¡µåŠŸèƒ½ï¼ˆlrange mylist 0 10ï¼‰ï¼Œæ€§èƒ½æä½³ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå¥½ã€‚ set setæ•°æ®ç»“æ„å­˜æ”¾çš„æ˜¯ä¸€å †ä¸é‡å¤çš„é›†åˆã€‚æ‰€ä»¥å¯ä»¥åšå…¨å±€å»é‡çš„åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨äº¤é›†ã€å¹¶é›†ã€å·®é›†ç­‰æ“ä½œï¼Œå¯ä»¥è®¡ç®—å…±åŒå–œå¥½ï¼Œå…¨éƒ¨å–œå¥½ï¼Œè‡ªå·±ç‹¬æœ‰å–œå¥½ç­‰åŠŸèƒ½ã€‚ sorted set sorted setå¤šäº†ä¸€ä¸ªæƒé‡å‚æ•°scoreï¼Œé›†åˆä¸­çš„å…ƒç´ èƒ½å¤ŸæŒ‰ç…§scoreè¿›è¡Œæ’åˆ—ã€‚å¯ä»¥åšæ’è¡Œæ¦œåº”ç”¨ï¼Œå–TOP Næ“ä½œï¼Œå»¶æ—¶ä»»åŠ¡ï¼ŒèŒƒå›´æŸ¥æ‰¾ã€‚ 5ã€ redisçš„è¿‡æœŸç­–ç•¥ä»¥åŠå†…å­˜æ·˜æ±°æœºåˆ¶åˆ†æï¼šå‡å¦‚redisåªèƒ½å­˜ 5G æ•°æ®é‡ï¼Œå†™å…¥äº† 10G çš„æ•°æ®ï¼Œå°±ä¼šåˆ é™¤ 5G æ•°æ®ï¼Œæ€ä¹ˆåˆ é™¤ï¼ŒæŒ‰ç…§ä»€ä¹ˆç­–ç•¥åˆ é™¤ã€‚ redis é‡‡ç”¨ å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤ç­–ç•¥ ä¸ºä»€ä¹ˆä¸ç”¨å®šæ—¶åˆ é™¤ç­–ç•¥ å®šæ—¶åˆ é™¤ï¼Œç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥è´Ÿè´£ç›‘è§† keyï¼Œè¿‡æœŸåˆ™è‡ªåŠ¨åˆ é™¤ã€‚è™½ç„¶å†…å­˜åŠæ—¶é‡Šæ”¾ï¼Œä½†æ˜¯ååˆ†æ¶ˆè€— CPU èµ„æºã€‚åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒCPU åº”è¯¥å°†æ—¶é—´åº”ç”¨åœ¨å¤„ç†è¯·æ±‚ä¸Šï¼Œè€Œä¸æ˜¯åˆ é™¤ keyï¼Œå› æ­¤ä¸é‡‡ç”¨è¿™ä¸€ç§ç­–ç•¥ã€‚ å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ å®šæœŸåˆ é™¤ï¼Œredis é»˜è®¤æ¯éš”100msæ£€æŸ¥æ˜¯å¦æœ‰è¿‡æœŸçš„keyï¼Œæœ‰è¿‡æœŸçš„keyç›´æ¥åˆ é™¤ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œredisä¸æ˜¯æ¯éš”100mså°†æ‰€æœ‰çš„keyæ£€æŸ¥ä¸€æ¬¡ï¼Œè€Œæ˜¯éšæœºæŠ½å–è¿›è¡Œæ£€æŸ¥ï¼ˆå¦‚æœæ¯éš”100mså°†æ‰€æœ‰çš„keyæ£€æŸ¥ä¸€æ¬¡ï¼Œredisåº”è¯¥å·²ç»çˆ†ç‚¸ğŸ’¥äº†ï¼‰ï¼Œå› æ­¤å¦‚æœåªé‡‡å–å®šæœŸåˆ é™¤ç­–ç•¥ï¼Œä¼šå¯¼è‡´å¾ˆå¤šè¿‡æœŸçš„keyæ²¡æœ‰è¢«åˆ é™¤ã€‚äºæ˜¯ï¼Œæƒ°æ€§åˆ é™¤æ´¾ä¸Šç”¨åœºäº†ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä½ è·å–æŸä¸ªkeyçš„æ—¶å€™ï¼Œredisä¼šæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™ä¸ªkeyå¦‚æœè®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œé‚£ä¹ˆæ˜¯å¦è¿‡æœŸäº†ï¼Ÿå¦‚æœè¿‡æœŸæ­¤æ—¶å°±ä¼šè¢«åˆ é™¤ã€‚ï¼ˆæ„Ÿè§‰å°±æ˜¯ä¸€æ³¢äº¡ç¾Šè¡¥ç‰¢çš„æ“ä½œï¼Œä¸è¿‡èƒ½è¿™æ ·è¿˜æ˜¯æŒº NB çš„ï¼‰ é‡‡ç”¨å®šæœŸåˆ é™¤+æƒ°æ€§åˆ é™¤å°±æ²¡å…¶ä»–é—®é¢˜äº†ï¼Ÿï¼Ÿï¼Ÿ ä¸æ˜¯çš„ï¼ï¼Œå¦‚æœå®šæœŸåˆ é™¤æ²¡æœ‰åˆ é™¤keyã€‚ç„¶åä½ ä¹Ÿæ²¡æœ‰å»getè¿™ä¸ªkeyï¼Œä¹Ÿå°±æ˜¯è¯´æƒ°æ€§åˆ é™¤æ²¡æœ‰ç”Ÿæ•ˆã€‚è¿™æ ·ï¼Œredisçš„å†…å­˜å ç”¨ä¼šè¶Šæ¥è¶Šå¤§ã€‚æ­¤æ—¶å°±åº”è¯¥é‡‡ç”¨å†…å­˜æ·˜æ±°æœºåˆ¶ã€‚ åœ¨reids.confä¸­æœ‰ä¸€è¡Œé…ç½®ï¼š 1# maxmemory-policy volatile-lru è¿™ä¸ªé…ç½®å°±æ˜¯å†…å­˜æ·˜æ±°ç­–ç•¥ï¼Œä¸€ä¸‹æ˜¯å‡ ç§æ·˜æ±°ç­–ç•¥ï¼Œè§£æä¸€ä¸‹ï¼š noevictionï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥çš„æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ã€‚è¿™ä¸ªåº”è¯¥æ²¡äººç”¨å§ğŸ˜‚ allkeys-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥çš„æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼ˆleast recently usedï¼‰ã€‚æ¨èä½¿ç”¨è¿™ä¸€ç§ç­–ç•¥ã€‚ volatile-lruï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyã€‚è¿™ç§æƒ…å†µä¸€èˆ¬æ˜¯æŠŠ redis æ—¢å½“ç¼“å­˜ï¼ŒåˆåšæŒä¹…åŒ–å­˜å‚¨çš„æ—¶å€™é‡‡ç”¨ã€‚ä¸æ¨è volatile-randomï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œéšæœºç§»é™¤æŸä¸ªkeyã€‚ä¾ç„¶ä¸æ¨è //TODO why volatile-ttlï¼šå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„é”®ç©ºé—´ä¸­ï¼Œæœ‰æ›´æ—©è¿‡æœŸæ—¶é—´çš„keyä¼˜å…ˆç§»é™¤ã€‚ä¸æ¨èã€‚ å¦‚æœæ²¡æœ‰è®¾ç½®expireçš„keyï¼Œä¸æ»¡è¶³å…ˆå†³æ¡ä»¶prerequisitesï¼›é‚£ä¹ˆvolatile-lruï¼Œvolatile-randomå’Œvolatile-ttlç­–ç•¥çš„è¡Œä¸ºå’Œnoevictionï¼ˆä¸åˆ é™¤ï¼‰åŸºæœ¬ä¸€è‡´ã€‚ 6ã€redis å’Œæ•°æ®åº“åŒå†™ä¸€è‡´æ€§é—®é¢˜åˆ†æï¼šä¸€è‡´æ€§é—®é¢˜æ˜¯åˆ†å¸ƒå¼å¸¸è§çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥åˆ†ä¸ºæœ€ç»ˆä¸€è‡´æ€§å’Œå¼ºä¸€è‡´æ€§ã€‚æ•°æ®åº“å’Œç¼“å­˜åŒå†™ï¼Œå°±å¿…ç„¶ä¼šå­˜åœ¨ä¸ä¸€è‡´é—®é¢˜ã€‚æ³¨æ„ï¼šæœ‰ä¸€ä¸ªå‰æï¼Œå¦‚æœå¯¹æ•°æ®æœ‰å¼ºä¸€è‡´æ€§è¦æ±‚ï¼Œæ•°æ®å°±ä¸èƒ½å­˜æ”¾åœ¨ç¼“å­˜ã€‚æˆ‘ä»¬æ‰€åšçš„ä¸€åˆ‡åªèƒ½ä¿è¯æœ€ç»ˆä¸€è‡´æ€§ã€‚å¦å¤–ï¼Œæˆ‘ä»¬æ‰€åšçš„æ–¹æ¡ˆä»æ ¹æœ¬ä¸Šæ¥è¯´ï¼Œåªèƒ½é™ä½ä¸ä¸€è‡´å‘ç”Ÿçš„æ¦‚ç‡ï¼Œæ— æ³•å®Œå…¨é¿å…ã€‚å› æ­¤ï¼Œæœ‰å¼ºä¸€è‡´æ€§è¦æ±‚çš„æ•°æ®ï¼Œä¸èƒ½æ”¾ç¼“å­˜ã€‚ 1é¦–å…ˆï¼Œé‡‡å–æ­£ç¡®çš„æ›´æ–°ç­–ç•¥ï¼Œå…ˆæ›´æ–°æ•°æ®åº“ï¼Œå†åˆ é™¤ç¼“å­˜ã€‚å…¶æ¬¡ï¼Œå› ä¸ºå¯èƒ½å­˜åœ¨ç¼“å­˜åˆ é™¤å¤±è´¥çš„é—®é¢˜ï¼Œæä¾›ä¸€ä¸ªè¡¥å¿æªæ–½å³å¯ï¼Œä¾‹å¦‚åˆ©ç”¨æ¶ˆæ¯é˜Ÿåˆ—ã€‚ 7ã€å¦‚ä½•åº”å¯¹ç¼“å­˜ç©¿é€å’Œç¼“å­˜é›ªå´©é—®é¢˜åˆ†æï¼šè¿™ä¸ªé—®é¢˜ï¼Œä¸€ç‰ˆé«˜å¹¶å‘çš„é¡¹ç›®å¯èƒ½ä¼šé‡åˆ°ï¼Œæµé‡å‡ ç™¾ä¸‡å·¦å³ã€‚ ç¼“å­˜ç©¿é€ æœ‰äººæ•…æ„å»è¯·æ±‚ç¼“å­˜ä¸­ä¸å­˜åœ¨çš„æ•°æ®ï¼Œå¯¼è‡´æ‰€æœ‰çš„è¯·æ±‚æ€¼åˆ°æ•°æ®åº“ä¸Šï¼Œä»è€Œæ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚ è§£å†³æ–¹æ¡ˆï¼š 1ã€åˆ©ç”¨äº’æ–¥é”ï¼Œç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œå…ˆå»è·å¾—é”ï¼Œå¾—åˆ°é”ä¹‹åï¼Œå†å»è¯·æ±‚æ•°æ®åº“ã€‚æ²¡å¾—åˆ°é”ï¼Œåˆ™ä¼‘çœ ä¸€ç«¯æ—¶é—´é‡è¯•ã€‚ 2ã€é‡‡ç”¨å¼‚æ­¥æ›´æ–°ç­–ç•¥ï¼Œæ— è®ºæ˜¯keyæ˜¯å¦å–åˆ°å€¼ï¼Œéƒ½ç›´æ¥è¿”å›ã€‚valueå€¼ä¸­ç»´æŠ¤ä¸€ä¸ªç¼“å­˜å¤±æ•ˆæ—¶é—´ï¼Œç¼“å­˜å¦‚æœè¿‡æœŸï¼Œå°±å¼‚æ­¥èµ·ä¸€ä¸ªçº¿ç¨‹å»è¯»æ•°æ®åº“ï¼Œæ›´æ–°ç¼“å­˜ã€‚è¿™ä¸ªæ–¹æ¡ˆï¼Œéœ€è¦åšç¼“å­˜é¢„çƒ­ï¼ˆç¾¡æ…•å¯åŠ¨å‰ï¼Œå…ˆé¢„åŠ è½½ç¼“å­˜ï¼‰æ“ä½œã€‚ 3ã€æä¾›ä¸€ä¸ªèƒ½è¿…é€Ÿåˆ¤æ–­è¯·æ±‚æ˜¯å¦æœ‰æ•ˆçš„æ‹¦æˆªæœºåˆ¶ã€‚æ¯”å¦‚ï¼Œåˆ©ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆbloom filterï¼‰ï¼Œå†…éƒ¨ç»´æŠ¤ä¸€ç³»åˆ—åˆæ³•æœ‰æ•ˆçš„keyã€‚è¿…é€Ÿåˆ¤æ–­å‡ºï¼Œè¯·æ±‚æ‰€æºå¸¦çš„keyæ˜¯å¦åˆæ³•æœ‰æ•ˆã€‚å¦‚æœä¸åˆæ³•ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚ ç¼“å­˜é›ªå´© ç¼“å­˜åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œè¿™ä¸ªæ—¶å€™åˆæ¥äº†ä¸€æ³¢è¯·æ±‚ï¼Œç»“æœè¯·æ±‚éƒ½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œä»è€Œå¯¼è‡´æ•°æ®åº“è¿æ¥å¼‚å¸¸ã€‚ è§£å†³æ–¹æ¡ˆï¼š 1ã€ç»™ç¼“å­˜çš„å¤±æ•ˆæ—¶é—´ï¼ŒåŠ ä¸Šä¸€ä¸ªéšæœºå€¼ï¼Œé¿å…é›†ä½“å¤±æ•ˆã€‚ 2ã€ä½¿ç”¨äº’æ–¥é”ï¼Œä½†æ˜¯ååé‡æ˜æ˜¾ä¸‹é™äº†ã€‚ 3ã€ä½¿ç”¨åŒç¼“å­˜ï¼Œä¸¤ä¸ªç¼“å­˜ï¼ŒAï¼ŒBã€‚ç¼“å­˜ A çš„å¤±æ•ˆæ—¶é—´æ˜¯20åˆ†é’Ÿï¼Œç¼“å­˜ B ä¸è®¾å¤±æ•ˆæ—¶é—´ã€‚è‡ªå·±åšç¼“å­˜é¢„çƒ­æ“ä½œã€‚ç„¶åç»†åˆ†ä¸€ä¸‹å‡ ä¸ªå°ç‚¹ï¼š ä»ç¼“å­˜ A è¯»æ•°æ®åº“ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ã€‚ A æ²¡æœ‰è¯»åˆ°æ•°æ®ï¼Œç›´æ¥ä» B è¯»æ•°æ®ï¼Œæœ‰åˆ™ç›´æ¥è¿”å›ï¼Œå¹¶å¼‚æ­¥å¯åŠ¨ä¸€ä¸ªæ›´æ–°çº¿ç¨‹ã€‚ æ›´æ–°çº¿ç¨‹åŒæ—¶æ›´æ–°ç¼“å­˜ A å’Œç¼“å­˜ Bã€‚ 8ã€å¦‚ä½•è§£å†³ Redis çš„å¹¶å‘ç«äº‰é—®é¢˜åˆ†æï¼šè¿™ä¸ªé—®é¢˜å¤§è‡´å°±æ˜¯ï¼ŒåŒæ—¶åˆå¤šä¸ªå­ç³»ç»Ÿå»setä¸€ä¸ªkeyã€‚ä¸€èˆ¬å¾ˆå¤šå›ç­”æ˜¯ä½¿ç”¨redisçš„äº‹åŠ¡æœºåˆ¶ã€‚ä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒï¼Œä¸€èˆ¬éƒ½æ˜¯redisé›†ç¾¤ç¯å¢ƒï¼Œåšäº†æ•°æ®åˆ†ç‰‡æ“ä½œã€‚ä½ ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰æ¶‰åŠåˆ°å¤šä¸ªkeyæ“ä½œçš„æ—¶å€™ï¼Œè¿™ä¸ªkeyä¸ä¸€å®šéƒ½å­˜å‚¨åœ¨åŒä¸€ä¸ªredis-serverä¸Šã€‚å› æ­¤ï¼Œredis çš„äº‹åŠ¡æœºåˆ¶ï¼Œæœ‰ç‚¹é¸¡è‚‹ã€‚ï¼ˆ// TODOï¼‰ å¦‚ä¸‹æ‰€ç¤ºï¼š 1ã€å¦‚æœè¿™ä¸ªkeyæ“ä½œï¼Œä¸è¦æ±‚é¡ºåºï¼Œå¯ä»¥å‡†å¤‡ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œå¤§å®¶å»æŠ¢é”ï¼ŒæŠ¢åˆ°äº†é”å°±åšsetæ“ä½œå³å¯ã€‚ 2ã€å¦‚æœè¿™ä¸ªkeyæ“ä½œï¼Œè¦æ±‚é¡ºåºï¼Œå‡è®¾æœ‰ä¸€ä¸ªkey1ï¼Œç³»ç»Ÿ A éœ€è¦å°†key1è®¾ç½®ä¸ºvalueAï¼Œç³»ç»Ÿ B éœ€è¦å°† key1è®¾ç½®ä¸ºvalueBï¼Œç³»ç»Ÿ C éœ€è¦å°†key1è®¾ç½®ä¸ºvalueCã€‚ æˆ‘ä»¬æœŸæœ›æŒ‰ç…§key1çš„valueå€¼æŒ‰ç…§valueAâ€“&gt;valueBâ€“&gt;valueCçš„é¡ºåºå˜åŒ–ã€‚è¿™æ—¶å€™æˆ‘ä»¬åœ¨å†™å…¥æ•°æ®åº“çš„æ—¶å€™ï¼Œå°±éœ€è¦ä¿å­˜ä¸€ä¸ªæ—¶é—´æˆ³ã€‚å‡è®¾æ—¶é—´æˆ³å¦‚ä¸‹ï¼š 123ç³»ç»ŸA key1 &#123;valueA 3:00&#125;ç³»ç»ŸB key1 &#123;valueB 3:05&#125;ç³»ç»ŸC key1 &#123;valueC 3:10&#125; é‚£ä¹ˆæ ¹æ®ä¸Šè¿°ï¼Œå‡è®¾æ˜¯ç³»ç»Ÿ B å…ˆæŠ¢åˆ°é”ï¼Œå°†key1è®¾ç½®ä¸º{valueB 3:05}ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œå¦‚æœ A æŠ¢åˆ°é”ï¼Œå‘ç°è‡ªå·±çš„valueAçš„æ—¶é—´æˆ³æ—©äºç¼“å­˜ä¸­çš„æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆä¹…ä¸åšsetæ“ä½œäº†ã€‚ å…¶ä»–æ–¹æ³•ï¼Œå¦‚åˆ©ç”¨é˜Ÿåˆ—ï¼Œå°†setæ–¹æ³•å˜æˆä¸²è¡Œè®¿é—®ä¹Ÿå¯ä»¥ã€‚ æœ¬æ–‡å‡ºå¤„å­¤ç‹¬çƒŸï¼Œä¸ªäººåªæ˜¯ä¸€å­—ä¸€å­—çš„è§£è¯»ï¼Œç†è§£å‰è¾ˆæ€»ç»“çš„ç»éªŒã€‚æˆ‘è®¤ä¸ºåªæ˜¯å¤§è‡´æµè§ˆä¸€ç¯‡åšæ–‡ï¼Œçœ‹ä¸€ç¯‡å…¬ä¼—å·æ•´ç†çš„å¹²è´§æ–‡ç« ï¼Œæ˜¯æ²¡æœ‰ç”¨çš„ï¼Œè¿˜æ˜¯è¦å¤šç†è§£ï¼Œå¤šå®è·µï¼ŒåŠ æ·±è®°å¿†ï¼Œæ‰èƒ½æ·±åˆ»ï¼Œæ¶“æ¶“ç»†æµï¼Œæ²äººå¿ƒè„¾ï¼Œå¼ºåŠ²å£®éª¨ã€‚è¿™ç§æ–¹å¼åªæ˜¯æˆ‘ä¸ªäººçš„å­¦ä¹ æ–¹å¼ï¼Œå¯èƒ½æ¯”è¾ƒç¬¨é‡ï¼Œæ¯”è¾ƒæ…¢ï¼Œä½†å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå†™åšå®¢çš„åŸå› ã€‚æœ‰å¹¸","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Redis","slug":"Code/Redis","permalink":"http://xiaoqinghua.site/categories/Code/Redis/"}],"tags":[{"name":"Redis","slug":"Redis","permalink":"http://xiaoqinghua.site/tags/Redis/"}]},{"title":"iterm2 å°æŠ€å·§","slug":"iterm2å°æŠ€å·§","date":"2017-03-12T06:47:35.000Z","updated":"2018-08-24T07:44:19.096Z","comments":true,"path":"iterm2å°æŠ€å·§.html","link":"","permalink":"http://xiaoqinghua.site/iterm2å°æŠ€å·§.html","excerpt":"","text":"iterm2 å°æŠ€å·§æ ‡ç­¾1234- æ–°å»ºæ ‡ç­¾ï¼šcommand + t- å…³é—­æ ‡ç­¾ï¼šcommand + w- åˆ‡æ¢æ ‡ç­¾ï¼šcommand + æ•°å­— æˆ–è€…command + æ–¹å‘é”®- åˆ‡æ¢å…¨å±ï¼šcommand + enter åˆ†å±1234- å‚ç›´åˆ†å± command + d- æ°´å¹³åˆ†å± command + shift + d- æŸ¥çœ‹å†å²å‘½ä»¤ command + ;- æŸ¥çœ‹å‰ªç²˜æ¿å†å² command + shift + h å…¶ä»–1234567891011- æ¸…é™¤å½“å‰è¡Œ ctrl + u- åˆ°è¡Œé¦– ctrl + a- åˆ°è¡Œå°¾ ctrl + e- æœç´¢å†å²å‘½ä»¤ ctrl + r- åˆ é™¤å½“å‰å…‰æ ‡çš„å­—ç¬¦ ctrl + d- åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å­—ç¬¦ ctrl + h- åˆ é™¤å…‰æ ‡ä¹‹å‰çš„å•è¯ ctrl + w- åˆ é™¤åˆ°æ–‡æœ¬æœ«å°¾ ctrl + k- äº¤æ¢å…‰æ ‡å¤„å­—ç¬¦ ctrl + t- æ¸…å± command + r- command + f æ‰€é€‰ä¸­çš„å†…å®¹ä¼šè¢«è‡ªåŠ¨å¤åˆ¶ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"Iterm2","slug":"Code/Iterm2","permalink":"http://xiaoqinghua.site/categories/Code/Iterm2/"}],"tags":[{"name":"Iterm2","slug":"Iterm2","permalink":"http://xiaoqinghua.site/tags/Iterm2/"}]},{"title":"ç™½å¤œè¡Œ","slug":"ç™½å¤œè¡Œ","date":"2016-11-14T12:06:59.000Z","updated":"2018-08-18T04:52:34.510Z","comments":true,"path":"ç™½å¤œè¡Œ.html","link":"","permalink":"http://xiaoqinghua.site/ç™½å¤œè¡Œ.html","excerpt":"","text":"ç™½å¤œè¡Œä¸–ç•Œä¸Šæœ‰ä¸¤æ ·ä¸œè¥¿ä¸èƒ½ç›´è§†ï¼Œä¸€æ˜¯å¤ªé˜³ï¼ŒäºŒæ˜¯äººå¿ƒã€‚ æˆ‘çš„å¤©ç©ºé‡Œæ²¡æœ‰å¤ªé˜³ï¼Œæ€»æ˜¯é»‘å¤œï¼Œä½†å¹¶ä¸æš—ï¼Œå› ä¸ºæœ‰ä¸œè¥¿ä»£æ›¿äº†å¤ªé˜³ã€‚è™½ç„¶æ²¡æœ‰å¤ªé˜³é‚£ä¹ˆæ˜äº®ï¼Œä½†å¯¹æˆ‘æ¥è¯´å·²ç»è¶³å¤Ÿã€‚å‡­å€Ÿè¿™ä»½å…‰ï¼Œæˆ‘ä¾¿èƒ½æŠŠé»‘å¤œå½“æˆç™½å¤©ã€‚æˆ‘ä»æ¥å°±æ²¡æœ‰å¤ªé˜³ï¼Œæ‰€ä»¥ä¸æ€•å¤±å»ã€‚ æ›¾ç»æ‹¥æœ‰çš„ä¸œè¥¿è¢«å¤ºèµ°ï¼Œå¹¶ä¸ä»£è¡¨å°±ä¼šå›åˆ°åŸæ¥æ²¡æœ‰é‚£ç§ä¸œè¥¿çš„æ—¶å€™ã€‚ ä¸€å¤©ä¸­ï¼Œå¤ªé˜³ä¼šå‡èµ·ï¼ŒåŒæ—¶è¿˜ä¼šè½ä¸‹ã€‚äººç”Ÿä¹Ÿä¸€æ ·ï¼Œæœ‰ç™½å¤©å’Œé»‘å¤œï¼Œåªæ˜¯ä¸ä¼šåƒå¤ªé˜³é‚£æ ·ï¼Œæœ‰å®šæ—¶çš„æ—¥å‡ºå’Œæ—¥è½ã€‚æœ‰äº›äººä¸€è¾ˆå­éƒ½æ´»åœ¨å¤ªé˜³çš„ç…§è€€ä¸‹ï¼Œæœ‰äº›äººä¸å¾—ä¸ä¸€ç›´æ´»åœ¨æ¼†é»‘çš„æ·±å¤œé‡Œã€‚äººå®³æ€•çš„ï¼Œå°±æ˜¯æœ¬æ¥ä¸€ç›´å­˜åœ¨çš„å¤ªé˜³è½ä¸‹ä¸å†å‡èµ·ï¼Œä¹Ÿå°±æ˜¯éå¸¸å®³æ€•åŸæœ¬ç…§åœ¨è‡ªå·±èº«ä¸Šçš„å…‰èŠ’æ¶ˆå¤±ã€‚ ä¸€ä¸ªæŠŠå¹³ç­‰ç½®äºè‡ªç”±æ™ºå•†çš„ç¤¾ä¼šä¸¤è€…éƒ½å¾—ä¸åˆ°ã€‚ä¸€ä¸ªæŠŠè‡ªç”±ç½®äºå¹³ç­‰ä¹‹ä¸Šçš„ç¤¾ä¼šï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥ä¸¤è€…å…¼å¾—ã€‚ åªæœ‰åœ¨ä¸€ä¸ªæ–¹é¢ï¼Œè”é‚¦å‚¨å¤‡ä½“ç³»å§‹ç»ˆå¦‚ä¸€ã€‚è¿™è¾¹æ˜¯ï¼Œä»–æŠŠæ‰€æœ‰é—®é¢˜éƒ½å½’å’äºè¶…å‡ºè‡ªå·±æ§åˆ¶èƒ½åŠ›çš„å¤–éƒ¨å½±å“ï¼Œè€ŒæŠŠæ‰€æœ‰åˆæ„çš„ç»“æœéƒ½å½’åŠŸäºè‡ªå·±ã€‚ç”±æ­¤ä»–ç»§ç»­ç»´æŒç€é‚£ä¸ªè°¬ä¼ ï¼Œè¯´ç§äººç»æµæ˜¯ä¸ç¨³å®šçš„ï¼›è€Œä»–çš„æ‰€ä½œæ‰€ä¸ºå´ä¸æ–­è¯æ˜äº†è¿™ä¸€äº‹å®å³æ”¿åºœæ‰æ˜¯å¯¼è‡´ä»Šå¤©ç»æµä¸ç¨³å®šçš„ä¸»è¦æ ¹æºã€‚ å…¬ä¼—å’Œç»æµå­¦å®¶è§‚å¿µçš„æ”¹å˜ï¼Œå‡æºè‡ªå¯¹å®é™…æƒ…å†µçš„è¯¯è§£ã€‚å½“æ—¶åªæœ‰å°‘æ•°äººçŸ¥é“ï¼Œè€Œæˆ‘ä»¬ç°åœ¨éƒ½çŸ¥é“ï¼Œå¤§è§æ¡å¹¶éæ˜¯ç§æœ‰åˆ¶ä¼ä¸šå¤±è´¥æ‰€å¯¼è‡´è€Œæ˜¯å› ä¸ºæ”¿åºœå¹¶æœªæˆåŠŸå±¥è¡Œå®ƒè¢«èµ‹äºˆçš„è´£ä»»ã€‚è¿™äº›è´£ä»»ç”¨ã€Šåˆä¼—å›½å®ªæ³•ã€‹ç¬¬ä¸€å¤©ç¬¬å…«æ¬¾çš„è¯æ¥è¯´ï¼Œä¾¿æ˜¯â€œé“¸é€ è´§å¸ï¼Œè°ƒèŠ‚å…¶ä»·å€¼ï¼Œå¹¶å˜å®šå¤–å¸ä»·å€¼â€ã€‚ä¸å¹¸çš„æ˜¯ï¼Œåœ¨ç¬¬ä¹ç« æˆ‘ä»¬å°†çœ‹åˆ°ï¼Œæ”¿åºœåœ¨ç®¡ç†è´§å¸æ–¹é¢çš„å¤±è´¥ä¸ä»…æ˜¯å†å²ä¸Šçš„ä¸€æ¡©æ€ªäº‹ï¼Œè€Œä¸”ä»»æ˜¯ä»Šæ—¥ä¹‹äº‹å®ã€‚ æ²¡æœ‰ä»€ä¹ˆæ¯”æ—¶é—´æ›´æœ‰è¯´æœåŠ›äº†ï¼Œå› ä¸ºæ—¶é—´æ— éœ€é€šçŸ¥æˆ‘ä»¬å°±å¯ä»¥æ”¹å˜ä¸€åˆ‡ã€‚ æœ€åˆæˆ‘ä»¬æ¥åˆ°è¿™ä¸ªä¸–ç•Œä¸Šæ˜¯å› ä¸ºä¸å¾—ä¸æ¥çš„ã€‚æœ€ç»ˆæˆ‘ä»¬ç¦»å¼€è¿™ä¸ªä¸–ç•Œï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸å¾—ä¸èµ°ã€‚ ä»¥ç¬‘çš„æ–¹å¼å“­ï¼Œåœ¨æ­»äº¡çš„ä¼´éšä¸‹æ´»ç€ã€‚ ä½œä¸ºä¸€ä¸ªè¯è¯­ï¼Œâ€œæ´»ç€â€åœ¨æˆ‘ä»¬ä¸­å›½çš„è¯­è¨€é‡Œå……æ»¡äº†åŠ›é‡ï¼Œå®ƒçš„åŠ›é‡ä¸æ˜¯æ¥è‡ªäºå–Šå«ï¼Œä¹Ÿä¸æ˜¯æ¥è‡ªäºè¿›æ”»ï¼Œè€Œæ˜¯å¿å—ï¼Œå»å¿å—ç”Ÿå‘½èµ‹äºˆæˆ‘ä»¬çš„è´£ä»»ï¼Œå»å¿å—ç°å®ç»™æˆ‘ä»¬çš„å¹¸ç¦å’Œè‹¦éš¾ï¼Œæ— èŠå’Œå¹³åº¸ã€‚ åšäººä¸èƒ½å¿˜è®°å››æ¡ï¼Œè¯ä¸è¦è¯´é”™ï¼ŒåºŠä¸è¦ç¡é”™ï¼Œé—¨æ§›ä¸è¦è¸é”™ï¼Œå£è¢‹ä¸è¦æ‘¸é”™ã€‚ äººæ˜¯ä¸ºæ´»ç€æœ¬èº«è€Œæ´»ç€ï¼Œä¸æ˜¯ä¸ºäº†æ´»ç€ä¹‹å¤–çš„ä»»ä½•äº‹ç‰©æ‰€æ´»ç€ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]},{"title":"å½±å“åŠ›","slug":"å½±å“åŠ›","date":"2016-10-27T13:35:02.000Z","updated":"2018-08-18T04:52:26.982Z","comments":true,"path":"å½±å“åŠ›.html","link":"","permalink":"http://xiaoqinghua.site/å½±å“åŠ›.html","excerpt":"","text":"å½±å“åŠ›è¶Šå–œæ¬¢ä¸€ä¸ªäººï¼Œå—è¿™ä¸ªäººçš„å½±å“è¶Šå¤§ã€‚ ä¸€æ ·åŸæœ¬æ²¡æœ‰ä»€ä¹ˆå¸å¼•åŠ›çš„ä¸œè¥¿ï¼Œçªç„¶é—´å˜å¾—å¾ˆæœ‰è¯±æƒ‘åŠ›ï¼Œå°±å› ä¸ºå¾ˆå¿«ä½ å°±å¾—ä¸åˆ°å®ƒäº†ã€‚ åœ¨æ¥å—äº†åˆ«äººçš„å¥½å¤„ä¹‹åï¼Œäººä»¬å¾ˆäº²ä¾å°±ä¼šç­”åº”ä¸€ä¸ªåœ¨æ²¡æœ‰è´Ÿå€ºå¿ƒé‡Œæ—¶ä¸€å®šä¼šæ‹’ç»çš„è¯·æ±‚ã€‚å³ä¾¿æ˜¯ä¸€ä¸ªä¸è¯·è‡ªæ¥çš„å¥½å¤„ï¼Œä¸€æ—¦è¢«æ¥æ”¶ï¼Œä¹Ÿä¼šåˆ¶é€ å‡ºä¸€ç§è´Ÿå€ºæ„Ÿã€‚ å½“æˆ‘ä»¬å¯¹è‡ªå·±ç¼ºä¹ä¿¡å¿ƒæ—¶ï¼Œå½“å½¢å¼å˜å¾—ä¸å¾ˆæ˜æœ—æ—¶ï¼Œå½“ä¸ç¡®å®šå äº†ä¸Šé£æ—¶ï¼Œæˆ‘ä»¬æœ€æœ‰å¯èƒ½ä»¥åˆ«äººçš„è¡Œä¸ºä½œä¸ºè‡ªå·±è¡ŒåŠ¨çš„å‚ç…§ã€‚ä¸æˆ‘ä»¬ç±»ä¼¼çš„äººçš„è¡Œä¸ºå¯¹æˆ‘ä»¬æœ€æœ‰å½±å“åŠ›ã€‚ ä¸€æ—¦æˆ‘ä»¬åšäº†ä¸€ä¸ªå†³å®šï¼Œæˆ–é€‰æ‹©äº†ä¸€ç§ç«‹åœºï¼Œå°±ä¼šæœ‰å‘è‡ªå†…å¿ƒä»¥åŠæ¥è‡ªå¤–éƒ¨çš„å‹åŠ›æ¥è¿«ä½¿æˆ‘ä»¬ä¸æ­¤ä¿æŒä¸€è‡´ã€‚åœ¨è¿™ç§å‹åŠ›ä¸‹ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›ä»¥å®é™…è¡ŒåŠ¨æ¥è¯æ˜æˆ‘ä»¬ä»¥å‰çš„å†³å®šæ˜¯æ­£ç¡®çš„ã€‚ cazhulafu brotherä¸Šå¸ä¸é­”é¬¼åœ¨é‚£é‡Œææ–—ï¼Œæˆ˜æ–—ä¾¿åœ¨äººä»¬å¿ƒä¸­ã€‚ åœ¨ç°å®ä¸»ä¹‰è€…èº«ä¸Šï¼Œå¹¶ä¸æ˜¯å¥‡è¿¹äº§ç”Ÿä¿¡ä»°ï¼Œè€Œæ˜¯ä¿¡ä»°äº§ç”Ÿå¥‡è¿¹ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œäººä»¬ï¼Œç”šè‡³æ¶äººï¼Œè¦æ¯”æˆ‘ä»¬æƒ³è±¡ä¸­çš„ä»–ä»¬å¹¼ç¨šçš„å¤šï¼Œå¤©çœŸçš„å¤šã€‚å…¶å®æˆ‘ä»¬ä¹Ÿä¸€æ ·ã€‚ å¯¹è‡ªå·±è¯´è°å’Œå¬è‡ªå·±è¯´è°çš„äººä¼šè½åˆ°è¿™æ ·çš„åœ°æ­¥ï¼šæ— è®ºåœ¨è‡ªå·±èº«ä¸Šè¿˜æ˜¯å‘¨å›´ï¼Œå³ä½¿æœ‰çœŸç†ï¼Œä»–ä¹Ÿæ— æ³•è¾¨åˆ«ï¼Œç»“æœå°†æ˜¯æ—¢ä¸è‡ªé‡ï¼Œä¹Ÿä¸å°Šé‡åˆ«äººã€‚ä¸€ä¸ªäººå¦‚æœå¯¹è°éƒ½ä¸å°Šé‡ï¼Œä¹Ÿå°±æ²¡æœ‰äº†çˆ±ï¼›åœ¨æ²¡æœ‰çˆ±çš„æƒ…å†µä¸‹æƒ³è¦æ¶ˆé£å–ä¹ï¼Œæ— éæ”¾çºµæƒ…æ¬²ï¼Œè€½äºåŸå§‹çš„æ„Ÿå®˜äº«å—ï¼Œåœ¨ç½ªæ¶çš„æ³¥æ½­ä¸­å®Œå…¨å •è½æˆç•œç±»ï¼Œè€Œä¸€åˆ‡éƒ½å§‹äºä¸æ–­çš„å¯¹äººå’Œå¯¹å·±è¯´è°ã€‚å¯¹è‡ªå·±è¯´è°çš„äººæœ€å®¹æ˜“æ€„æ°”ã€‚ ç”µå­æ¸¸æˆè®©äººä¸Šç˜¾çš„å…¨éƒ¨åŸå› åªæœ‰ä¸€ä¸ªã€‚åˆ›é€ ä¸€ä¸ªå±äºæˆ‘ä»¬è‡ªå·±çš„ä¸–ç•Œã€‚æˆ‘æƒ³ä¸å‡ºæœ‰ä»€ä¹ˆä¸œè¥¿æ¯”åšä¸€ä¸ªç¥æ›´èƒ½è®©äººä¸Šç˜¾çš„äº†ã€‚ äººä»¬éƒ½è¯´æ²¡æœ‰ä»€ä¹ˆèƒ½é€ƒè„±å†·åº“çš„çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹ï¼Œå®‡å®™çš„æœ€åå½’å®¿æ˜¯ä¸€ç‰‡çƒ­æ­»å¯‚ã€‚ä½†è¿™ä¸æ˜¯æ•…äº‹çš„å…¨éƒ¨ï¼Œå®‡å®™åœ¨æ²‰å¯‚çš„åŒäº‹ï¼Œä¹Ÿåœ¨çƒ­é—¹èµ·æ¥ï¼Œä»æ—§ç‰©ä¸­å¸¦æ¥æ–°ç”Ÿã€å¢åŠ å¤æ‚æ€§çš„æ–°å±‚æ¬¡ã€‚å®‡å®™å……æ»¡äº†æ— å°½çš„åˆ›é€ åŠ›ã€‚ç†µå’Œè¿›åŒ–ï¼Œä¸¤è€…å°±åƒä¸¤æ”¯æ—¶é—´ä¹‹çŸ¢ï¼Œä¸€å¤´æ‹–ç€æˆ‘ä»¬é€€å…¥æ— ç©·çš„é»‘æš—ï¼Œä¸€å¤´åœ¨æ‹‰æ‰¯æˆ‘ä»¬èµ°å‘æ°¸æ’çš„å…‰æ˜ã€‚ ç½‘ç»œæŠŠéšç§ä»é“å¾·é¢†åŸŸè½¬ç§»åˆ°äº†å¸‚åœºé¢†åŸŸâ€”â€”éšç§æˆäº†ä¸€ç§å•†å“ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]},{"title":"å°‘æœ‰äººèµ°çš„è·¯","slug":"å°‘æœ‰äººèµ°çš„è·¯","date":"2016-09-27T13:39:24.000Z","updated":"2018-08-18T04:52:23.081Z","comments":true,"path":"å°‘æœ‰äººèµ°çš„è·¯.html","link":"","permalink":"http://xiaoqinghua.site/å°‘æœ‰äººèµ°çš„è·¯.html","excerpt":"","text":"å°‘æœ‰äººèµ°çš„è·¯ä¸€è¾ˆå­çœŸçš„å¾ˆçŸ­ï¼Œè¿œæ²¡æœ‰æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆé•¿ï¼Œæ°¸è¿œçœŸçš„æ²¡æœ‰å¤šè¿œï¼Œæ‰€æœ‰ä¸å¦¨å¯¹çˆ±ä½ çš„å¥½ä¸€ç‚¹ï¼Œä¹Ÿå¯¹è‡ªå·±å¥½ä¸€ç‚¹ï¼Œä»Šå¤©æ˜¯ä½ çš„æ•ç•”äººï¼Œæ˜å¤©å°±å¯èƒ½æ˜¯ä½ çš„é™Œç”Ÿäººï¼Œå¦‚æœè¿™ä¸€è¾ˆå­æ¥ä¸åŠå¥½å¥½çˆ±ï¼Œå°±æ›´ä¸è¦æŒ‡æœ›ä¸‹è¾ˆå­è¿˜èƒ½é‡è§ã€‚ æƒ³è®©åˆ«äººçœŸæ­£çˆ±ä½ ï¼Œåªæœ‰è®©è‡ªå·±æˆä¸ºå€¼å¾—çˆ±çš„äººã€‚ æ‰¿å—ç—›è‹¦æ˜¯èµ°å‘æˆç†Ÿçš„å¿…ç»ä¹‹è·¯ï¼Œä»»ä½•äººéƒ½ä¸èƒ½å›é¿ã€‚ å¤§éƒ¨åˆ†çš„ææƒ§ä¸æ‡’æƒ°æœ‰å…³ï¼Œè¿™å¥è¯æˆ‘æ·±ä»¥ä¸ºç„¶ã€‚æˆ‘ä¹ˆå¸¸å¸¸ä¼šå®³æ€•æ”¹å˜ï¼Œå…¶å®éƒ½æ˜¯å› ä¸ºè‡ªå·±å¤ªæ‡’äº†ï¼Œæ‡’å¾—å»é€‚åº”æ–°ç¯å¢ƒï¼Œæ‡’å¾—å»å­¦ä¹ æ–°çŸ¥è¯†ï¼Œæ¶‰è¶³æ–°çš„é¢†åŸŸï¼Œä½†å¦‚æœæ€»æ˜¯è¿™æ ·çš„è¯ï¼Œå¦‚ä½•èƒ½è®©è‡ªå·±æˆç†Ÿèµ·æ¥å‘¢ï¼Ÿ å¤šæ•°äººè®¤ä¸ºå‹‡æ°”å°±æ˜¯ä¸å®³æ€•ã€‚ç°åœ¨è®©æˆ‘æ¥å‘Šè¯‰ä½ ï¼Œä¸å®³æ€•ä¸æ˜¯å‹‡æ°”ï¼Œå®ƒåªæ˜¯è„‘æŸä¼¤ã€‚å‹‡æ°”æ˜¯å°½ç®¡ä½ æ„Ÿè§‰å®³æ€•ï¼Œä½†ä»èƒ½è¿éš¾è€Œä¸Šï¼›å°½ç®¡ä½ æ„Ÿè§‰ç—›è‹¦ï¼Œä½†ä»èƒ½ç›´æ¥é¢å¯¹ã€‚ æ‰€è°“è‡ªå¾‹ï¼Œæ˜¯ä»¥ç§¯æè€Œä¸»åŠ¨åœ°æ€åº¦ï¼Œå»è§£å†³äººç”Ÿç—›è‹¦çš„é‡è¦åŸåˆ™ï¼Œä¸»è¦åŒ…æ‹¬å››ä¸ªæ–¹é¢ï¼šæ¨è¿Ÿæ»¡è¶³æ„Ÿã€æ‰¿æ‹…è´£ä»»ã€å°Šé‡äº‹å®ã€ä¿æŒå¹³è¡¡ã€‚ æœªæ¥ç®€å²æ›´é‡è¦çš„\bï¼Œå½“ä»¥å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½ä¸ºä»£è¡¨çš„ç§‘å­¦æŠ€æœ¯å‘å±•çš„æ—¥ç›Šæˆç†Ÿï¼Œäººç±»å°†é¢ä¸´ç€ä»è¿›åŒ–åˆ°æ™ºäººä»¥æ¥æœ€å¤§çš„ä¸€æ¬¡æ”¹å˜ï¼Œç»å¤§éƒ¨åˆ†äººå°†æ²¦ä¸ºâ€œæ— ä»·å€¼çš„ç¾¤ä½“â€ï¼Œåªæœ‰å°‘éƒ¨åˆ†äººèƒ½è¿›åŒ–æˆç‰¹è´¨å‘ç”Ÿæ”¹å˜çš„â€ç¥äººâ€ã€‚ æœªæ¥ï¼Œäººç±»å°†é¢ä¸´\bç€ä¸‰å¤§é—®é¢˜ï¼šç”Ÿç‰©æœ¬èº«å°±æ˜¯ç®—æ³•ï¼Œç”Ÿå‘½æ˜¯ä¸æ–­å¤„ç†æ•°æ®çš„è¿‡ç¨‹ï¼›æ„è¯†ä¸æ™ºèƒ½çš„åˆ†ç¦»ï¼›æ‹¥æœ‰å¤§æ•°æ®ç§¯ç´¯çš„å¤–éƒ¨ç¯å¢ƒå°†æ¯”æˆ‘ä»¬è‡ªå·±æ›´äº†è§£è‡ªå·±ã€‚å¦‚ä½•çœ‹å¾…è¿™ä¸‰å¤§é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•é‡‡å–åº”å¯¹æªæ–½ï¼Œå°†ç›´æ¥å½±å“ç€äººç±»æœªæ¥çš„å‘å±•ã€‚ å¤©æ‰åœ¨å·¦ï¼Œç–¯å­åœ¨å³æ—¶é—´æ˜¯ä¸æµé€çš„ï¼Œæµé€çš„æ˜¯æˆ‘ä»¬ã€‚ å“²å­¦å®¶ä¸ç–¯å­çš„åŒºåˆ«ï¼Œä¸€ä¸ªçŸ¥è¯†åœ¨æƒ³ï¼Œå¦ä¸€ä¸ªçœŸçš„å»åšäº†ã€‚ å­¤ç‹¬æ„Ÿæ—¶å¸¸ä½“ç°åœ¨ä¸€ç§çŸ›ç›¾ä¸Šï¼Œå°±æ˜¯ä½ ç»å¸¸å¤„äºä¸€ç§æŒ£æ‰çŠ¶æ€ï¼šæ—¢å¸Œæœ›åˆ«äººå…³å¿ƒã€ç®¡ä½è‡ªå·±ï¼Œåˆä¸çŸ¥é“è¯¥æ€ä¹ˆå»æ¥è§¦å’Œå›åº”åˆ«äººã€‚äºæ˜¯å¹²è„†ç›´æ¥æŠ—æ‹’ï¼Œç§‘å®¤éª¨å­é‡Œåˆæ˜¯é‚£ä¹ˆçš„æ¸´æœ›è¢«äº†è§£å’Œå…³æ³¨ï¼Œè€Œä¸”çŸ›ç›¾åˆ°å˜´é‡Œè¯´å‡ºæ¥çš„å’Œå¿ƒé‡Œæƒ³çš„å®Œå…¨ç›¸åã€‚ åªæœ‰å½“ä½ è®¤çœŸçš„å»åšä¸€ä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œæ‰ä¼šå‘ç°è‡ªå·±çš„çµé­‚å’Œçµé­‚æ·±å¤„ã€‚ å¦‚æœæœ‰ä¸€å¤©ä½ çœ‹åˆ°æˆ‘ç–¯äº†ï¼Œå…¶å®æ˜¯ä½ ç–¯äº†ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]},{"title":"Mysqlå­˜å‚¨IPåœ°å€ç»†èŠ‚","slug":"Mysqlå­˜å‚¨IPåœ°å€ç»†èŠ‚","date":"2016-08-20T03:58:41.000Z","updated":"2018-08-24T07:42:51.279Z","comments":true,"path":"Mysqlå­˜å‚¨IPåœ°å€ç»†èŠ‚.html","link":"","permalink":"http://xiaoqinghua.site/Mysqlå­˜å‚¨IPåœ°å€ç»†èŠ‚.html","excerpt":"","text":"Mysqlå­˜å‚¨IPåœ°å€ç»†èŠ‚ipv4:æ•°æ®åº“å¯ä»¥è®¾è®¡æˆ: 1`ipv4` INT UNSIGNED; æ’å…¥ ipv4 åœ°å€1INSERT INTO `table` (`ipv4`) VALUES (INET_ATON(&quot;127.0.0.1&quot;)); æŸ¥è¯¢ ipv41SELECT INET_NTOA(`ipv4`) FROM `table`; æ³¨æ„å®æµ‹ä¸€å®šè¦è®¾è®¡æˆ UNSIGNED ï¼ŒMySQL çš„ INT å­˜å‚¨èŒƒå›´æ˜¯ -2147493648åˆ°2147493647(SIGNED) ï¼Œ0åˆ°4294967295(UNSIGNED)â€è€Œ ipv4 ä¸­ 255.255.255.255è¢«INET_ATON æˆ int ä¹‹åæ˜¯ 4294967295 åˆšå¥½æ˜¯æœ€å¤§å€¼ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[{"name":"Code","slug":"Code","permalink":"http://xiaoqinghua.site/categories/Code/"},{"name":"MySql","slug":"Code/MySql","permalink":"http://xiaoqinghua.site/categories/Code/MySql/"}],"tags":[{"name":"MySql","slug":"MySql","permalink":"http://xiaoqinghua.site/tags/MySql/"}]},{"title":"ä¹Œåˆä¹‹ä¼—","slug":"ä¹Œåˆä¹‹ä¼—","date":"2016-08-08T12:23:54.000Z","updated":"2018-08-18T04:52:12.967Z","comments":true,"path":"ä¹Œåˆä¹‹ä¼—.html","link":"","permalink":"http://xiaoqinghua.site/ä¹Œåˆä¹‹ä¼—.html","excerpt":"","text":"ä¹Œåˆä¹‹ä¼—äººä¸€åˆ°ç¾¤ä½“ä¸­ï¼Œæ™ºå•†å°±ä¸¥é‡é™ä½ï¼Œä¸ºäº†è·å¾—è®¤åŒæ„Ÿï¼Œä¸ªä½“åŸæ„æŠ›å¼ƒæ˜¯éï¼Œç”¨æ™ºå•†å»æ¢å–é‚£ä»½è®©äººå€æ„Ÿå®‰å…¨çš„å½’å±æ„Ÿã€‚ ç¾¤ä½“ä¸å–„æ¨ç†ï¼Œå´åˆæ€¥äºè¡ŒåŠ¨ã€‚ æˆ‘ä»¬å§‹ç»ˆæœ‰ä¸€ç§é”™è§‰ï¼Œä»¥ä¸ºæˆ‘ä»¬çš„æ„Ÿæƒ…æºè‡ªæˆ‘ä»¬çš„å†…å¿ƒã€‚ æˆ‘ä»¬ä»¥ä¸ºè‡ªå·±æ˜¯ç†æ€§çš„æˆ‘ä»¬ä»¥ä¸ºè‡ªå·±çš„ä¸€ä¸¾ä¸€åŠ¨éƒ½æ˜¯æœ‰å…¶é“ç†çš„ã€‚ä½†äº‹å®ä¸Šï¼Œæˆ‘ä»¬ç»å¤§å¤šæ•°çš„æ—¥å¸¸è¡Œä¸ºï¼Œéƒ½æ˜¯ä¸€äº›æˆ‘ä»¬è‡ªå·±æ ¹æœ¬æ— æ³•äº†è§£çš„éšè”½åŠ¨æœºç»“æœã€‚ ä¸ªäººä¸€æ—¦æˆä¸ºç¾¤ä½“ä¸­çš„ä¸€å‘˜ï¼Œä»–æ‰€ä½œæ‰€ä¸ºå°±ä¸ä¼šå†æ‰¿æ‹…è´£ä»»ï¼Œè¿™æ˜¯æ¯ä¸ªäººéƒ½ä¼šæš´éœ²å‡ºè‡ªå·±ä¸å—çº¦æŸçš„ä¸€é¢ã€‚ç¾¤ä½“è¿½æ±‚å’Œç›¸ä¿¡çš„ä»æ¥ä¸æ˜¯ä»€ä¹ˆçœŸç›¸å’Œç†æ€§ï¼Œè€Œæ˜¯ç›²ä»ã€æ®‹å¿ã€åæ‰§å’Œç‹‚çƒ­ï¼ŒåªçŸ¥é“ç®€å•è€Œæç«¯çš„æ„Ÿæƒ…ã€‚ æ‰€è°“ä¿¡ä»°ï¼Œå®ƒè®©ä¸€ä¸ªäººå˜å¾—å®Œå…¨å—è‡ªå·±çš„æ¢¦æƒ³å¥´å½¹ã€‚ æœˆäº®ä¸å…­ä¾¿å£«ä¸Šå¸çš„ç£¨ç›˜è½¬çš„å¾ˆæ…¢ï¼Œå´ç£¨å¾—å¾ˆç»†ã€‚ åœ¨çˆ±æƒ…çš„äº‹ä¸Šï¼Œå¦‚æœä½ è€ƒè™‘èµ·è‡ªå°Šå¿ƒæ¥ï¼Œé‚£åªèƒ½æœ‰ä¸€ä¸ªåŸå› ï¼šå®é™…ä¸Šä½ è¿˜æ˜¯æœ€çˆ±ä½ è‡ªå·±ã€‚ æˆ‘ä»¬æ¯ä¸ªäººç”Ÿåœ¨ä¸–ç•Œä¸Šéƒ½æ˜¯å­¤ç‹¬çš„ã€‚æ¯ä¸ªäººéƒ½å›°åœ¨ä¸€åº§é“å¡”é‡Œï¼Œåªèƒ½é ä¸€äº›ç¬¦å·åŒåˆ«äººä¼ è¾¾è‡ªå·±çš„æ€æƒ³ã€‚è€Œè¿™äº›ç¬¦å·å¹¶æ²¡æœ‰å…±åŒçš„ä»·å€¼ï¼Œå› æ­¤ä»–ä»¬çš„æ„ä¹‰æ˜¯æ¨¡ç³Šçš„ã€ä¸ç¡®å®šçš„ã€‚æˆ‘å—¯éå¸¸å¯æ€œåœ°æƒ³æŠŠè‡ªå·±å¿ƒä¸­çš„è´¢å¯Œä¼ é€ç»™åˆ«äººï¼Œä½†ä»–ä»¬å´æ²¡æœ‰æ¥å—è¿™è´¢å¯Œçš„èƒ½åŠ›ã€‚å› æ­¤æˆ‘ä»¬åªèƒ½å­¤ç‹¬åœ°è¡Œèµ°ï¼Œå°½ç®¡èº«ä½“ç›¸äº’ä¾å‚å´å¹¶ä¸åœ¨ä¸€èµ·ï¼Œæ—¢ä¸äº†è§£åˆ«äººä¹Ÿä¸èƒ½è¢«åˆ«äººæ‰€äº†è§£ã€‚ æµ·ä¼¯åˆ©å®‰çœ‹äº†è¿™æœ¬ä¹¦ï¼Œä½ å°±ä¸ä¼šå†çœ‹ã€Šä¸‰ä½“ã€‹äº†ã€‚ æˆ‘å»æ—…è¡Œæ˜¯å› ä¸ºæˆ‘å†³å®šè¦å»ï¼Œå¹¶ä¸æ˜¯å› ä¸ºé£æ™¯ã€‚ è¶å¹´è½»ï¼Œå¥½å¥½åˆ©ç”¨è¿™ä¸ªæœºä¼šï¼Œå°½åŠ›å»å°éæ‰€æœ‰çš„ç—›è‹¦ï¼Œè¿™ç§äº‹å¯ä¸æ˜¯ä¸€è¾ˆå­ä»€ä¹ˆæ—¶å€™éƒ½å¯ä»¥é‡åˆ°çš„ã€‚ äººä¸æ˜¯ä»å¨˜èƒé‡Œå‡ºæ¥å°±ä¸€æˆä¸å˜çš„ï¼Œç›¸åï¼Œç”Ÿæ´»ä¼šé€¼ä»–ä¸€æ¬¡åˆä¸€æ¬¡çš„è„±èƒæ¢éª¨ã€‚ çœŸæ­£çš„çˆ±æƒ…éœ€è¦ä»€ä¹ˆï¼Ÿéœ€è¦ä¸¤ä¸ªäººåœ¨ä¸€èµ·æ˜¯è½»æ¾å¿«ä¹çš„ï¼Œæ²¡æœ‰å‹åŠ›çš„ã€‚ è¯šå®çš„ç”Ÿæ´»æ–¹å¼å…¶å®æ˜¯æŒ‰ç…§è‡ªå·±èº«ä½“çš„æ„æ„¿è¡Œäº‹ï¼Œé¥¿çš„æ—¶å€™åƒé¥­ï¼Œçˆ±çš„æ—¶å€™ä¸å¿…æ’’è°ã€‚ è‹è²çš„ä¸–ç•Œç”Ÿå‘½æœ¬æ¥å°±æ˜¯æ‚²ä¼¤è€Œä¸¥è‚ƒçš„ã€‚æˆ‘ä»¬æ¥åˆ°è¿™ä¸ªç¾ä¸½çš„ä¸–ç•Œé‡Œï¼Œå½¼æ­¤ç›¸é€¢ï¼Œå½¼æ­¤é—®å€™ï¼Œå¹¶ç»“ä¼´åŒæ¸¸ä¸€æ®µçŸ­æš‚çš„æ—¶é—´ã€‚ç„¶åæˆ‘ä»¬å°±æ˜¯å»äº†å¯¹æ–¹ï¼Œç„¶åå°±è«åå…¶å¦™çš„æ¶ˆå¤±äº†ï¼Œå°±åƒæˆ‘ä»¬è«åå…¶å¦™åœ°æ¥åˆ°ä¸–ç•Œä¸€èˆ¬ã€‚ ä½ å¤ªä¹ æƒ¯è¿™ä¸ªä¸–ç•Œäº†ï¼Œæ‰€ä»¥ä½ å¯¹ä»»ä½•äº‹æƒ…éƒ½ä¸æ„Ÿåˆ°æƒŠå¥‡ã€‚ çœŸæ­£çš„çŸ¥è¯†æ¥è‡ªå†…å¿ƒï¼Œè€Œä¸æ˜¯å¾—è‡ªåˆ«äººçš„ä¼ æˆã€‚åŒæ—¶å”¯æœ‰å‡ºè‡ªå†…å¿ƒçš„çŸ¥è¯†ï¼Œæ‰èƒ½ä½¿äººæ‹¥æœ‰çœŸæ­£çš„æ™ºæ…§ã€‚ ç†æ™ºå’Œç»éªŒéƒ½ç¼ºå¤±æ—¶ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªçœŸç©ºï¼Œè¿™ä¸ªçœŸç©ºå¯ä»¥æœ‰ä¿¡ä»°å¡«è¡¥ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]},{"title":"å¨±ä¹è‡³æ­»","slug":"å¨±ä¹è‡³æ­»","date":"2016-07-03T05:26:41.000Z","updated":"2018-08-18T04:52:19.219Z","comments":true,"path":"å¨±ä¹è‡³æ­».html","link":"","permalink":"http://xiaoqinghua.site/å¨±ä¹è‡³æ­».html","excerpt":"","text":"å¨±ä¹è‡³æ­»æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è®©æ–‡åŒ–ç²¾ç¥æ¯èï¼Œä¸€ç§æ˜¯å¥¥å¨å°”å¼â€”â€”æ–‡åŒ–æˆä¸ºä¸€ç§ç›‘ç‹±ï¼Œå¦ä¸€ç§æ˜¯èµ«èƒ¥é»å¼â€”â€”æ–‡åŒ–æˆä¸ºä¸€åœºæ»‘ç¨½æˆã€‚ æˆ‘ä»¬å°†æ­»äºæˆ‘ä»¬æ‰€çƒ­çˆ±çš„ä¸œè¥¿ã€‚ \bçœŸç†ä¸èƒ½ï¼Œä¹Ÿä»æ¥æ²¡æœ‰ï¼Œæ¯«æ— ä¿®é¥°åœ°å­˜åœ¨ã€‚å®ƒå¿…é¡»ç©¿ç€\bæŸç§åˆé€‚çš„å¤–è¡£å‡ºç°ï¼Œå¦åˆ™å°±å¯èƒ½å¾—ä¸åˆ°æ‰¿è®¤ï¼Œè¿™ä¹Ÿæ­£è¯´æ˜äº†â€œçœŸç†â€æ˜¯ä¸€ç§æ–‡åŒ–åè§ã€‚ è¿‡å»ï¼Œäººä»¬ä¸ºäº†è§£å†³ç”Ÿæ´»ä¸­çš„é—®é¢˜å„¿æœç´¢ä¿¡æ¯ï¼Œç°åœ¨æ˜¯ä¸ºäº†è®©æ— ç”¨çš„\bä¿¡æ¯æ´¾ä¸Šç”¨åœºè€Œåˆ¶é€ é—®é¢˜ã€‚ ä¸€ä¸ªäººå­¦åˆ°çš„\bæœ€é‡è¦çš„ä¸œè¥¿æ˜¯å­¦ä¹ çš„æ–¹æ³•ã€‚ 1984ä»–ä»¬ä¸åˆ°è§‰æ‚Ÿçš„æ—¶å€™ï¼Œå°±ä¸ä¼šé€ åã€‚ä»–ä»¬ä¸é€ åï¼Œå°±ä¸ä¼šæœ‰è§‰æ‚Ÿã€‚ å¦‚æœä½ æ„Ÿåˆ°ä¿æŒäººæ€§æ˜¯å€¼å¾—çš„ï¼Œå³ä½¿è¿™ä¸èƒ½æœ‰ä»»ä½•ç»“æœï¼Œä½ ä¹Ÿå·²ç»æ‰“è´¥äº†ä»–ä»¬ã€‚ ä¸Šç­‰äººçš„ç›®æ ‡æ˜¯ä¿æŒä»–ä»¬çš„åœ°ä½ã€‚ä¸­ç­‰äººçš„ç›®æ ‡æ˜¯è¦é€šä¸Šç­‰äººäº¤æ¢åœ°ä½ã€‚ä¸‹ç­‰äººçš„ç‰¹ç‚¹å§‹ç»ˆæ˜¯ï¼Œä»–ä»¬åŠ³è‹¦ä¹‹ä½™æ— æš‡æ—é¡¾ï¼Œå¶å°”æ‰é¡¾åˆ°æ—¥å¸¸ç”Ÿæ´»ä»¥å¤–çš„äº‹ï¼Œå› æ­¤å¦‚æœä»–ä»¬æœ‰ç›®æ ‡çš„è¯ï¼Œæ— éå°±æ˜¯å–æ¶ˆä¸€åˆ‡å·®åˆ«ï¼Œå»ºç«‹ä¸€ä¸ªäººäººå¹³ç­‰çš„ç¤¾ä¼šã€‚ æˆ‘ä»¬å¾ˆæ˜ç™½æ²¡æœ‰äººä¼šä¸ºäº†åºŸé™¤æƒåˆ©è€Œå¤ºå–æƒåˆ©ã€‚æƒåŠ›ä¸æ˜¯æ‰‹æ®µï¼ŒæƒåŠ›æ˜¯ç›®çš„ã€‚å»ºç«‹ä¸“æ”¿ä¸æ˜¯ä¸ºäº†ä¿å«é©å‘½ï¼Œåè¿‡æ¥è¿›è¡Œé©å‘½æ˜¯ä¸ºäº†å»ºç«‹ä¸“æ”¿ã€‚ zooè¶Šå–œæ¬¢ä¸Šä»€ä¹ˆï¼Œä¸€æ—¦çªç„¶å¤±å»å®ƒï¼Œæˆ‘çš„å¿ƒå°±è¶Šä¸ºæ‚²æ³£ã€‚è¿™æ ·ååå¤å¤åœ°ï¼Œæˆ‘è¿˜ä»»è¦å¿è€è¿™ç§è‹¦æ¥šä¸å¾—ä¸ç»§ç»­åº¦è¿‡å‰©ä½™çš„ç”Ÿå‘½ã€‚è¿™æ˜¯å¤šä¹ˆæ®‹é…·çš„äº‹æƒ…å•Šã€‚ä¸å…¶å¦‚æ­¤ï¼Œä¸å¦‚å¹²è„†æŠŠæˆ‘å½“åšä»€ä¹ˆéƒ½ä¸çˆ±ï¼Œæ²¡æœ‰äººå¿ƒå¾’æœ‰äººå½¢çš„æ ·å­ã€‚ çˆ±çš„è¶Šæ·±åˆ»ï¼Œæ­»çš„æ„ä¹‰å°±è¶Šæ²‰é‡ï¼Œå¤±è½æ„Ÿä¹Ÿä¼šè¶Šæ·±åˆ»ã€‚ æˆ‘è„¸ä¸Šè¶Šæ˜¯æŒ¤å‡ºæ˜äº®çš„ç¬‘å®¹ï¼Œæˆ‘çš„å†…å¿ƒå°±è¶Šæ˜¯å˜çš„è’èŠœã€‚ æˆ‘å¯¹åˆ«äººçš„å­˜åœ¨æ„Ÿåˆ°ææƒ§ï¼Œæˆ‘è§‰å¾—è‡ªå·±å¯¹åˆ«äººè°„åªšçš„è¡Œå¾„ä¹Ÿä¼šå› ä¸ºè¿™ä¸ªã€‚è¢«åˆ«äººè®¨åŒï¼Œè¢«åˆ«äººçœ‹ä¸èµ·ï¼Œè¢«åˆ«äººå˜²ç¬‘ï¼Œå¯¹æˆ‘æ¥è¯´éƒ½æ˜¯éš¾ä»¥å¿å—çš„ç—›è‹¦ï¼Œäºæ˜¯ä¸ºäº†é€ƒé¿è¿™äº›è¡Œä¸ºï¼Œæˆ‘å†è‡ªå·±çš„å†…å¿ƒå…»äº†é‚£æ ·ä¸€åªä¸‘é™‹çš„åŠ¨ç‰©ã€‚å¦‚æœæ²¡æœ‰åˆ«äººåœ¨è¿™ä¸ªä¸–ç•Œä¸Šï¼Œåªæœ‰æˆ‘è‡ªå·±ä¸€ä¸ªäººï¼Œé‚£å°†æ˜¯å¤šä¹ˆè½»æ¾å•Šã€‚ ps:è¿™æœ¬ä¹¦å¤ªæ²‰é‡äº†å§ğŸ˜¨ï¼Œé…ä¸ªé˜³å…‰æ˜åªšçš„ landspace å§ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]},{"title":"ç™¾å¹´å­¤ç‹¬","slug":"ç™¾å¹´å­¤ç‹¬","date":"2016-06-27T09:26:41.000Z","updated":"2018-08-18T04:52:38.820Z","comments":true,"path":"ç™¾å¹´å­¤ç‹¬.html","link":"","permalink":"http://xiaoqinghua.site/ç™¾å¹´å­¤ç‹¬.html","excerpt":"","text":"ç™¾å¹´å­¤ç‹¬æ— è®ºèµ°åˆ°å“ªé‡Œï¼Œéƒ½åº”è¯¥è®°ä½ï¼Œè¿‡å¾€çš„ä¸€åˆ‡éƒ½æ˜¯å‡çš„ï¼Œå›å¿†æ˜¯ä¸€æ¡æ²¡æœ‰å°½å¤´çš„è·¯ï¼Œä¸€åˆ‡ä»¥å¾€çš„æ˜¥å¤©éƒ½ä¸å¤å­˜åœ¨ï¼Œå°±è¿é‚£æœ€åšéŸ§\bè€Œåˆç‹‚ä¹±çš„çˆ±æƒ…å½’æ ¹ç»“åº•ä¹Ÿä¸è¿‡æ˜¯ä¸€ç§è½¬ç¬å³é€çš„ç°å®ï¼Œå”¯æœ‰å­¤ç‹¬æ°¸æ’ã€‚ ç”Ÿå‘½ä¸­çœŸæ­£é‡è¦çš„ä¸æ˜¯ä½ é­é‡äº†ä»€ä¹ˆï¼Œè€Œæ˜¯ä½ è®°ä½äº†å“ªäº›äº‹ï¼Œåˆæ˜¯å¦‚ä½•é“­è®°çš„ã€‚ æˆ‘ä»¬è¶‹è¡Œåœ¨äººç”Ÿè¿™ä¸ªäº˜å¤çš„æ—…é€”ï¼Œåœ¨åå·ä¸­å¥”è·‘ï¼Œåœ¨æŒ«æŠ˜ä¸­æ¶…æ§ƒï¼Œå¿§æ„ç¼ æ»¡å…¨èº«ï¼Œç—›è‹¦é£˜æ´’ä¸€åœ°ã€‚æˆ‘ä»¬ç´¯ï¼Œå´æ— ä»æ­¢æ­‡ï¼›æˆ‘ä»¬è‹¦ï¼Œå´æ— æ³•å›é¿ã€‚ ä¹°ä¸‹ä¸€å¼ æ°¸ä¹…è½¦ç¥¨ï¼Œç™»ä¸Šä¸€è¾†æ°¸æ— ç»ˆç‚¹çš„åˆ—è½¦ã€‚ æ‰€æœ‰äººéƒ½æ˜¾å¾—å¾ˆæ¿€è¿›ï¼Œç”¨è‡ªå·±çš„æ–¹å¼æƒ³å°½åŠæ³•æ´¾é£å¯‚å¯ï¼Œäº‹å®ä¸Šä»æ˜¯å»¶ç»­è‡ªå·±çš„å­¤ç‹¬ã€‚å¯‚å¯æ˜¯é€ åŒ–å¯¹ç¾¤å±…è€…çš„è¯…å’’ï¼Œå­¤ç‹¬æ‰æ˜¯å¯‚å¯çš„å”¯ä¸€å‡ºå£ã€‚ ä½œè€…ï¼šxiaoqinghua æœ‰å¹¸è”ç³»åœ°å€ï¼šhttps://github.com/smartzerç‰ˆæƒå£°æ˜ï¼šæœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ CC BY-NC-SA 3.0 è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼","categories":[],"tags":[{"name":"Life","slug":"Life","permalink":"http://xiaoqinghua.site/tags/Life/"}]}]}